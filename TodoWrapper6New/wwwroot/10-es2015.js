(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"4fRq":function(t,e){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var i=new Uint8Array(16);t.exports=function(){return a(i),i}}else{var c=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),c[e]=t>>>((3&e)<<3)&255;return c}}},EcEN:function(t,e,a){var i=a("xDdU"),c=a("xk4V"),n=c;n.v1=i,n.v4=c,t.exports=n},I2ZF:function(t,e){for(var a=[],i=0;i<256;++i)a[i]=(i+256).toString(16).substr(1);t.exports=function(t,e){var i=e||0;return[a[t[i++]],a[t[i++]],a[t[i++]],a[t[i++]],"-",a[t[i++]],a[t[i++]],"-",a[t[i++]],a[t[i++]],"-",a[t[i++]],a[t[i++]],"-",a[t[i++]],a[t[i++]],a[t[i++]],a[t[i++]],a[t[i++]],a[t[i++]]].join("")}},XOxn:function(t){t.exports=JSON.parse('{"TaskTodoTemplateDetailForm":{"ColumnInfo":{"Code":{"Name":"Code","Caption":"M\xe3 vi\u1ec7c","DataType":"string","Width":100,"AllowEditing":true},"Description":{"Name":"Description","Caption":"N\u1ed9i dung c\xf4ng vi\u1ec7c","DataType":"string","Width":200,"AllowEditing":true},"DetaiSettings":{"Name":"DetaiSettings","Caption":"Thi\u1ebft l\u1eadp chi ti\u1ebft","DataType":"string","Width":300,"AllowEditing":true}}}}')},bAuk:function(t){t.exports=JSON.parse('{"TaskSubscriptionForm":{"ColumnInfo":{"UserName":{"Name":"UserName","Caption":"T\xean ng\u01b0\u1eddi theo d\xf5i","Width":130},"VehicleName":{"Name":"VehicleName","Caption":"Ph\u01b0\u01a1ng ti\u1ec7n v\u1eadn chuy\u1ec3n","Width":130},"SubctiptionType":{"Name":"SubctiptionType","Caption":"Lo\u1ea1i th\xf4ng b\xe1o","Width":100},"Description":{"Name":"Description","Caption":"Di\u1ec5n gi\u1ea3i","Width":130}}}}')},joGx:function(t){t.exports=JSON.parse('{"TaskTodoTemplateForm":{"ColumnInfo":{"Code":{"Name":"Code","Caption":"M\xe3 nh\xf3m vi\u1ec7c","DataType":"string","Width":120,"AllowEditing":true},"CategoryId":{"Name":"CategoryId","Caption":"Ph\xe2n lo\u1ea1i","DataType":"number","Width":100,"AllowEditing":true},"Description":{"Name":"Description","Caption":"Di\u1ec5n gi\u1ea3i","DataType":"string","Width":200,"AllowEditing":true}}}}')},kusE:function(t,e,a){"use strict";a.r(e),a.d(e,"TaskManagerModule",function(){return ni});var i=a("ofXK"),c=a("tyNb"),n=a("mrSG"),s=a("fXoL"),o=a("K3ix"),r=a("sYmb");let l=(()=>{class t{constructor(t,e){this.modalService=t,this.modalRefConfirm=e,this.event=new s.q}ngOnInit(){}confirm(){this.triggerEvent(!0),this.modalRefConfirm.hide()}decline(){this.triggerEvent(!1),this.modalRefConfirm.hide()}triggerEvent(t){this.event.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(o.b),s.Vb(o.a))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-confirm-popup"]],decls:10,vars:9,consts:[[1,"modal-body","text-center"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.bc(1,"p"),s.Mc(2),s.lc(3,"translate"),s.ac(),s.bc(4,"button",1),s.ic("click",function(){return e.confirm()}),s.Mc(5),s.lc(6,"translate"),s.ac(),s.bc(7,"button",2),s.ic("click",function(){return e.decline()}),s.Mc(8),s.lc(9,"translate"),s.ac(),s.ac()),2&t&&(s.Jb(2),s.Nc(s.mc(3,3,e.title)),s.Jb(3),s.Nc(s.mc(6,5,"yes")),s.Jb(3),s.Nc(s.mc(9,7,"no")))},pipes:[r.c],styles:[""]}),t})();var d=a("3zFB"),b=a("3Pt+"),m=a("raoF"),h=a("EcEN"),g=a("Y4+Y"),u=a("GSif"),p=a("9+W7"),f=a("cplz"),k=a("hzby"),_=a("kUHs"),v=a("44PX"),M=a("fB2i"),T=a("lUod");const y=["*"];function C(t,e){1&t&&s.Xb(0)}function I(t,e){if(1&t&&(s.bc(0,"bar",3),s.oc(1),s.ac()),2&t){const t=s.kc();s.qc("type",t.type)("value",t._value)("max",t.max)("animate",t.animate)("striped",t.striped)}}function D(t,e){if(1&t&&(s.bc(0,"bar",3),s.Mc(1),s.ac()),2&t){const t=e.$implicit,a=s.kc(2);s.qc("type",t.type)("value",t.value)("max",t.max)("animate",a.animate)("striped",a.striped),s.Jb(1),s.Nc(t.label)}}function A(t,e){if(1&t&&s.Kc(0,D,2,6,"bar",4),2&t){const t=s.kc();s.qc("ngForOf",t._values)}}let J=(()=>{class t{constructor(t,e){this.el=t,this.renderer=e,this.max=100,this.value=0,this.animate=!1,this.striped=!1,this.type="info",this.percent=100}get isBs3(){return Object(T.d)()}ngOnChanges(t){var e;(t.value||t.max)&&(this.percent=Number(t.value.currentValue||0)/Number((null===(e=t.max)||void 0===e?void 0:e.currentValue)||this.max||100)*100),t.type&&this.applyTypeClasses()}applyTypeClasses(){if(this._prevType){const t=`bg-${this._prevType}`;this.renderer.removeClass(this.el.nativeElement,`progress-bar-${this._prevType}`),this.renderer.removeClass(this.el.nativeElement,t),this._prevType=void 0}if(this.type){const t=`bg-${this.type}`;this.renderer.addClass(this.el.nativeElement,`progress-bar-${this.type}`),this.renderer.addClass(this.el.nativeElement,t),this._prevType=this.type}}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(s.o),s.Vb(s.M))},t.\u0275cmp=s.Pb({type:t,selectors:[["bar"]],hostAttrs:["role","progressbar","aria-valuemin","0"],hostVars:15,hostBindings:function(t,e){2&t&&(s.Kb("aria-valuenow",e.value)("aria-valuetext",e.percent?e.percent.toFixed(0)+"%":"")("aria-valuemax",e.max),s.Jc("height","100","%")("width",e.percent,"%"),s.Nb("progress-bar",!0)("progress-bar-animated",!e.isBs3&&e.animate)("progress-bar-striped",e.striped)("active",e.isBs3&&e.animate))},inputs:{max:"max",value:"value",animate:"animate",striped:"striped",type:"type"},features:[s.Hb],ngContentSelectors:y,decls:1,vars:0,template:function(t,e){1&t&&(s.pc(),s.oc(0))},encapsulation:2,changeDetection:0}),t})(),S=(()=>{class t{constructor(){this.animate=!1,this.max=100}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(s.Rb)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),N=(()=>{class t{constructor(t){this.max=100,this.animate=!1,this.striped=!1,this.isStacked=!1,this._value=0,Object.assign(this,t)}set value(t){this.isStacked=Array.isArray(t),"number"==typeof t?(this._value=t,this._values=void 0):(this._value=void 0,this._values=t)}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(S))},t.\u0275cmp=s.Pb({type:t,selectors:[["progressbar"]],hostVars:3,hostBindings:function(t,e){2&t&&(s.Kb("max",e.max),s.Nb("progress",!0))},inputs:{max:"max",animate:"animate",striped:"striped",value:"value",type:"type"},ngContentSelectors:y,decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["NotStacked",""],["Stacked",""],[3,"type","value","max","animate","striped"],[3,"type","value","max","animate","striped",4,"ngFor","ngForOf"]],template:function(t,e){if(1&t&&(s.pc(),s.Kc(0,C,1,0,"ng-container",0),s.Kc(1,I,2,5,"ng-template",null,1,s.Lc),s.Kc(3,A,1,1,"ng-template",null,2,s.Lc)),2&t){const t=s.Ac(2),a=s.Ac(4);s.qc("ngIf",!e.isStacked)("ngIfThen",t)("ngIfElse",a)}},directives:[i.m,J,i.l],styles:["[_nghost-%COMP%] {\n      width: 100%;\n      display: flex;\n    }"],changeDetection:0}),t})(),w=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Tb({type:t}),t.\u0275inj=s.Sb({imports:[[i.c]]}),t})(),O=(()=>{class t{constructor(t){this.translate=t}transform(t){return 1==t?this.translate.instant("task_manager_status_created"):2==t?this.translate.instant("task_manager_status_process"):4==t?this.translate.instant("task_manager_status_completed"):1024==t?this.translate.instant("task_manager_status_finished"):void 0}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(r.d))},t.\u0275pipe=s.Ub({name:"statusPipe",type:t,pure:!0}),t})(),P=(()=>{class t{constructor(t){this.translate=t}transform(t){return this.translate.instant(1==t?"task_manager_task_priority_low":2==t?"task_manager_task_priority_medium":"task_manager_task_priority_high")}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(r.d))},t.\u0275pipe=s.Ub({name:"priorityPipe",type:t,pure:!0}),t})(),x=(()=>{class t extends i.e{transform(t,e){if(t){let e=(t=new Date(t)).toLocaleTimeString(),a=t.getMonth()+1;return t.getDate()+" th\xe1ng "+a+" l\xfac "+e}}}return t.\u0275fac=function(e){return E(e||t)},t.\u0275pipe=s.Ub({name:"datetimePipeEvent",type:t,pure:!0}),t})();const E=s.dc(x);let F=(()=>{class t{transform(t,e){let a=[];for(let i in t)i!==e&&a.push({key:i,obj:t[i]});return a}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Ub({name:"jsonToArray",type:t,pure:!0}),t})(),q=(()=>{class t{constructor(t){this.translate=t}transform(t){return this.translate.instant(1==t?"OnScreen":2==t?"SMS":4==t?"Email":"None")}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(r.d))},t.\u0275pipe=s.Ub({name:"subctiptionTypePipe",type:t,pure:!0}),t})();function L(t,e){1&t&&(s.bc(0,"h4",56),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"task_manager_create_new_task")))}function K(t,e){1&t&&(s.bc(0,"h4",56),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"task_manager_update_task")))}function V(t,e){1&t&&(s.bc(0,"small",57),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function U(t,e){1&t&&(s.bc(0,"small",57),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function W(t,e){if(1&t&&(s.bc(0,"option",58),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.qc("value",t.Id),s.Jb(1),s.Nc(t.Name)}}function R(t,e){1&t&&(s.bc(0,"small",57),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function j(t,e){if(1&t&&(s.bc(0,"option",58),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.qc("value",t.Id),s.Jb(1),s.Nc(t.UserName)}}const B=function(t){return{hidden:t}};function $(t,e){if(1&t){const t=s.cc();s.bc(0,"div",60),s.ic("mouseover",function(){s.Ec(t);const e=s.kc().$implicit;return s.kc().isActionTodo=e.Id})("mouseout",function(){return s.Ec(t),s.kc(2).isActionTodo=void 0}),s.bc(1,"input",61),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc(2).todoCode=e}),s.ac(),s.bc(2,"input",62),s.ic("change",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().FinishTaskToDo(e,a)}),s.ac(),s.bc(3,"span"),s.Mc(4),s.ac(),s.bc(5,"span",63),s.bc(6,"a",64),s.ic("click",function(){s.Ec(t);const e=s.kc().$implicit;return s.kc().onChangeItemTodo(e.Id,e.Description,e.Code)}),s.Wb(7,"i",65),s.ac(),s.bc(8,"a",64),s.ic("click",function(){s.Ec(t);const e=s.kc().$implicit;return s.kc().onDeleteItemTodo(e)}),s.Wb(9,"i",66),s.ac(),s.ac(),s.ac()}if(2&t){const t=s.kc().$implicit,e=s.kc();s.Jb(1),s.qc("ngModel",e.todoCode),s.Jb(1),s.qc("checked",t.Finished)("disabled",0==t.Id),s.Jb(2),s.Oc(" ",t.Description,""),s.Jb(1),s.qc("ngClass",s.uc(5,B,e.isActionTodo!==t.Id))}}function G(t,e){if(1&t&&(s.bc(0,"div"),s.Kc(1,$,10,7,"div",59),s.ac()),2&t){const t=e.$implicit,a=s.kc();s.Jb(1),s.qc("ngIf",0==t.Id||a.editTodoId!=t.Id)}}function z(t,e){if(1&t){const t=s.cc();s.bc(0,"button",67),s.ic("click",function(){s.Ec(t);const e=s.kc();return e.isToDoItem=!e.isToDoItem}),s.Mc(1),s.lc(2,"translate"),s.ac()}2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"button_cell_add")))}function H(t,e){1&t&&(s.bc(0,"small",57),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function Q(t,e){if(1&t){const t=s.cc();s.bc(0,"div",68),s.bc(1,"div"),s.bc(2,"input",69),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc().descriptionTaskToDo=e}),s.ac(),s.Kc(3,H,3,3,"small",11),s.ac(),s.bc(4,"button",47),s.ic("click",function(){s.Ec(t);const e=s.kc();return e.onSaveTaskToDo(e.editTodoId)}),s.Mc(5),s.lc(6,"translate"),s.ac(),s.bc(7,"a",70),s.ic("click",function(){return s.Ec(t),s.kc().onCloseInputTodoItem()}),s.Wb(8,"i",66),s.ac(),s.ac()}if(2&t){const t=s.kc();s.Jb(2),s.qc("ngModel",t.descriptionTaskToDo),s.Jb(1),s.qc("ngIf",t.requiredItemTodo),s.Jb(2),s.Nc(s.mc(6,3,"button_cell_save"))}}function Y(t,e){if(1&t&&(s.bc(0,"option",58),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.qc("value",t.Id),s.Jb(1),s.Oc(" ",t.Description,"")}}function X(t,e){1&t&&(s.bc(0,"small",57),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function Z(t,e){if(1&t&&(s.bc(0,"th"),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.Oc(" ",t.obj.Caption," ")}}function tt(t,e){if(1&t&&(s.bc(0,"span"),s.Mc(1),s.ac()),2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.Jb(1),s.Nc(e[t.key])}}function et(t,e){if(1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"date"),s.ac()),2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.Jb(1),s.Nc(s.nc(2,1,e[t.key],"dd/MM/yyyy"))}}function at(t,e){if(1&t){const t=s.cc();s.bc(0,"input",75),s.ic("ngModelChange",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().$implicit[a.key]=e}),s.ac()}if(2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.qc("ngModel",e[t.key])}}const it=function(){return{dateInputFormat:"DD-MM-YYYY",adaptivePosition:!0}};function ct(t,e){if(1&t){const t=s.cc();s.bc(0,"input",76),s.ic("ngModelChange",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().$implicit[a.key]=e}),s.ac()}if(2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.qc("ngModel",e[t.key])("bsConfig",s.tc(2,it))}}function nt(t,e){if(1&t){const t=s.cc();s.bc(0,"input",77),s.ic("ngModelChange",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().$implicit[a.key]=e}),s.ac()}if(2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.qc("ngModel",e[t.key])}}function st(t,e){if(1&t&&(s.bc(0,"option",58),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.qc("value",t.Id),s.Jb(1),s.Oc(" ",t.Code," ")}}function ot(t,e){if(1&t){const t=s.cc();s.bc(0,"span"),s.bc(1,"select",78),s.ic("ngModelChange",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().$implicit[a.key]=e})("change",function(e){s.Ec(t);const a=s.kc(2).$implicit;return s.kc().setSelectedContact(e.target.value,a.Id)}),s.Kc(2,st,2,2,"option",16),s.ac(),s.ac()}if(2&t){const t=s.kc().$implicit,e=s.kc().$implicit,a=s.kc();s.Jb(1),s.qc("ngModel",e[t.key]),s.Jb(1),s.qc("ngForOf",a.listContact)}}function rt(t,e){if(1&t&&(s.bc(0,"td"),s.Kc(1,tt,2,1,"span",54),s.Kc(2,et,3,4,"span",54),s.Kc(3,at,1,1,"input",72),s.Kc(4,ct,1,3,"input",73),s.Kc(5,nt,1,1,"input",74),s.Kc(6,ot,3,2,"span",54),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.qc("ngIf","date"!=t.obj.Type&&!t.obj.Editable),s.Jb(1),s.qc("ngIf","date"==t.obj.Type&&!t.obj.Editable),s.Jb(1),s.qc("ngIf","string"==t.obj.Type&&t.obj.Editable),s.Jb(1),s.qc("ngIf","date"==t.obj.Type&&t.obj.Editable),s.Jb(1),s.qc("ngIf","number"==t.obj.Type&&t.obj.Editable),s.Jb(1),s.qc("ngIf","select"==t.obj.Type&&t.obj.Editable)}}function lt(t,e){if(1&t&&(s.bc(0,"tr",71),s.bc(1,"td"),s.Mc(2),s.ac(),s.Kc(3,rt,7,6,"td",41),s.lc(4,"jsonToArray"),s.ac()),2&t){const t=e.index,a=s.kc();s.Jb(2),s.Nc(t+1),s.Jb(1),s.qc("ngForOf",s.nc(4,2,a.taskItemColumn,"CustomsCode"))}}function dt(t,e){1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"button_add")))}function bt(t,e){1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"button_update")))}const mt=function(){return{withTimepicker:!0,dateInputFormat:"DD-MM-YYYY",adaptivePosition:!0}};let ht=(()=>{class t{constructor(t,e,a,i,c,n,o,r){this.bsModalRef=t,this.modalService=e,this.notificationService=a,this.datePipe=i,this._authenService=c,this.formBuilder=n,this.formErrors=o,this.dataService=r,this.list=[],this.errors={},this.loading=!1,this.initTiny={base_url:"/tinymce",height:250,language:"vi_VN",language_url:"./assets/tinymce/langs/vi_VN.js",plugins:"autosave autolink code codesample colorpicker emoticons fullscreen hr preview table textcolor wordcount",toolbar:"undo redo forecolor cut copy paste fontselect styleselect bold italic link preview code alignleft aligncenter alignright alignjustify"},this.taskItem={},this.event=new s.q,this.bsValue=new Date,this.hasTodo=!1,this.requiredItemTodo=!1,this.isToDoItem=!1,this.taskToDoTemplateList=[],this.listTaskToDo=[],this.listTaskItem=[],this.extenalTaskItems=[],this.maxProgressbar=0,this.progressing=0,this.userList=[],this.projectList=[],this.taskItemColumn=m.TaskForm.ColumnInfoTaskItem,this.taskItemAirColumn=[],this.taskItemSeaColumn=[],this.hasTaskItem=!1,this.Customer={},this.listContact=[],this.initForm(0)}ngOnInit(){const t=this._authenService.getLoggedInUser();this.loadDropdownControlData(),this.getUserIdLogin(t.userName),this.id=this.id?this.id:this.taskItem.Id,this.id?(this.hasTaskItem=!0,this.getTask(this.id),this.getTodoByTask(this.id),this.getItemByTask(this.id)):(this.initForm(1),this.importExternalTaskItems())}getUserIdLogin(t){if(t){const e=[];e.push("@UserName",t),this.dataService.post("/commands",{CommandText:"uspUser___FindUserName",CommandType:1025,Parameters:e}).subscribe(t=>{t.Data&&(this.userLoginId=t.Data[0].Id)})}}getListUser(){const t=[];t.push("@ActivatedOnly",1),this.dataService.post("/commands",{CommandText:"uspUser___Fill",CommandType:1025,Parameters:t}).subscribe(t=>{t.Data&&(this.userList=t.Data)})}getListProject(){this.dataService.get("/projects").subscribe(t=>{t&&(this.projectList=t)})}loadDropdownControlData(){this.getListUser(),this.getListProject(),this.getListToDoTemplate(),this.getListContact()}getTask(t){return Object(n.a)(this,void 0,void 0,function*(){if(t){const e=[];e.push("@TaskId",t);const a={CommandText:"uspTask___GetById",CommandType:1025,Parameters:e};yield this.dataService.post("/commands",a).toPromise().then(t=>{t.Data&&(this.taskItem=t.Data[0],this.fillFormData(this.taskItem))})}})}getTodoByTask(t){t&&this.dataService.get("/taskTodos/bytaskId/"+t+"?sort=CreatedOn ASC").subscribe(t=>{this.listTaskToDo=t,this.maxProgressbar=this.listTaskToDo.length,this.progressing=this.listTaskToDo.filter(t=>t.Finished).length})}getItemByTask(t){if(t){const e=[];e.push("@TaskId",t),this.dataService.post("/commands",{CommandText:"uspTaskItem___ListByTaskId",CommandType:1025,Parameters:e}).toPromise().then(t=>{if(t.Data){this.listTaskItem=t.Data;const e=[],a=Object.assign(Object.assign(Object.assign({},this.taskItemColumn),this.taskItemSeaColumn),this.taskItemAirColumn);for(const t in a)"date"===a[t].type&&a[t].edit&&e.push(a[t].Name);for(const t of this.listTaskItem){for(const a of e)t[a]=new Date(t[a]);this.ConverCustomer(t.CustomerId,t.Id)}}})}}ConverCustomer(t,e){if(t){const a=this.listTaskItem.find(t=>t.Id===e);this.dataService.get("/Contacts/"+t).subscribe(t=>{t&&(this.Customer=t,a.CustomsCode=this.Customer.Code,a.CustomerName=this.Customer.Name)})}}showCreateTaskModel(){let e=null;this.bsModalRef=this.modalService.show(t,{initialState:{extenalTaskItems:e},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(t=>{t&&"Submit"==t.data&&(e=e.filter(t=>t.checked))})}importExternalTaskItems(){this.extenalTaskItems.length>0&&(this.listTaskItem=this.extenalTaskItems,this.hasTaskItem=!0)}initForm(t){let e=0,a=0,i=0,c=0,n=0,s=0,o=0,r=0;const l=new Date;t&&(s=this.userLoginId,a=1,c=1,n=1,o=1,r=0,i=1,this.taskToDoTemplateList.length>0&&(e=this.taskToDoTemplateList[0])),this.itemForm=this.formBuilder.group({Id:[""],GId:[""],Code:[""],ProjectId:[0,[b.u.required]],TaskDate:[new Date,[b.u.required]],TaskDateTime:[l],Title:["",[b.u.required]],TypeId:[o],OwnerId:[s],CategoryId:[a],Priority:[c],Status:[n],Finished:[r],ActualDate:[l],ActualDateTime:[l],DueDate:[l],DueDateTime:[l],TargetDate:[l],TargetDateTime:[l],EstimatedDuration:[i],Description:[""],JsonData:[""],AssignedTo:[s],TemplateId:[e]}),Object.keys(this.itemForm.controls).forEach(t=>{this.errors[t]=""}),this.itemForm.valueChanges.subscribe(t=>{this.errors=this.formErrors.validateForm(this.itemForm,this.errors,!0)})}triggerEvent(t){this.event.emit({data:t})}onSubmit(t){if(this.loading=!0,this.formErrors.markFormGroupTouched(this.itemForm),this.itemForm.valid){const e=this.formatFormData(t);e.Description=this.descriptionTask,e.Status<=1&&(e.Status=2),e.HasDetails=3,this.id?(this.listTaskItem.length>0&&(e.HasDetails=3),e.ChangedBy=this.userLoginId,e.TaskItems=this.listTaskItem,e.TaskTodos=this.listTaskToDo):(e.GId=Object(h.v4)(),e.CreatedBy=this.userLoginId,e.OwnerId=this.userLoginId,this.listTaskItem.length>0&&this.listTaskItem.forEach(t=>{t.GId=Object(h.v4)(),t.CreatedBy=this.userLoginId,t.Id=null,t.TaskId=null}),e.TaskItems=this.listTaskItem,e.TaskTodos=this.listTaskToDo),this.dataService.post("/tasks/saveHierarchy",e).subscribe(t=>{this.id?(this.UpdateTaskAssigned(e),this.notificationService.printSuccessMessage(d.a.UPDATED_OK_MSG)):this.notificationService.printSuccessMessage(d.a.CREATED_OK_MSG),this.triggerEvent("Submit"),this.bsModalRef.hide()},t=>this.dataService.handleError(t))}else this.loading=!1,this.errors=this.formErrors.validateForm(this.itemForm,this.errors,!1)}UpdateTaskAssigned(t){const e=[];e.push("@TaskId",t.Id,"@AssignedTo",t.AssignedTo,"@Priority",t.Priority,"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___AssignTo",CommandType:1025,Parameters:e}).subscribe(t=>{})}onActualDateTimeChanged(t){console.log(t)}onDueDateTimeChanged(t){console.log(t)}formatFormData(t){const e={};return t&&Object.keys(this.itemForm.controls).forEach(a=>{if(t[a])if("TaskDate"===a||"DueDate"===a||"TargetDate"===a||"ActualDate"===a){const i=t[a+"Time"];if(i){const c=i.getHours(),n=i.getMinutes(),s=i.getSeconds(),o=i.getMilliseconds(),r=t[a];r.setHours(0,0,0,0),r.setHours(c,n,s,o),r.setTime(r.getTime()-6e4*r.getTimezoneOffset()),e[a]=r}else{const i=t[a];i.setTime(i.getTime()-6e4*i.getTimezoneOffset()),e[a]=i}}else e[a]=t[a];else e[a]=null}),e}onClose(){this.triggerEvent("Close"),this.bsModalRef.hide()}fillFormData(t){t&&(Object.keys(this.itemForm.controls).forEach(e=>{"TaskDate"===e||"DueDate"===e||"TargetDate"===e||"ActualDate"===e?(this.itemForm.controls[e].setValue(t[e]?new Date(t[e]):""),this.itemForm.controls[e+"Time"].setValue(t[e]?new Date(t[e]):"")):this.itemForm.controls[e].setValue(t[e]?t[e]:"")}),this.descriptionTask=t.Description,this.categoryId=t.CategoryId)}onCloseInputTodoItem(){this.descriptionTaskToDo="",this.isToDoItem=!1,this.editTodoId=void 0,this.editTodoIndex=void 0,this.requiredItemTodo=!1}onChangeItemTodo(t,e,a){const i=this.listTaskToDo.find(i=>i.Id===t&&i.Code===a&&i.Description===e);this.editTodoIndex=this.listTaskToDo.indexOf(i),this.editTodoId=t,this.isToDoItem=!0,this.descriptionTaskToDo=e,this.todoCode=a}onDeleteItemTodo(t){if(t.Id)this.dataService.delete("/taskTodos/"+t.Id).subscribe(e=>{const a=this.listTaskToDo.find(e=>e.Id===t.Id),i=this.listTaskToDo.indexOf(a);this.listTaskToDo.splice(i,1),this.maxProgressbar=this.listTaskToDo.length,this.progressing=this.listTaskToDo.filter(t=>t.Finished).length});else{const e=this.listTaskToDo.find(e=>e.Id===t.Id&&e.Description===t.Description),a=this.listTaskToDo.indexOf(e);this.listTaskToDo.splice(a,1),this.maxProgressbar=this.listTaskToDo.length,this.progressing=this.listTaskToDo.filter(t=>t.Finished).length}}onSaveTaskToDo(t){if(!this.descriptionTaskToDo)return void(this.requiredItemTodo=!0);""===this.todoCode&&(this.todoCode=Object(h.v4)());let e={};e=t?{taskId:this.id,Id:this.editTodoId,code:this.todoCode,description:this.descriptionTaskToDo,changedBy:this.userLoginId}:{taskId:this.id,code:this.todoCode,description:this.descriptionTaskToDo,createdBy:this.userLoginId},t?this.dataService.post("/taskTodos",e).subscribe(e=>{t?this.listTaskToDo.find(e=>e.Id===t).Description=this.descriptionTaskToDo:this.listTaskToDo.push(e)}):this.editTodoIndex>=0?this.listTaskToDo[this.editTodoIndex].Description=this.descriptionTaskToDo:this.addNewTodoTemplate(),this.maxProgressbar=this.listTaskToDo.length,this.descriptionTaskToDo="",this.todoCode="",this.isToDoItem=!1,this.editTodoId=void 0,this.editTodoIndex=-1}getListToDoTemplate(){this.dataService.get("/TaskTodoTemplates?Sort=Code").subscribe(t=>{t&&(this.taskToDoTemplateList=t)})}setSelectedToDoTemplate(t){this.selectedToDoTemplate=t}setSelectedContact(t,e){this.ConverCustomer(t,e)}addNewTodoTemplate(){""===this.todoCode&&(this.todoCode=Object(h.v4)()),this.listTaskToDo.push({Id:0,TaskId:this.id,Code:this.todoCode,Description:this.descriptionTaskToDo,Status:0,Finished:0}),this.maxProgressbar=this.listTaskToDo.length,this.descriptionTaskToDo="",this.todoCode="",this.isToDoItem=!1,this.editTodoId=void 0,this.editTodoIndex=-1}addToDoItemFromTemplate(t){this.dataService.get("/TaskTodoTemplateDetails/Paged?filter=TemplateId="+t+"&Sort=Code").subscribe(t=>{t.Data.forEach(t=>{""===t.Code&&(t.Code=Object(h.v4)()),this.listTaskToDo.find(e=>0!==e.DetailId&&e.DetailId===t.Id||(null===e.DetailId||0===e.DetailId)&&e.Code===t.Code)||this.listTaskToDo.push({Id:0,TaskId:this.id,DetailId:t.Id,Code:t.Code,DetailType:t.DetailType,Description:t.Description,Status:0,Finished:0})}),this.maxProgressbar=this.listTaskToDo.length,this.descriptionTaskToDo="",this.todoCode="",this.isToDoItem=!1,this.editTodoId=void 0,this.editTodoIndex=-1})}FinishTaskToDo(t,e){return Object(n.a)(this,void 0,void 0,function*(){if(t.target.checked){let t={CommandText:"uspTaskTodo___UpdateFinished",CommandType:1025,Parameters:["@Id",e.Id,"@Finished",1,"@ChangedBy",this.userLoginId,"@DetailValue",e.DetailValue]};yield this.dataService.post("/commands",t).subscribe(t=>{t.Data?(e.ChangedOn=t.Data[0].ChangedOn,e.ChangedByName=t.Data[0].ChangedByName):(e.ChangedOn=new Date,e.ChangedByName=""),e.Finished=!0}),this.progressing=this.progressing+1}else{const t=[];t.push("@Id",e.Id,"@Finished",0,"@ChangedBy",this.userLoginId,"@DetailValue",null);const a={CommandText:"uspTaskTodo___UpdateFinished",CommandType:1025,Parameters:t};yield this.dataService.post("/commands",a).subscribe(t=>{e.Finished=!1}),this.progressing=this.progressing-1}this.maxProgressbar>0&&(this.taskItem.Status<4&&this.progressing==this.maxProgressbar?this.taskItem.Status=4:this.taskItem.Status>=4&&this.progressing<=this.maxProgressbar&&(this.taskItem.Status=2),yield this.UpdateTaskStatus())})}UpdateTaskStatus(){if(this.maxProgressbar<=0)return;let t=2;this.progressing==this.maxProgressbar&&(t=4);const e=[];e.push("@TaskId",this.taskItem.Id,"@Status",t,"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___UpdateStatus",CommandType:1025,Parameters:e}).subscribe(t=>{})}getListContact(){this.dataService.get("/Contacts?Sort=Code").subscribe(t=>{t&&(this.listContact=t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(o.a),s.Vb(o.b),s.Vb(g.a),s.Vb(i.e),s.Vb(u.a),s.Vb(b.c),s.Vb(p.a),s.Vb(f.a))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-task-item"]],decls:219,vars:143,consts:[[1,"modal-header"],["class","modal-title pull-left",4,"ngIf"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],["autocomplete","off",1,"form-horizontal","form-label-left","input_mask",3,"formGroup","ngSubmit"],["type","number","formControlName","Id",1,"hidden"],[1,"row"],[1,"col-md-3","col-sm-3","col-xs-12"],[1,"form-group"],["type","text","formControlName","TaskDate","bsDatepicker","",1,"form-control",3,"bsConfig"],["class","text-danger",4,"ngIf"],[1,"col-md-9","col-sm-9","col-xs-12"],["type","text","required","","minlength","3","name","title","formControlName","Title",1,"form-control"],["name","projectId","formControlName","ProjectId",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2","col-sm-2","col-xs-12"],["name","TypeId","formControlName","TypeId",1,"form-control"],["value","1"],["value","2"],["value","4"],["name","categoryId","formControlName","CategoryId",1,"form-control",3,"ngModel","ngModelChange"],["name","priority","formControlName","Priority",1,"form-control"],["name","assignedTo","formControlName","AssignedTo",1,"form-control"],[1,"col-md-4","col-sm-4","col-xs-12"],["type","text","formControlName","DueDate","bsDatepicker","",1,"form-control",3,"bsConfig"],["formControlName","DueDateTime",3,"ngModelChange"],["type","text","formControlName","ActualDate","bsDatepicker","",1,"form-control",3,"bsConfig"],["formControlName","ActualDateTime",3,"ngModelChange"],["name","status","formControlName","Status",1,"form-control"],[1,"col-md-1","col-sm-1","col-xs-12"],["type","checkbox","id","finished","name","finished","formControlName","Finished",1,"form-control"],["id","task-description",3,"heading"],[3,"init","ngModel","ngModelChange"],["id","task-todo",3,"heading"],[1,"task-todo"],["aria-hidden","true",1,"fa","fa-list"],[1,"mb-2","progressbar-panel"],[3,"value","max","striped","animate"],[1,"list-task-todo"],[4,"ngFor","ngForOf"],[1,"col-md-5","col-sm-5","col-xs-12"],["class","task-todo-action btn btn-secondary",3,"click",4,"ngIf"],["class","input-task-todo",4,"ngIf"],["name","templateId",1,"form-control",3,"change"],["value","",3,"selected"],[1,"btn","btn-primary","task-todo-action",3,"click"],["id","task-detail",3,"heading","active"],[1,"table-responsive","table-task-item"],[1,"table","table-bordered"],["class","select-task",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","button-submit",3,"click"],[4,"ngIf"],["type","button",1,"btn","btn-default",3,"click"],[1,"modal-title","pull-left"],[1,"text-danger"],[3,"value"],["class","todo-item",3,"mouseover","mouseout",4,"ngIf"],[1,"todo-item",3,"mouseover","mouseout"],["type","hidden",3,"ngModel","ngModelChange"],["type","checkbox",1,"check-finish",3,"checked","disabled","change"],[1,"task-todo-action-item",3,"ngClass"],[1,"task-todo-item",3,"click"],["aria-hidden","true",1,"fa","fa-edit"],["aria-hidden","true",1,"fa","fa-close"],[1,"task-todo-action","btn","btn-secondary",3,"click"],[1,"input-task-todo"],["type","text","name","todo-title","required","",1,"form-control","todo-title",3,"ngModel","ngModelChange"],[1,"task-todo-action-close",3,"click"],[1,"select-task"],["type","text",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","bsDatepicker","",3,"ngModel","bsConfig","ngModelChange",4,"ngIf"],["type","number",3,"ngModel","ngModelChange",4,"ngIf"],["type","text",3,"ngModel","ngModelChange"],["type","text","bsDatepicker","",3,"ngModel","bsConfig","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange","change"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.Kc(1,L,3,3,"h4",1),s.Kc(2,K,3,3,"h4",1),s.bc(3,"button",2),s.ic("click",function(){return e.onClose()}),s.bc(4,"span",3),s.Mc(5,"\xd7"),s.ac(),s.ac(),s.ac(),s.bc(6,"div",4),s.bc(7,"form",5),s.ic("ngSubmit",function(){return e.onSubmit(e.itemForm.value)}),s.Wb(8,"input",6),s.bc(9,"div",7),s.bc(10,"div",8),s.bc(11,"div",9),s.bc(12,"p"),s.bc(13,"strong"),s.Mc(14),s.lc(15,"translate"),s.ac(),s.ac(),s.bc(16,"div"),s.Wb(17,"input",10),s.Kc(18,V,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.bc(19,"div",12),s.bc(20,"div",9),s.bc(21,"p"),s.bc(22,"strong"),s.Mc(23),s.lc(24,"translate"),s.ac(),s.ac(),s.bc(25,"div"),s.Wb(26,"input",13),s.Kc(27,U,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(28,"div",7),s.bc(29,"div",8),s.bc(30,"div",9),s.bc(31,"p"),s.bc(32,"strong"),s.Mc(33),s.lc(34,"translate"),s.ac(),s.ac(),s.bc(35,"div"),s.bc(36,"select",14),s.bc(37,"option",15),s.Mc(38),s.lc(39,"translate"),s.ac(),s.Kc(40,W,2,2,"option",16),s.ac(),s.Kc(41,R,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.bc(42,"div",17),s.bc(43,"div",9),s.bc(44,"p"),s.bc(45,"strong"),s.Mc(46),s.lc(47,"translate"),s.ac(),s.ac(),s.bc(48,"div"),s.bc(49,"select",18),s.bc(50,"option",15),s.Mc(51),s.lc(52,"translate"),s.ac(),s.bc(53,"option",19),s.Mc(54),s.lc(55,"translate"),s.ac(),s.bc(56,"option",20),s.Mc(57),s.lc(58,"translate"),s.ac(),s.bc(59,"option",21),s.Mc(60),s.lc(61,"translate"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(62,"div",17),s.bc(63,"div",9),s.bc(64,"p"),s.bc(65,"strong"),s.Mc(66),s.lc(67,"translate"),s.ac(),s.ac(),s.bc(68,"div"),s.bc(69,"select",22),s.ic("ngModelChange",function(t){return e.categoryId=t}),s.bc(70,"option",15),s.Mc(71),s.lc(72,"translate"),s.ac(),s.bc(73,"option",19),s.Mc(74),s.lc(75,"translate"),s.ac(),s.bc(76,"option",20),s.Mc(77),s.lc(78,"translate"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(79,"div",17),s.bc(80,"div",9),s.bc(81,"p"),s.bc(82,"strong"),s.Mc(83),s.lc(84,"translate"),s.ac(),s.ac(),s.bc(85,"div"),s.bc(86,"select",23),s.bc(87,"option",15),s.Mc(88),s.lc(89,"translate"),s.ac(),s.bc(90,"option",19),s.Mc(91),s.lc(92,"translate"),s.ac(),s.bc(93,"option",20),s.Mc(94),s.lc(95,"translate"),s.ac(),s.bc(96,"option",21),s.Mc(97),s.lc(98,"translate"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(99,"div",8),s.bc(100,"p"),s.bc(101,"strong"),s.Mc(102),s.lc(103,"translate"),s.ac(),s.ac(),s.bc(104,"div"),s.bc(105,"select",24),s.bc(106,"option",15),s.Mc(107),s.lc(108,"translate"),s.ac(),s.Kc(109,j,2,2,"option",16),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(110,"div",7),s.Wb(111,"div",25),s.Wb(112,"div",25),s.Wb(113,"div",25),s.ac(),s.bc(114,"div",7),s.bc(115,"div",8),s.bc(116,"div",9),s.bc(117,"p"),s.bc(118,"strong"),s.Mc(119),s.lc(120,"translate"),s.ac(),s.ac(),s.bc(121,"div"),s.Wb(122,"input",26),s.bc(123,"timepicker",27),s.ic("ngModelChange",function(t){return e.onDueDateTimeChanged(t)}),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(124,"div",25),s.bc(125,"div",9),s.bc(126,"p"),s.bc(127,"strong"),s.Mc(128),s.lc(129,"translate"),s.ac(),s.ac(),s.bc(130,"div"),s.Wb(131,"input",28),s.bc(132,"timepicker",29),s.ic("ngModelChange",function(t){return e.onActualDateTimeChanged(t)}),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(133,"div",17),s.bc(134,"div",9),s.bc(135,"p"),s.bc(136,"strong"),s.Mc(137),s.lc(138,"translate"),s.ac(),s.ac(),s.bc(139,"div"),s.bc(140,"select",30),s.bc(141,"option",15),s.Mc(142),s.lc(143,"translate"),s.ac(),s.bc(144,"option",19),s.Mc(145),s.lc(146,"translate"),s.ac(),s.bc(147,"option",20),s.Mc(148),s.lc(149,"translate"),s.ac(),s.bc(150,"option",21),s.Mc(151),s.lc(152,"translate"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(153,"div",31),s.bc(154,"div",9),s.bc(155,"p"),s.bc(156,"strong"),s.Mc(157),s.lc(158,"translate"),s.ac(),s.ac(),s.bc(159,"div"),s.Wb(160,"input",32),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(161,"div"),s.bc(162,"tabset"),s.bc(163,"tab",33),s.lc(164,"translate"),s.bc(165,"div",9),s.bc(166,"div"),s.bc(167,"editor",34),s.ic("ngModelChange",function(t){return e.descriptionTask=t}),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(168,"tab",35),s.lc(169,"translate"),s.bc(170,"div",36),s.bc(171,"span"),s.Wb(172,"i",37),s.bc(173,"strong"),s.Mc(174),s.lc(175,"translate"),s.ac(),s.ac(),s.bc(176,"div",38),s.Wb(177,"progressbar",39),s.ac(),s.bc(178,"div",40),s.Kc(179,G,2,1,"div",41),s.ac(),s.bc(180,"div",7),s.bc(181,"div",42),s.bc(182,"div"),s.Kc(183,z,3,3,"button",43),s.ac(),s.Kc(184,Q,9,5,"div",44),s.ac(),s.bc(185,"div",25),s.bc(186,"div",9),s.bc(187,"div"),s.bc(188,"select",45),s.ic("change",function(t){return e.setSelectedToDoTemplate(t.target.value)}),s.bc(189,"option",46),s.Mc(190),s.lc(191,"translate"),s.ac(),s.Kc(192,Y,2,2,"option",16),s.ac(),s.Kc(193,X,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.bc(194,"div",8),s.bc(195,"div",9),s.bc(196,"button",47),s.ic("click",function(){return e.addToDoItemFromTemplate(e.selectedToDoTemplate)}),s.Mc(197),s.lc(198,"translate"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(199,"tab",48),s.lc(200,"translate"),s.bc(201,"div",49),s.bc(202,"table",50),s.bc(203,"thead"),s.bc(204,"tr"),s.bc(205,"th"),s.Mc(206),s.lc(207,"translate"),s.ac(),s.Kc(208,Z,2,1,"th",41),s.lc(209,"jsonToArray"),s.ac(),s.ac(),s.bc(210,"tbody"),s.Kc(211,lt,5,5,"tr",51),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(212,"div",52),s.bc(213,"button",53),s.ic("click",function(){return e.onSubmit(e.itemForm.value)}),s.Kc(214,dt,3,3,"span",54),s.Kc(215,bt,3,3,"span",54),s.ac(),s.bc(216,"button",55),s.ic("click",function(){return e.onClose()}),s.Mc(217),s.lc(218,"translate"),s.ac(),s.ac()),2&t&&(s.Jb(1),s.qc("ngIf",!e.id),s.Jb(1),s.qc("ngIf",e.id),s.Jb(5),s.qc("formGroup",e.itemForm),s.Jb(7),s.Nc(s.mc(15,65,"task_manager_task_date")),s.Jb(3),s.qc("bsConfig",s.tc(140,it)),s.Jb(1),s.qc("ngIf",e.errors.TaskDate),s.Jb(5),s.Nc(s.mc(24,67,"task_manager_task_title")),s.Jb(4),s.qc("ngIf",e.errors.Title),s.Jb(6),s.Nc(s.mc(34,69,"task_manager_task_project")),s.Jb(5),s.Oc("--",s.mc(39,71,"select_one"),"--"),s.Jb(2),s.qc("ngForOf",e.projectList),s.Jb(1),s.qc("ngIf",e.errors.ProjectId),s.Jb(5),s.Nc(s.mc(47,73,"task_manager_task_type")),s.Jb(5),s.Oc("--",s.mc(52,75,"select_one"),"--"),s.Jb(3),s.Nc(s.mc(55,77,"task_manager_task_type_mission")),s.Jb(3),s.Nc(s.mc(58,79,"task_manager_task_type_question")),s.Jb(3),s.Nc(s.mc(61,81,"task_manager_task_type_request")),s.Jb(6),s.Nc(s.mc(67,83,"task_manager_task_category")),s.Jb(3),s.qc("ngModel",e.categoryId),s.Jb(2),s.Oc("--",s.mc(72,85,"select_one"),"--"),s.Jb(3),s.Nc(s.mc(75,87,"task_manager_task_category_air")),s.Jb(3),s.Nc(s.mc(78,89,"task_manager_task_category_sea")),s.Jb(6),s.Nc(s.mc(84,91,"task_manager_task_priority")),s.Jb(5),s.Oc("--",s.mc(89,93,"select_one"),"--"),s.Jb(3),s.Nc(s.mc(92,95,"task_manager_task_priority_low")),s.Jb(3),s.Nc(s.mc(95,97,"task_manager_task_priority_medium")),s.Jb(3),s.Nc(s.mc(98,99,"task_manager_task_priority_high")),s.Jb(5),s.Nc(s.mc(103,101,"task_manager_task_assigned")),s.Jb(5),s.Oc("--",s.mc(108,103,"select_one"),"--"),s.Jb(2),s.qc("ngForOf",e.userList),s.Jb(10),s.Nc(s.mc(120,105,"task_manager_task_due_date")),s.Jb(3),s.qc("bsConfig",s.tc(141,mt)),s.Jb(6),s.Nc(s.mc(129,107,"task_manager_task_actual_date")),s.Jb(3),s.qc("bsConfig",s.tc(142,mt)),s.Jb(6),s.Nc(s.mc(138,109,"task_manager_task_status")),s.Jb(5),s.Oc("--",s.mc(143,111,"select_one"),"--"),s.Jb(3),s.Nc(s.mc(146,113,"task_manager_task_status_open")),s.Jb(3),s.Nc(s.mc(149,115,"task_manager_task_status_inprogress")),s.Jb(3),s.Nc(s.mc(152,117,"task_manager_task_status_complete")),s.Jb(6),s.Nc(s.mc(158,119,"task_manager_task_finished")),s.Jb(6),s.rc("heading",s.mc(164,121,"task_manager_task_description")),s.Jb(4),s.qc("init",e.initTiny)("ngModel",e.descriptionTask),s.Jb(1),s.rc("heading",s.mc(169,123,"task_manager_action_task_todo")),s.Jb(6),s.Oc(" ",s.mc(175,125,"task_manager_action_task_todo"),""),s.Jb(3),s.qc("value",e.progressing)("max",e.maxProgressbar)("striped",!0)("animate",!0),s.Jb(2),s.qc("ngForOf",e.listTaskToDo),s.Jb(4),s.qc("ngIf",!e.isToDoItem),s.Jb(1),s.qc("ngIf",e.isToDoItem),s.Jb(5),s.qc("selected",!0),s.Jb(1),s.Oc("--",s.mc(191,127,"select_one"),"--"),s.Jb(2),s.qc("ngForOf",e.taskToDoTemplateList),s.Jb(1),s.qc("ngIf",e.errors.TemplateId),s.Jb(4),s.Nc(s.mc(198,129,"task_manager_action_add_todo_items_from_template")),s.Jb(2),s.rc("heading",s.mc(200,131,"task_manager_task_detail")),s.qc("active",e.hasTaskItem),s.Jb(7),s.Nc(s.mc(207,133,"task_manager_task_number")),s.Jb(2),s.qc("ngForOf",s.nc(209,135,e.taskItemColumn,"CustomsCode")),s.Jb(3),s.qc("ngForOf",e.listTaskItem),s.Jb(3),s.qc("ngIf",!e.id),s.Jb(1),s.qc("ngIf",e.id),s.Jb(2),s.Nc(s.mc(218,138,"button_close")))},directives:[i.m,b.w,b.l,b.f,b.p,b.b,b.k,b.e,k.b,k.a,b.s,b.h,b.t,b.o,b.v,i.l,_.a,b.a,v.c,v.a,M.a,b.n,N,i.k],pipes:[r.c,F,i.e],styles:[".check-affects[_ngcontent-%COMP%]{padding-top:30px}.button-submit[_ngcontent-%COMP%]{margin-bottom:0}.task-todo-action-delete[_ngcontent-%COMP%]{float:right;font-size:12px}.task-todo-action[_ngcontent-%COMP%]{font-size:12px}.progress[_ngcontent-%COMP%]{height:10px}.todo-title[_ngcontent-%COMP%]{width:100%;margin-bottom:5px;margin-top:5px}.list-task-todo[_ngcontent-%COMP%]{line-height:2.5}.task-todo[_ngcontent-%COMP%]{margin-top:15px}.progressbar-panel[_ngcontent-%COMP%]{margin-top:10px}.table-task-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{white-space:nowrap}"]}),t})();var gt=a("bAuk"),ut=a("25+x"),pt=a("pLZG"),ft=a("3XJ7"),kt=a("R0Ic"),_t=a("WyaX");const vt=function(t){return{dropdown:t}},Mt=["*"];let Tt=(()=>{class t{constructor(){this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(s.Rb)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),yt=(()=>{class t{constructor(){this.direction="down",this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.isOpenChange=new s.q,this.isDisabledChange=new s.q,this.toggleClick=new s.q,this.dropdownMenu=new Promise(t=>{this.resolveDropdownMenu=t})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Rb({token:t,factory:t.\u0275fac}),t})();const Ct=[Object(kt.h)({height:0,overflow:"hidden"}),Object(kt.e)("220ms cubic-bezier(0, 0, 0.2, 1)",Object(kt.h)({height:"*",overflow:"hidden"}))];let It=(()=>{class t{constructor(t,e,a,i,c){this._state=t,this.cd=e,this._renderer=a,this._element=i,this.isOpen=!1,this._factoryDropDownAnimation=c.build(Ct),this._subscription=t.isOpenChange.subscribe(t=>{this.isOpen=t;const e=this._element.nativeElement.querySelector(".dropdown-menu");this._renderer.addClass(this._element.nativeElement.querySelector("div"),"open"),e&&!Object(T.d)()&&(this._renderer.addClass(e,"show"),e.classList.contains("dropdown-menu-right")&&(this._renderer.setStyle(e,"left","auto"),this._renderer.setStyle(e,"right","0")),"up"===this.direction&&(this._renderer.setStyle(e,"top","auto"),this._renderer.setStyle(e,"transform","translateY(-101%)"))),e&&this._state.isAnimated&&this._factoryDropDownAnimation.create(e).play(),this.cd.markForCheck(),this.cd.detectChanges()})}get direction(){return this._state.direction}_contains(t){return this._element.nativeElement.contains(t)}ngOnDestroy(){this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(yt),s.Vb(s.h),s.Vb(s.M),s.Vb(s.o),s.Vb(kt.b))},t.\u0275cmp=s.Pb({type:t,selectors:[["bs-dropdown-container"]],hostAttrs:[2,"display","block","position","absolute","z-index","1040"],ngContentSelectors:Mt,decls:2,vars:9,consts:[[3,"ngClass"]],template:function(t,e){1&t&&(s.pc(),s.bc(0,"div",0),s.oc(1),s.ac()),2&t&&(s.Nb("dropup","up"===e.direction)("show",e.isOpen)("open",e.isOpen),s.qc("ngClass",s.uc(7,vt,"down"===e.direction)))},directives:[i.k],encapsulation:2,changeDetection:0}),t})(),Dt=(()=>{class t{constructor(t,e,a,i,c,n,s){this._elementRef=t,this._renderer=e,this._viewContainerRef=a,this._cis=i,this._state=c,this._config=n,this.dropup=!1,this._isInlineOpen=!1,this._isDisabled=!1,this._subscriptions=[],this._isInited=!1,this._state.autoClose=this._config.autoClose,this._state.insideClick=this._config.insideClick,this._state.isAnimated=this._config.isAnimated,this._factoryDropDownAnimation=s.build(Ct),this._dropdown=this._cis.createLoader(this._elementRef,this._viewContainerRef,this._renderer).provide({provide:yt,useValue:this._state}),this.onShown=this._dropdown.onShown,this.onHidden=this._dropdown.onHidden,this.isOpenChange=this._state.isOpenChange}set autoClose(t){this._state.autoClose=t}get autoClose(){return this._state.autoClose}set isAnimated(t){this._state.isAnimated=t}get isAnimated(){return this._state.isAnimated}set insideClick(t){this._state.insideClick=t}get insideClick(){return this._state.insideClick}set isDisabled(t){this._isDisabled=t,this._state.isDisabledChange.emit(t),t&&this.hide()}get isDisabled(){return this._isDisabled}get isOpen(){return this._showInline?this._isInlineOpen:this._dropdown.isShown}set isOpen(t){t?this.show():this.hide()}get isBs4(){return!Object(T.d)()}get _showInline(){return!this.container}ngOnInit(){this._isInited||(this._isInited=!0,this._dropdown.listen({outsideClick:!1,triggers:this.triggers,show:()=>this.show()}),this._subscriptions.push(this._state.toggleClick.subscribe(t=>this.toggle(t))),this._subscriptions.push(this._state.isDisabledChange.pipe(Object(pt.a)(t=>t)).subscribe(()=>this.hide())))}show(){if(!this.isOpen&&!this.isDisabled)return this._showInline?(this._inlinedMenu||this._state.dropdownMenu.then(t=>{this._dropdown.attachInline(t.viewContainer,t.templateRef),this._inlinedMenu=this._dropdown._inlineViewRef,this.addBs4Polyfills(),this._inlinedMenu&&this._renderer.addClass(this._inlinedMenu.rootNodes[0].parentNode,"open"),this.playAnimation()}).catch(),this.addBs4Polyfills(),this._isInlineOpen=!0,this.onShown.emit(!0),this._state.isOpenChange.emit(!0),void this.playAnimation()):void this._state.dropdownMenu.then(t=>{const e=this.dropup||void 0!==this.dropup&&this.dropup;this._state.direction=e?"up":"down";const a=this.placement||(e?"top start":"bottom start");this._dropdown.attach(It).to(this.container).position({attachment:a}).show({content:t.templateRef,placement:a}),this._state.isOpenChange.emit(!0)}).catch()}hide(){this.isOpen&&(this._showInline?(this.removeShowClass(),this.removeDropupStyles(),this._isInlineOpen=!1,this.onHidden.emit(!0)):this._dropdown.hide(),this._state.isOpenChange.emit(!1))}toggle(t){return this.isOpen||!t?this.hide():this.show()}_contains(t){return this._elementRef.nativeElement.contains(t.target)||this._dropdown.instance&&this._dropdown.instance._contains(t.target)}ngOnDestroy(){for(const t of this._subscriptions)t.unsubscribe();this._dropdown.dispose()}addBs4Polyfills(){Object(T.d)()||(this.addShowClass(),this.checkRightAlignment(),this.addDropupStyles())}playAnimation(){this._state.isAnimated&&this._inlinedMenu&&setTimeout(()=>{this._inlinedMenu&&this._factoryDropDownAnimation.create(this._inlinedMenu.rootNodes[0]).play()})}addShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.addClass(this._inlinedMenu.rootNodes[0],"show")}removeShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.removeClass(this._inlinedMenu.rootNodes[0],"show")}checkRightAlignment(){if(this._inlinedMenu&&this._inlinedMenu.rootNodes[0]){const t=this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-right");this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"left",t?"auto":"0"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"right",t?"0":"auto")}}addDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"top",this.dropup?"auto":"100%"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"transform",this.dropup?"translateY(-101%)":"translateY(0)"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"bottom","auto"))}removeDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"top"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"transform"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"bottom"))}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(s.o),s.Vb(s.M),s.Vb(s.Y),s.Vb(ft.a),s.Vb(yt),s.Vb(Tt),s.Vb(kt.b))},t.\u0275dir=s.Qb({type:t,selectors:[["","bsDropdown",""],["","dropdown",""]],hostVars:6,hostBindings:function(t,e){2&t&&s.Nb("dropup",e.dropup)("open",e.isOpen)("show",e.isOpen&&e.isBs4)},inputs:{dropup:"dropup",autoClose:"autoClose",isAnimated:"isAnimated",insideClick:"insideClick",isDisabled:"isDisabled",isOpen:"isOpen",placement:"placement",triggers:"triggers",container:"container"},outputs:{onShown:"onShown",onHidden:"onHidden",isOpenChange:"isOpenChange"},exportAs:["bs-dropdown"],features:[s.Ib([yt])]}),t})(),At=(()=>{class t{constructor(t,e,a){t.resolveDropdownMenu({templateRef:a,viewContainer:e})}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(yt),s.Vb(s.Y),s.Vb(s.T))},t.\u0275dir=s.Qb({type:t,selectors:[["","bsDropdownMenu",""],["","dropdownMenu",""]],exportAs:["bs-dropdown-menu"]}),t})(),Jt=(()=>{class t{constructor(t,e,a,i,c){this._changeDetectorRef=t,this._dropdown=e,this._element=a,this._renderer=i,this._state=c,this.isOpen=!1,this._subscriptions=[],this._subscriptions.push(this._state.isOpenChange.subscribe(t=>{this.isOpen=t,t?(this._documentClickListener=this._renderer.listen("document","click",t=>{!this._state.autoClose||2===t.button||this._element.nativeElement.contains(t.target)||this._state.insideClick&&this._dropdown._contains(t)||(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())}),this._escKeyUpListener=this._renderer.listen(this._element.nativeElement,"keyup.esc",()=>{this._state.autoClose&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())})):(this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener())})),this._subscriptions.push(this._state.isDisabledChange.subscribe(t=>this.isDisabled=t||void 0))}onClick(t){t.stopPropagation(),this.isDisabled||this._state.toggleClick.emit(!0)}ngOnDestroy(){this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener();for(const t of this._subscriptions)t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(s.h),s.Vb(Dt),s.Vb(s.o),s.Vb(s.M),s.Vb(yt))},t.\u0275dir=s.Qb({type:t,selectors:[["","bsDropdownToggle",""],["","dropdownToggle",""]],hostVars:3,hostBindings:function(t,e){1&t&&s.ic("click",function(t){return e.onClick(t)}),2&t&&s.Kb("aria-haspopup",!0)("aria-expanded",e.isOpen)("disabled",e.isDisabled)},exportAs:["bs-dropdown-toggle"]}),t})(),St=(()=>{class t{static forRoot(){return{ngModule:t,providers:[ft.a,_t.a,yt]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Tb({type:t}),t.\u0275inj=s.Sb({imports:[[i.c]]}),t})();function Nt(t,e){if(1&t){const t=s.cc();s.bc(0,"li"),s.bc(1,"a",55),s.ic("click",function(){s.Ec(t);const a=e.$implicit,i=s.kc(3).$implicit;return s.kc().onChangeTodoDetailValue(i,a)}),s.Mc(2),s.ac(),s.ac()}if(2&t){const t=e.$implicit;s.Jb(2),s.Nc(t)}}function wt(t,e){if(1&t&&(s.bc(0,"ul",54),s.Kc(1,Nt,3,1,"li",18),s.ac()),2&t){const t=s.kc(2).$implicit;s.Jb(1),s.qc("ngForOf",t.DetailList)}}const Ot=function(t){return{hidden:t}};function Pt(t,e){if(1&t){const t=s.cc();s.bc(0,"div",43),s.ic("mouseover",function(){s.Ec(t);const e=s.kc().$implicit;return s.kc().isActionTodo=e.Id})("mouseout",function(){return s.Ec(t),s.kc(2).isActionTodo=void 0}),s.bc(1,"input",44),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc(2).todoCode=e}),s.ac(),s.bc(2,"input",45),s.ic("change",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().FinishTaskToDo(e,a)}),s.ac(),s.bc(3,"span"),s.Mc(4),s.ac(),s.bc(5,"span",46),s.bc(6,"span",47),s.bc(7,"a",48),s.ic("click",function(){return!1}),s.Wb(8,"i",49),s.Mc(9),s.ac(),s.Kc(10,wt,2,1,"ul",50),s.ac(),s.ac(),s.bc(11,"span",51),s.Mc(12," \xa0"),s.Wb(13,"i",52),s.Mc(14),s.lc(15,"titlecase"),s.Wb(16,"i",53),s.Mc(17),s.lc(18,"date"),s.ac(),s.ac()}if(2&t){const t=s.kc().$implicit,e=s.kc();s.Jb(1),s.qc("ngModel",e.todoCode),s.Jb(1),s.qc("checked",t.Finished)("disabled",e.isItemDisabled(t)),s.Jb(2),s.Oc(" ",t.Description,""),s.Jb(1),s.qc("ngClass",s.uc(15,Ot,!e.hasDetail(t))),s.Jb(1),s.qc("isDisabled",t.Finished&&(null==t?null:t.ChangedByName)!=e.userInfo.userName),s.Jb(3),s.Oc(" ",t.DetailValue,""),s.Jb(2),s.qc("hidden",!t.Finished),s.Jb(3),s.Oc(" ",s.mc(15,10,null==t?null:t.ChangedByName)," \xa0"),s.Jb(3),s.Oc(" ",s.nc(18,12,null==t?null:t.ChangedOn,"dd/MM/yyyy HH:mm a")," ")}}function xt(t,e){if(1&t&&(s.bc(0,"div"),s.Kc(1,Pt,19,17,"div",42),s.ac()),2&t){const t=e.$implicit,a=s.kc();s.Jb(1),s.qc("ngIf",a.editTodoId!=t.Id)}}function Et(t,e){if(1&t&&(s.bc(0,"th"),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.Oc(" ",t.obj.Caption," ")}}function Ft(t,e){if(1&t&&(s.bc(0,"span"),s.Mc(1),s.ac()),2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.Jb(1),s.Nc(e[t.key])}}function qt(t,e){if(1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"date"),s.ac()),2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.Jb(1),s.Nc(s.nc(2,1,e[t.key],"dd/MM/yyyy"))}}function Lt(t,e){if(1&t&&(s.bc(0,"td"),s.Kc(1,Ft,2,1,"span",57),s.Kc(2,qt,3,4,"span",57),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.qc("ngIf","date"!=t.obj.Type),s.Jb(1),s.qc("ngIf","date"==t.obj.Type)}}function Kt(t,e){if(1&t&&(s.bc(0,"tr",56),s.bc(1,"td"),s.Mc(2),s.ac(),s.Kc(3,Lt,3,2,"td",18),s.lc(4,"jsonToArray"),s.ac()),2&t){const t=e.index,a=s.kc();s.Jb(2),s.Nc(t+1),s.Jb(1),s.qc("ngForOf",s.nc(4,2,a.taskItemColumn,"CustomerId"))}}function Vt(t,e){1&t&&(s.bc(0,"div",58),s.bc(1,"div",59),s.bc(2,"strong"),s.Mc(3),s.lc(4,"translate"),s.ac(),s.Mc(5),s.lc(6,"translate"),s.ac(),s.ac()),2&t&&(s.Jb(3),s.Oc("",s.mc(4,2,"dialog_alert_title"),"!"),s.Jb(2),s.Oc(" ",s.mc(6,4,"task_manager_task_notice_list_empty")," "))}function Ut(t,e){if(1&t&&(s.bc(0,"th"),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.Oc(" ",t.obj.Caption," ")}}function Wt(t,e){if(1&t&&(s.bc(0,"span"),s.Mc(1),s.ac()),2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.Jb(1),s.Nc(e[t.key])}}function Rt(t,e){if(1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"subctiptionTypePipe"),s.ac()),2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.Jb(1),s.Nc(s.mc(2,1,e[t.key]))}}function jt(t,e){if(1&t&&(s.bc(0,"td"),s.Kc(1,Wt,2,1,"span",57),s.Kc(2,Rt,3,3,"span",57),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.qc("ngIf","SubctiptionType"!=t.obj.Name),s.Jb(1),s.qc("ngIf","SubctiptionType"==t.obj.Name)}}function Bt(t,e){if(1&t){const t=s.cc();s.bc(0,"a",62),s.ic("click",function(){s.Ec(t);const e=s.kc().$implicit;return s.kc().deleteTaskSubscriptionItem(e)}),s.Wb(1,"i",63),s.ac()}}function $t(t,e){if(1&t&&(s.bc(0,"tr",56),s.bc(1,"td"),s.Mc(2),s.ac(),s.Kc(3,jt,3,2,"td",18),s.lc(4,"jsonToArray"),s.bc(5,"td",60),s.Kc(6,Bt,2,0,"a",61),s.Mc(7,"\xa0 "),s.ac(),s.ac()),2&t){const t=e.$implicit,a=e.index,i=s.kc();s.Jb(2),s.Nc(a+1),s.Jb(1),s.qc("ngForOf",s.mc(4,3,i.taskSubscriptionsColumn)),s.Jb(3),s.qc("ngIf",0!=t.Id&&i.authService.hasPermission("/main/task","Edit"))}}function Gt(t,e){if(1&t&&s.Wb(0,"img",75),2&t){const t=s.kc().$implicit;s.qc("src",t.url,s.Gc)}}function zt(t,e){1&t&&s.Wb(0,"img",76)}function Ht(t,e){if(1&t){const t=s.cc();s.bc(0,"div",68),s.bc(1,"div",69),s.bc(2,"button",70),s.ic("click",function(){s.Ec(t);const a=e.$implicit;return s.kc(2).onRemoveFileAttach(a.name,"task")}),s.lc(3,"translate"),s.Mc(4,"x"),s.ac(),s.bc(5,"a",71),s.Kc(6,Gt,1,1,"img",72),s.Wb(7,"br"),s.Kc(8,zt,1,0,"img",73),s.ac(),s.ac(),s.bc(9,"div",74),s.Wb(10,"i"),s.Mc(11,"\xa0"),s.bc(12,"a",71),s.bc(13,"span"),s.Mc(14),s.ac(),s.Wb(15,"br"),s.ac(),s.bc(16,"button",70),s.ic("click",function(){s.Ec(t);const a=e.$implicit;return s.kc(2).onRemoveFileAttach(a.name,"task")}),s.lc(17,"translate"),s.Mc(18,"x"),s.ac(),s.bc(19,"div"),s.bc(20,"strong"),s.Mc(21),s.ac(),s.Mc(22),s.lc(23,"translate"),s.ac(),s.bc(24,"small"),s.Mc(25),s.lc(26,"datetimePipeEvent"),s.ac(),s.Wb(27,"br"),s.ac(),s.ac()}if(2&t){const t=e.$implicit;s.Jb(2),s.rc("title",s.mc(3,13,"button_delete")),s.Jb(3),s.rc("href",t.url,s.Gc),s.Jb(1),s.qc("ngIf","png"==t.ext||"jpg"==t.ext||"jpeg"==t.ext||"bmp"==t.ext),s.Jb(2),s.qc("ngIf",!("png"==t.ext||"jpg"==t.ext||"jpeg"==t.ext||"bmp"==t.ext)),s.Jb(2),s.Lb(t.fileIcon),s.Jb(2),s.rc("href",t.url,s.Gc),s.Jb(2),s.Nc(t.name),s.Jb(2),s.rc("title",s.mc(17,15,"button_delete")),s.Jb(5),s.Oc("",t.createdName," "),s.Jb(1),s.Nc(s.mc(23,17,"task_manager_task_action_upload_title")),s.Jb(3),s.Nc(s.mc(26,19,t.createdOn))}}function Qt(t,e){if(1&t&&(s.bc(0,"div",64),s.bc(1,"div",65),s.Wb(2,"i",66),s.bc(3,"strong"),s.Mc(4),s.lc(5,"translate"),s.ac(),s.ac(),s.Wb(6,"br"),s.Kc(7,Ht,28,21,"div",67),s.ac()),2&t){const t=s.kc();s.Jb(4),s.Oc(" ",s.mc(5,2,"task_manager_task_attach_list"),""),s.Jb(3),s.qc("ngForOf",t.attachUrls)}}function Yt(t,e){1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"task_manager_task_todo_event_type_1")))}function Xt(t,e){1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"translate"),s.Wb(3,"strong"),s.ac()),2&t&&(s.Jb(1),s.Oc("",s.mc(2,1,"task_manager_task_todo_event_type_2")," "))}function Zt(t,e){1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"task_manager_task_todo_event_type_4")))}function te(t,e){1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"task_manager_task_todo_event_type_8")))}function ee(t,e){1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"task_manager_task_todo_event_type_1024")))}function ae(t,e){if(1&t&&(s.bc(0,"strong"),s.Mc(1),s.ac()),2&t){const t=s.kc().$implicit;s.Jb(1),s.Oc(" ",t.AssignedName,"")}}function ie(t,e){if(1&t&&(s.bc(0,"div",69),s.bc(1,"a",71),s.Wb(2,"img",75),s.Wb(3,"br"),s.ac(),s.ac()),2&t){const t=s.kc().$implicit;s.Jb(1),s.rc("href",t.url,s.Gc),s.Jb(1),s.qc("src",t.url,s.Gc)}}function ce(t,e){if(1&t&&(s.bc(0,"div",68),s.Kc(1,ie,4,2,"div",86),s.bc(2,"div",74),s.Wb(3,"i"),s.Mc(4,"\xa0"),s.bc(5,"a",71),s.bc(6,"span"),s.Mc(7),s.ac(),s.Wb(8,"br"),s.ac(),s.bc(9,"div"),s.bc(10,"strong"),s.Mc(11),s.ac(),s.Mc(12),s.lc(13,"translate"),s.bc(14,"small"),s.Mc(15),s.lc(16,"datetimePipeEvent"),s.ac(),s.ac(),s.Wb(17,"br"),s.ac(),s.ac()),2&t){const t=e.$implicit,a=s.kc(4);s.Jb(1),s.qc("ngIf","png"==a.getFileExtension(t.name)||"jpg"==a.getFileExtension(t.name)||"jpeg"==a.getFileExtension(t.name)||"bmp"==a.getFileExtension(t.name)),s.Jb(2),s.Lb(a.getFileExtensionIcon(t.name)),s.Jb(2),s.rc("href",t.url,s.Gc),s.Jb(2),s.Nc(t.name),s.Jb(4),s.Oc("",t.createdName," "),s.Jb(1),s.Oc("",s.mc(13,9,"task_manager_task_action_upload_title")," "),s.Jb(3),s.Nc(s.mc(16,11,t.createdOn))}}function ne(t,e){if(1&t&&(s.bc(0,"div",85),s.Kc(1,ce,18,13,"div",67),s.Wb(2,"hr"),s.ac()),2&t){const t=s.kc().$implicit;s.Jb(1),s.qc("ngForOf",t.JsonData.files)}}function se(t,e){if(1&t&&(s.bc(0,"div",82),s.bc(1,"div",78),s.bc(2,"div"),s.bc(3,"strong"),s.Mc(4),s.ac(),s.Kc(5,Yt,3,3,"span",57),s.Kc(6,Xt,4,3,"span",57),s.Kc(7,Zt,3,3,"span",57),s.Kc(8,te,3,3,"span",57),s.Kc(9,ee,3,3,"span",57),s.Kc(10,ae,2,1,"strong",57),s.ac(),s.bc(11,"small"),s.Mc(12),s.lc(13,"datetimePipeEvent"),s.ac(),s.ac(),s.Kc(14,ne,3,1,"div",83),s.Wb(15,"div",84),s.ac()),2&t){const t=e.$implicit;s.Jb(4),s.Oc("",t.CreatedByName," "),s.Jb(1),s.qc("ngIf",1==t.EventTypeId),s.Jb(1),s.qc("ngIf",2==t.EventTypeId),s.Jb(1),s.qc("ngIf",4==t.EventTypeId),s.Jb(1),s.qc("ngIf",8==t.EventTypeId),s.Jb(1),s.qc("ngIf",t.EventTypeId>=1024),s.Jb(1),s.qc("ngIf",!t.EventTypeId||t.EventTypeId<=0||2==t.EventTypeId||t.EventTypeId>8),s.Jb(2),s.Nc(s.mc(13,10,t.CreatedOn)),s.Jb(2),s.qc("ngIf",t.JsonData&&t.JsonData.files.length>0),s.Jb(1),s.qc("innerHtml",t.Description,s.Fc)}}function oe(t,e){if(1&t&&(s.bc(0,"div",77),s.bc(1,"div",78),s.Wb(2,"i",79),s.bc(3,"strong"),s.Mc(4),s.lc(5,"translate"),s.ac(),s.ac(),s.bc(6,"div",80),s.Kc(7,se,16,12,"div",81),s.ac(),s.ac()),2&t){const t=s.kc();s.Jb(4),s.Oc(" ",s.mc(5,2,"task_manager_task_activity_log"),""),s.Jb(3),s.qc("ngForOf",t.eventByTask)}}function re(t,e){if(1&t){const t=s.cc();s.bc(0,"button",33),s.ic("click",function(){return s.Ec(t),s.kc().onEditTask()}),s.Wb(1,"i",87),s.Mc(2),s.lc(3,"translate"),s.ac()}2&t&&(s.Jb(2),s.Oc(" ",s.mc(3,1,"button_edit"),""))}function le(t,e){if(1&t){const t=s.cc();s.bc(0,"button",33),s.ic("click",function(){s.Ec(t);const e=s.kc(),a=s.Ac(159);return e.onAssignTo(a)}),s.Wb(1,"i",52),s.Mc(2),s.lc(3,"translate"),s.ac()}2&t&&(s.Jb(2),s.Oc(" ",s.mc(3,1,"task_manager_task_button_assign_to"),""))}function de(t,e){if(1&t&&(s.bc(0,"option",102),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.qc("value",t.Id),s.Jb(1),s.Nc(t.UserName)}}function be(t,e){1&t&&(s.bc(0,"small",103),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function me(t,e){if(1&t){const t=s.cc();s.bc(0,"div",96),s.bc(1,"label",97),s.Mc(2),s.lc(3,"translate"),s.ac(),s.bc(4,"div",98),s.bc(5,"select",99),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc(2).assignedTo=e}),s.bc(6,"option",100),s.Mc(7),s.lc(8,"translate"),s.ac(),s.Kc(9,de,2,2,"option",101),s.ac(),s.Kc(10,be,3,3,"small",91),s.ac(),s.ac()}if(2&t){const t=s.kc(2);s.Jb(2),s.Nc(s.mc(3,5,"task_manager_task_assigned")),s.Jb(3),s.qc("ngModel",t.assignedTo),s.Jb(2),s.Oc("--",s.mc(8,7,"select_one"),"--"),s.Jb(2),s.qc("ngForOf",t.userList),s.Jb(1),s.qc("ngIf",t.requiredAssign)}}function he(t,e){if(1&t){const t=s.cc();s.bc(0,"div",96),s.bc(1,"label",97),s.Mc(2),s.lc(3,"translate"),s.ac(),s.bc(4,"div",98),s.bc(5,"select",104),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc(2).priority=e}),s.bc(6,"option",100),s.Mc(7),s.lc(8,"translate"),s.ac(),s.bc(9,"option",105),s.Mc(10),s.lc(11,"translate"),s.ac(),s.bc(12,"option",106),s.Mc(13),s.lc(14,"translate"),s.ac(),s.bc(15,"option",107),s.Mc(16),s.lc(17,"translate"),s.ac(),s.ac(),s.ac(),s.ac()}if(2&t){const t=s.kc(2);s.Jb(2),s.Nc(s.mc(3,6,"task_manager_task_priority")),s.Jb(3),s.qc("ngModel",t.priority),s.Jb(2),s.Oc("--",s.mc(8,8,"select_one"),"--"),s.Jb(3),s.Nc(s.mc(11,10,"task_manager_task_priority_low")),s.Jb(3),s.Nc(s.mc(14,12,"task_manager_task_priority_medium")),s.Jb(3),s.Nc(s.mc(17,14,"task_manager_task_priority_high"))}}function ge(t,e){if(1&t){const t=s.cc();s.bc(0,"div",96),s.bc(1,"label",97),s.Mc(2),s.lc(3,"translate"),s.ac(),s.bc(4,"div",98),s.bc(5,"select",108),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc(2).taskItem.Status=e}),s.bc(6,"option",100),s.Mc(7),s.lc(8,"translate"),s.ac(),s.bc(9,"option",105),s.Mc(10),s.lc(11,"translate"),s.ac(),s.bc(12,"option",106),s.Mc(13),s.lc(14,"translate"),s.ac(),s.bc(15,"option",107),s.Mc(16),s.lc(17,"translate"),s.ac(),s.ac(),s.ac(),s.ac()}if(2&t){const t=s.kc(2);s.Jb(2),s.Nc(s.mc(3,6,"task_manager_task_status")),s.Jb(3),s.qc("ngModel",t.taskItem.Status),s.Jb(2),s.Oc("--",s.mc(8,8,"select_one"),"--"),s.Jb(3),s.Nc(s.mc(11,10,"task_manager_task_status_open")),s.Jb(3),s.Nc(s.mc(14,12,"task_manager_task_status_inprogress")),s.Jb(3),s.Nc(s.mc(17,14,"task_manager_task_status_complete"))}}function ue(t,e){1&t&&(s.bc(0,"small",103),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function pe(t,e){1&t&&s.Wb(0,"img",109),2&t&&s.qc("src",e.$implicit,s.Gc)}function fe(t,e){if(1&t){const t=s.cc();s.bc(0,"div",0),s.bc(1,"h4",1),s.Mc(2),s.lc(3,"translate"),s.ac(),s.bc(4,"button",2),s.ic("click",function(){return s.Ec(t),s.kc().modalRef.hide()}),s.bc(5,"span",3),s.Mc(6,"\xd7"),s.ac(),s.ac(),s.ac(),s.bc(7,"div",4),s.Kc(8,me,11,9,"div",88),s.Kc(9,he,18,16,"div",88),s.Kc(10,ge,18,16,"div",88),s.bc(11,"div",89),s.bc(12,"p"),s.bc(13,"strong"),s.Mc(14),s.lc(15,"translate"),s.ac(),s.ac(),s.bc(16,"editor",90),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc().description=e}),s.ac(),s.Kc(17,ue,3,3,"small",91),s.ac(),s.bc(18,"div",89),s.bc(19,"p"),s.bc(20,"strong"),s.Mc(21),s.lc(22,"translate"),s.ac(),s.ac(),s.bc(23,"input",92),s.ic("change",function(e){return s.Ec(t),s.kc().onAttachTaskEvent(e)}),s.ac(),s.ac(),s.bc(24,"div",93),s.Kc(25,pe,1,1,"img",94),s.Wb(26,"br"),s.ac(),s.ac(),s.bc(27,"div",39),s.bc(28,"button",95),s.ic("click",function(){return s.Ec(t),s.kc().SubmitEvent()}),s.bc(29,"span"),s.Mc(30),s.lc(31,"translate"),s.lc(32,"translate"),s.ac(),s.ac(),s.bc(33,"button",38),s.ic("click",function(){return s.Ec(t),s.kc().modalRef.hide()}),s.Mc(34),s.lc(35,"translate"),s.ac(),s.ac()}if(2&t){const t=s.kc();s.Jb(2),s.Nc(s.mc(3,13,t.titleActionForm)),s.Jb(6),s.qc("ngIf",t.eventType===t.eventTypes.reAssign),s.Jb(1),s.qc("ngIf",t.eventType===t.eventTypes.reAssign),s.Jb(1),s.qc("ngIf",t.eventType===t.eventTypes.changeStatus||t.eventType===t.eventTypes.complete||t.eventType===t.eventTypes.finish),s.Jb(4),s.Nc(s.mc(15,15,"task_manager_task_detail_comment")),s.Jb(2),s.qc("init",t.initTiny)("ngModel",t.description),s.Jb(1),s.qc("ngIf",t.requiredComment),s.Jb(4),s.Nc(s.mc(22,17,"button_attach")),s.Jb(4),s.qc("ngForOf",t.attachEventTemplateUrls),s.Jb(5),s.Pc("",s.mc(31,19,"button_submit")," ",s.mc(32,21,t.titleActionForm),""),s.Jb(4),s.Nc(s.mc(35,23,"button_close"))}}function ke(t,e){if(1&t&&(s.bc(0,"option",102),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.qc("value",t.Id),s.Jb(1),s.Nc(t.UserName)}}function _e(t,e){1&t&&(s.bc(0,"small",103),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function ve(t,e){if(1&t&&(s.bc(0,"option",102),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.qc("value",t.Id),s.Jb(1),s.Nc(t.Name)}}function Me(t,e){1&t&&(s.bc(0,"small",103),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function Te(t,e){if(1&t){const t=s.cc();s.bc(0,"div",0),s.bc(1,"h4",1),s.Mc(2),s.lc(3,"translate"),s.ac(),s.bc(4,"button",2),s.ic("click",function(){return s.Ec(t),s.kc().modalRef.hide()}),s.bc(5,"span",3),s.Mc(6,"\xd7"),s.ac(),s.ac(),s.ac(),s.bc(7,"div",4),s.bc(8,"div",96),s.bc(9,"label",97),s.Mc(10),s.lc(11,"translate"),s.ac(),s.bc(12,"div",98),s.bc(13,"select",99),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc().assignedTo=e}),s.bc(14,"option",100),s.Mc(15),s.lc(16,"translate"),s.ac(),s.Kc(17,ke,2,2,"option",101),s.ac(),s.Kc(18,_e,3,3,"small",91),s.ac(),s.ac(),s.bc(19,"div",96),s.bc(20,"label",97),s.Mc(21),s.lc(22,"translate"),s.ac(),s.bc(23,"div",98),s.bc(24,"select",104),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc().priority=e}),s.bc(25,"option",100),s.Mc(26),s.lc(27,"translate"),s.ac(),s.bc(28,"option",110),s.Mc(29),s.lc(30,"translate"),s.ac(),s.bc(31,"option",105),s.Mc(32),s.lc(33,"translate"),s.ac(),s.bc(34,"option",106),s.Mc(35),s.lc(36,"translate"),s.ac(),s.bc(37,"option",107),s.Mc(38),s.lc(39,"translate"),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(40,"div",96),s.bc(41,"label",97),s.Mc(42),s.lc(43,"translate"),s.ac(),s.bc(44,"div",98),s.bc(45,"select",111),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc().vehicleId=e}),s.bc(46,"option",110),s.Mc(47),s.lc(48,"translate"),s.ac(),s.Kc(49,ve,2,2,"option",101),s.ac(),s.Kc(50,Me,3,3,"small",91),s.ac(),s.ac(),s.ac(),s.bc(51,"div",39),s.bc(52,"button",95),s.ic("click",function(){return s.Ec(t),s.kc().SaveTaskSubscription()}),s.bc(53,"span"),s.Mc(54),s.lc(55,"translate"),s.ac(),s.ac(),s.bc(56,"button",38),s.ic("click",function(){return s.Ec(t),s.kc().modalRef.hide()}),s.Mc(57),s.lc(58,"translate"),s.ac(),s.ac()}if(2&t){const t=s.kc();s.Jb(2),s.Nc(s.mc(3,20,t.titleActionForm)),s.Jb(8),s.Nc(s.mc(11,22,"task_manager_task_assigned")),s.Jb(3),s.qc("ngModel",t.assignedTo),s.Jb(2),s.Oc("--",s.mc(16,24,"select_one"),"--"),s.Jb(2),s.qc("ngForOf",t.userList),s.Jb(1),s.qc("ngIf",t.requiredAssign),s.Jb(3),s.Nc(s.mc(22,26,"task_manager_TaskSubscription__SubctiptionType")),s.Jb(3),s.qc("ngModel",t.priority),s.Jb(2),s.Oc("--",s.mc(27,28,"select_one"),"--"),s.Jb(3),s.Nc(s.mc(30,30,"task_manager_TaskSubscription__SubctiptionType_None")),s.Jb(3),s.Nc(s.mc(33,32,"task_manager_TaskSubscription__SubctiptionType_OnScreen")),s.Jb(3),s.Nc(s.mc(36,34,"task_manager_TaskSubscription__SubctiptionType_Email")),s.Jb(3),s.Nc(s.mc(39,36,"task_manager_TaskSubscription__SubctiptionType_SMS")),s.Jb(4),s.Nc(s.mc(43,38,"task_manager_TaskSubscription__Vehicle")),s.Jb(3),s.qc("ngModel",t.vehicleId),s.Jb(2),s.Oc("--",s.mc(48,40,"select_one"),"--"),s.Jb(2),s.qc("ngForOf",t.vehicleList),s.Jb(1),s.qc("ngIf",t.requiredComment),s.Jb(4),s.Nc(s.mc(55,42,t.titleActionForm)),s.Jb(3),s.Nc(s.mc(58,44,"button_close"))}}let ye=(()=>{class t{constructor(t,e,a,i,c,n,o){this.authService=t,this.bsModalRef=e,this.modalService=a,this.translate=i,this.dataService=c,this.uploadService=n,this.notificationService=o,this.initTiny={base_url:"/tinymce",height:250,language:"vi_VN",language_url:"./assets/tinymce/langs/vi_VN.js",plugins:"autosave autolink code codesample colorpicker emoticons fullscreen hr preview table textcolor wordcount",toolbar:"undo redo forecolor cut copy paste fontselect styleselect link preview"},this.taskItem={},this.eventTypes={comment:1,reAssign:2,changeStatus:4,complete:8,finish:1024},this.eventStatus={open:1,progress:2,complete:4},this.eventByTask=[],this.hasTodo=!1,this.isToDoItem=!1,this.listTaskToDo=[],this.listTaskItem=[],this.maxProgressbar=0,this.progressing=0,this.iconList=[{type:"docx",icon:"fa fa-file-word-o"},{type:"doc",icon:"fa fa-file-word-o"},{type:"pptx",icon:"fa fa-file-powerpoint-o"},{type:"ppt",icon:"fa fa-file-powerpoint-o"},{type:"xlsx",icon:"fa fa-file-excel-o"},{type:"xls",icon:"fa fa-file-excel-o"},{type:"pdf",icon:"fa fa-file-pdf-o"},{type:"bmp",icon:"fa fa-file-image-o"},{type:"jpg",icon:"fa fa-file-image-o"},{type:"jpeg",icon:"fa fa-file-image-o"},{type:"png",icon:"fa fa-file-image-o"},{type:"zip",icon:"fa fa-file-archive-o"},{type:"rar",icon:"fa fa-file-archive-o"},{type:"txt",icon:"fa fa-file-text-o"}],this.event=new s.q,this.requiredItemTodo=!1,this.requiredComment=!1,this.requiredAssign=!1,this.taskItemColumn=m.TaskForm.ColumnInfoTaskItem,this.taskItemAirColumn=m.TaskForm.ColumnInfoTaskItemAir,this.taskItemSeaColumn=m.TaskForm.ColumnInfoTaskItemSea,this.attachUrls=[],this.attachEventUrls=[],this.attachEventTemplateUrls=[],this.taskEventFileUpload=[],this.taskSubscriptionsColumn=gt.TaskSubscriptionForm.ColumnInfo,this.listTaskSubscription=[]}ngOnInit(){this.userInfo=this.authService.getLoggedInUser(),this.getUserIdLogin(this.userInfo.userName),this.getListUser(),this.loadVehicle(),this.getTodotemplateDetails(),this.getTask(this.taskId)}getRootFile(){return Object(n.a)(this,void 0,void 0,function*(){yield this.dataService.getRootFile("/files/getRoot?app=TaskManager",null).toPromise().then(t=>{this.rootFile=t})})}getUserIdLogin(t){return Object(n.a)(this,void 0,void 0,function*(){if(t){const e=[];e.push("@UserName",t);const a={CommandText:"uspUser___FindUserName",CommandType:1025,Parameters:e};yield this.dataService.post("/commands",a).toPromise().then(t=>{t.Data&&(this.userLoginId=t.Data[0].Id)})}})}getListUser(){return Object(n.a)(this,void 0,void 0,function*(){const t=[];t.push("@ActivatedOnly",1);const e={CommandText:"uspUser___Fill",CommandType:1025,Parameters:t};yield this.dataService.post("/commands",e).toPromise().then(t=>{t.Data&&(this.userList=t.Data)})})}getListVehicle(){return Object(n.a)(this,void 0,void 0,function*(){const t=[];t.push("@ActivatedOnly",1);const e={CommandText:"uspUser___Fill",CommandType:1025,Parameters:t};yield this.dataService.post("/commands",e).toPromise().then(t=>{t.Data&&(this.userList=t.Data)})})}getTask(t){return Object(n.a)(this,void 0,void 0,function*(){if(t){yield this.getRootFile();const e=[];e.push("@TaskId",this.taskId);const a={CommandText:"uspTask___GetById",CommandType:1025,Parameters:e};yield this.dataService.post("/commands",a).toPromise().then(e=>{e.Data&&(this.taskItem=e.Data[0],this.jsonData=this.taskItem.JsonData,this.onShowAttachFile(JSON.parse(this.jsonData)),this.getEventByTask(t),this.getTodoByTask(t),this.getItemByTask(t),this.getTaskSubscriptionByTask(t))})}else this.importExternalTaskItems()})}onShowAttachFile(t){if(t){for(var e of t.files){e.url=this.rootFile+"/Task/"+this.taskItem.GId+"___"+e.name;var a=this.userList.find(t=>t.Id===e.createdBy);e.createdName=a.UserName,e.ext=this.getFileExtension(e.name),e.fileIcon=this.getFileExtensionIcon(e.name)}this.attachUrls=t.files}}getFileExtension(t){const e=t.split(".").pop(),a=this.iconList.filter(t=>{if(t.type===e)return!0});return a.length>0?a[0].type:""}getFileExtensionIcon(t){const e=t.split(".").pop(),a=this.iconList.filter(t=>{if(t.type===e)return!0});return a.length>0?a[0].icon:"fa fa-file-text-o"}getEventByTask(t){if(t){const t=[];t.push("@TaskId",this.taskId),this.dataService.post("/commands",{CommandText:"uspTaskEvent___GetByTaskId",CommandType:1025,Parameters:t}).subscribe(t=>{if(t.Data)for(var e of(this.eventByTask=t.Data,this.eventByTask))e.JsonData=this.onShowFileAttachTaskEvent(JSON.parse(e.JsonData),e.GId)})}}onShowFileAttachTaskEvent(t,e){if(t){for(var a of t.files){a.url=this.rootFile+"/TaskEvent/"+e+"___"+a.name;var i=this.userList.find(t=>t.Id===a.createdBy);a.createdName=i.UserName,a.ext=this.getFileExtension(a.name),a.fileIcon=this.getFileExtensionIcon(a.name)}return t}}getTodoByTask(t){if(t){const t=[];t.push("@TaskId",this.taskId),this.dataService.post("/commands",{CommandText:"uspTaskTodo___ListByTaskId",CommandType:1025,Parameters:t}).subscribe(t=>{t.Data&&(this.listTaskToDo=t.Data,this.maxProgressbar=this.listTaskToDo.length,this.progressing=this.listTaskToDo.filter(t=>t.Finished).length,this.listTaskToDo.forEach(t=>{this.checkTodoDetail(t),t.DetailList=""!==t.DetaiSettings?JSON.parse(t.DetaiSettings):[]}))})}}getItemByTask(t){if(t){const e=[];e.push("@TaskId",t),this.dataService.post("/commands",{CommandText:"uspTaskItem___ListByTaskId",CommandType:1025,Parameters:e}).toPromise().then(t=>{this.listTaskItem=t.Data})}}importExternalTaskItems(){null!==this.extenalTaskItems&&this.extenalTaskItems.forEach(t=>{this.listTaskItem.push(t)})}onEditTask(){this.bsModalRef.hide();let e=this.taskItem;e.Id=this.taskId;const a=this.taskId;this.bsModalRef=this.modalService.show(ht,{initialState:{taskItem:e},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(e=>{this.bsModalRef=this.modalService.show(t,{initialState:{taskId:a},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(t=>{this.triggerEvent("Close")})})}onComment(t){this.requiredComment=!1,this.titleActionForm="task_manager_action_comment",this.eventType=this.eventTypes.comment,(!this.taskItem.Status||this.taskItem.Status<this.eventStatus.open)&&(this.taskItem.Status=this.eventStatus.open),this.description="",this.attachEventTemplateUrls=[],this.modalRef=this.modalService.show(t)}onAssignTo(t){this.requiredAssign=!1,this.requiredComment=!1,this.titleActionForm="task_manager_action_assign_to",this.assignedTo=this.taskItem.AssignedTo,this.priority=this.taskItem.Priority,this.eventType=this.eventTypes.reAssign,(!this.taskItem.Status||this.taskItem.Status<this.eventStatus.progress)&&(this.taskItem.Status=this.eventStatus.progress),this.description="",this.modalRef=this.modalService.show(t)}onTaskSubscription(t){this.requiredAssign=!1,this.requiredComment=!1,this.titleActionForm="task_manager_TaskSubscription",this.assignedTo=this.taskItem.AssignedTo,this.priority=this.taskItem.Priority,this.vehicleId=this.taskItem.VehicleId,this.eventType=this.eventTypes.reAssign,this.description="",this.modalRef=this.modalService.show(t)}onChangeStatus(t){this.requiredComment=!1,this.titleActionForm="task_manager_task_button_status",this.description="",this.eventType=this.eventTypes.changeStatus,this.modalRef=this.modalService.show(t)}onFinishTask(t){this.requiredComment=!1,this.titleActionForm="task_manager_task_button_close",this.description="",(!this.taskItem.Status||this.taskItem.Status<this.eventStatus.complete)&&(this.taskItem.Status=this.eventStatus.complete),this.eventType=this.eventTypes.finish,this.modalRef=this.modalService.show(t)}onAddTaskTodo(){}onDeleteTaskToDo(){}SubmitEvent(){return Object(n.a)(this,void 0,void 0,function*(){this.taskItem.EventTypeId=this.eventType,this.taskItem.Priority=this.priority,this.taskItem.Description=this.description,this.taskItem.AssignedTo=this.assignedTo;const t={TaskId:this.taskItem.Id,GId:Object(h.v4)(),EventTypeId:this.taskItem.EventTypeId,Priority:this.taskItem.Priority,Status:this.taskItem.Status,JsonData:null,Description:this.taskItem.Description,EventDate:new Date,AssignedTo:this.taskItem.AssignedTo,CreatedBy:this.userLoginId};for(let e of this.taskEventFileUpload)yield this.uploadService.postWithFile("/files/upload?app=TaskManager&category=TaskEvent&id="+t.GId,null,e).then(e=>{t.JsonData=JSON.stringify(this.taskEventFiles)});if(this.eventType!==this.eventTypes.comment||this.description){if(this.eventType===this.eventTypes.reAssign){if(!this.assignedTo)return void(this.requiredAssign=!0);yield this.UpdateTaskAssigned()}this.eventType!==this.eventTypes.changeStatus&&this.eventType!==this.eventTypes.complete&&this.eventType!==this.eventTypes.finish||(yield this.UpdateTaskStatus()),this.eventType===this.eventTypes.finish&&(yield this.UpdateTaskFinished()),this.dataService.post("/taskevents",t).subscribe(t=>{this.getEventByTask(this.taskId),this.assignedTo&&this.PushTaskNotification(t.Id,this.assignedTo),this.notificationService.printSuccessMessage(d.a.UPDATED_OK_MSG)},t=>this.dataService.handleError(t)),this.modalRef.hide(),this.getTask(this.taskId)}else this.requiredComment=!0})}UpdateTaskAssigned(){const t=[];t.push("@TaskId",this.taskId,"@AssignedTo",this.assignedTo,"@Priority",this.priority,"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___AssignTo",CommandType:1025,Parameters:t}).subscribe(t=>{})}UpdateTaskStatus(){const t=[];t.push("@TaskId",this.taskId,"@Status",this.taskItem.Status,"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___UpdateStatus",CommandType:1025,Parameters:t}).subscribe(t=>{this.taskItem.ActualDate=t.Data?t.Data[0].ActualDate:new Date})}UpdateTaskFinished(){this.taskItem.Finished=1;const t=[];t.push("@TaskId",this.taskId,"@Finished",this.taskItem.Finished,"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___UpdateFinished",CommandType:1025,Parameters:t}).subscribe(t=>{this.taskItem.ActualDate=t.Data?t.Data[0].ActualDate:new Date})}PushTaskNotification(t,e){this.dataService.post("/taskEventNotifications",{taskId:this.taskId,eventId:t,subscriberId:e,isNew:1,isRead:0}).subscribe()}UpdateTaskToDo(t){if(!this.descriptionTaskToDo)return void(this.requiredItemTodo=!0);let e={};e=t?{taskId:this.taskId,Id:this.editTodoId,code:this.todoCode,description:this.descriptionTaskToDo,changedBy:this.userLoginId}:{taskId:this.taskId,code:Object(h.v4)(),description:this.descriptionTaskToDo,createdBy:this.userLoginId},this.dataService.post("/taskTodos",e).subscribe(e=>{t?this.listTaskToDo.find(e=>e.Id===t).Description=this.descriptionTaskToDo:this.listTaskToDo.push(e),this.maxProgressbar=this.listTaskToDo.length,this.descriptionTaskToDo="",this.todoCode="",this.isToDoItem=!1,this.editTodoId=void 0})}FinishTaskToDo(t,e){return Object(n.a)(this,void 0,void 0,function*(){if(t.target.checked){let t={CommandText:"uspTaskTodo___UpdateFinished",CommandType:1025,Parameters:["@Id",e.Id,"@Finished",1,"@ChangedBy",this.userLoginId,"@DetailValue",e.DetailValue]};yield this.dataService.post("/commands",t).subscribe(t=>{t.Data?(e.ChangedOn=t.Data[0].ChangedOn,e.ChangedByName=t.Data[0].ChangedByName):(e.ChangedOn=new Date,e.ChangedByName=""),e.Finished=!0}),this.progressing=this.progressing+1}else{const t=[];t.push("@Id",e.Id,"@Finished",0,"@ChangedBy",this.userLoginId,"@DetailValue",null);const a={CommandText:"uspTaskTodo___UpdateFinished",CommandType:1025,Parameters:t};yield this.dataService.post("/commands",a).subscribe(t=>{e.Finished=!1}),this.progressing=this.progressing-1}this.maxProgressbar>0&&(this.taskItem.Status<4&&this.progressing==this.maxProgressbar?this.taskItem.Status=4:this.taskItem.Status>=4&&this.progressing<=this.maxProgressbar&&(this.taskItem.Status=2),yield this.UpdateTaskStatus())})}onCloseInputTodoItem(){this.descriptionTaskToDo="",this.isToDoItem=!1,this.editTodoId=void 0,this.requiredItemTodo=!1}onChangeItemTodo(t,e,a){t&&(this.editTodoId=t,this.isToDoItem=!0,this.descriptionTaskToDo=e,this.todoCode=a)}onDeleteItemTodo(t){t&&this.dataService.delete("/taskTodos/"+t).subscribe(e=>{var a=this.listTaskToDo.find(e=>e.Id===t),i=this.listTaskToDo.indexOf(a);this.listTaskToDo.splice(i,1),this.maxProgressbar=this.listTaskToDo.length,this.progressing=this.listTaskToDo.filter(t=>t.Finished).length})}triggerEvent(t){this.event.emit({data:t})}onCloseTaskDetail(){this.triggerEvent("Close"),this.bsModalRef.hide()}onAttachTask(t){return Object(n.a)(this,void 0,void 0,function*(){if(t.target.files){for(var e of(this.jsonData=JSON.parse(this.taskItem.JsonData),null===this.jsonData&&(this.jsonData={files:[]}),t.target.files)){var a={name:null,createdOn:null,createdBy:null};yield this.uploadService.postWithFile("/files/upload?app=TaskManager&category=Task&id="+this.taskItem.GId,null,e).then(t=>{a.name=e.name,a.createdOn=new Date,a.createdBy=this.userLoginId,this.jsonData.files.push(a),this.taskItem.JsonData=JSON.stringify(this.jsonData)})}const i=[];i.push("@TaskId",this.taskId,"@JsonData",JSON.stringify(this.jsonData),"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___AttachFile",CommandType:1025,Parameters:i}).subscribe(t=>{this.onShowAttachFile(this.jsonData)})}})}onAttachTaskEvent(t){if(t.target.files){this.taskEventFileUpload=t.target.files;var e=[];for(var a of t.target.files){var i={name:null,createdOn:null,createdBy:null};i.name=a.name,i.createdOn=new Date,i.createdBy=this.userLoginId,e.push(i)}this.taskEventFiles={files:e};var c=t.target.files.length;for(let e=0;e<c;e++){var n=new FileReader;n.onload=t=>{this.attachEventTemplateUrls.push(t.target.result)},n.readAsDataURL(t.target.files[e])}}}onRemoveFileAttach(t,e){return Object(n.a)(this,void 0,void 0,function*(){this.notificationService.printConfirmationDialog(d.a.CONFIRM_DELETE_FILE,()=>this.dataService.deleteFile("/files/delete?app=TaskManager&category="+e+"&id="+this.taskItem.GId+"&name="+t).subscribe(e=>{this.RemoveItemInJsonData(t)},t=>this.dataService.handleError(t)))})}RemoveItemInJsonData(t){return Object(n.a)(this,void 0,void 0,function*(){if(""!=t){this.jsonData=JSON.parse(this.taskItem.JsonData);var e=this.jsonData.files.indexOf(this.jsonData.files.find(e=>e.name===t));if(e>=0){this.jsonData.files.splice(e,1);const t=[];t.push("@TaskId",this.taskId,"@JsonData",JSON.stringify(this.jsonData),"@ChangedBy",this.userLoginId);const a={CommandText:"uspTask___AttachFile",CommandType:1025,Parameters:t};yield this.dataService.post("/commands",a).subscribe(t=>{this.taskItem.JsonData=JSON.stringify(this.jsonData),this.onShowAttachFile(this.jsonData),this.notificationService.printSuccessMessage(d.a.DELETED_OK_MSG)})}}})}loadVehicle(){this.dataService.get("/Vehicles").subscribe(t=>{this.vehicleList=t})}SaveTaskSubscription(){const t=[];t.push("@TaskId",this.taskId),t.push("@UserId",this.assignedTo),t.push("@VehicleId",this.vehicleId),t.push("@AssignedBy",this.userLoginId),t.push("@SubctiptionType",this.priority),this.dataService.post("/commands",{CommandText:"uspTaskSubscription___Save",CommandType:1025,Parameters:t}).subscribe(t=>{this.getTaskSubscriptionByTask(this.taskId),this.notificationService.printSuccessMessage(d.a.CREATED_OK_MSG),this.triggerEvent("Close"),this.modalRef.hide()},t=>this.dataService.handleError(t))}getTaskSubscriptionByTask(t){if(t){const t=[];t.push("@TaskId",this.taskId),this.dataService.post("/commands",{CommandText:"uspTaskSubscription___GetByTaskId",CommandType:1025,Parameters:t}).subscribe(t=>{t.Data&&(this.listTaskSubscription=t.Data,this.ConverDetail())})}}ConverDetail(){for(const e of this.listTaskSubscription){var t=this.userList.find(t=>t.Id===e.UserId);e.UserCode=t.FullName,e.UserName=t.UserName,e.VehicleId&&this.dataService.get("/Vehicles/"+e.VehicleId).subscribe(t=>{t&&(e.VehicleCode=t.Code,e.VehicleName=t.Name)})}}deleteTaskSubscriptionItem(t){const e=t.Id;this.notificationService.printConfirmationDialog(d.a.CONFIRM_DELETE_MSG,()=>this.dataService.delete("/TaskSubscriptions/"+e).subscribe(t=>{this.notificationService.printSuccessMessage(d.a.DELETED_OK_MSG),this.getTaskSubscriptionByTask(this.taskId)},t=>this.dataService.handleError(t)))}getTodotemplateDetails(){var t;return Object(n.a)(this,void 0,void 0,function*(){const e=[];e.push("@CategoryId",null===(t=this.taskItem)||void 0===t?void 0:t.CategoryId);const a={CommandText:"uspGetTodoTemplateDetails",CommandType:1025,Parameters:e};yield this.dataService.post("/commands",a).toPromise().then(t=>{t.Data&&(this.todotemplateDetails=t.Data)})})}checkTodoDetail(t){const e=this.todotemplateDetails.find(e=>e.Description===t.Description);e&&(e.DetailType=null,t.DetailList=""!==e.DetaiSettings?JSON.parse(e.DetaiSettings):[])}isItemDisabled(t){return!(!t.Finished||(null==t?void 0:t.ChangedByName)==this.userInfo.userName)||1==t.DetailType&&null==t.DetailValue}hasDetail(t){return 1==(null==t?void 0:t.DetailType)}onChangeTodoDetailValue(t,e){t.DetailValue=e,t.Finished&&this.dataService.post("/commands",{CommandText:"uspTaskTodo___UpdateFinished",CommandType:1025,Parameters:["@Id",t.Id,"@Finished",1,"@ChangedBy",this.userLoginId,"@DetailValue",t.DetailValue]}).subscribe(e=>{e.Data?(t.ChangedOn=e.Data[0].ChangedOn,t.ChangedByName=e.Data[0].ChangedByName):(t.ChangedOn=new Date,t.ChangedByName="")})}onHidden(){console.log("Dropdown is hidden")}onShown(){console.log("Dropdown is shown")}isOpenChange(){console.log("Dropdown state is changed")}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(u.a),s.Vb(o.a),s.Vb(o.b),s.Vb(r.d),s.Vb(f.a),s.Vb(ut.a),s.Vb(g.a))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-task-detail"]],decls:162,vars:111,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-md-10","col-xs-12"],[1,"col-md-5","col-xs-12"],[1,"form-input"],[1,"col-md-3","col-xs-12"],[1,"col-md-4","col-xs-12"],[3,"innerHTML"],["id","task-todo",3,"heading"],[1,"task-todo"],["aria-hidden","true",1,"fa","fa-list"],[1,"mb-2","progressbar-panel"],[3,"value","max","striped","animate"],[1,"list-task-todo"],[4,"ngFor","ngForOf"],["id","task-detail",3,"heading"],[1,"table-responsive","table-task-item"],[1,"table","table-bordered"],["class","select-task",4,"ngFor","ngForOf"],["class","col-md-12",4,"ngIf"],[3,"heading"],["class","panel-attach",4,"ngIf"],["class","panel panel-info activity-log",4,"ngIf"],[1,"col-md-2","col-xs-12","action-task-detail"],[1,"tile-action"],["class","btn btn-secondary",3,"click",4,"ngIf"],["for","file-input",1,"btn","btn-secondary"],["aria-hidden","true",1,"fa","fa-paperclip"],["id","file-input","type","file","capture","camera","multiple","",2,"visibility","hidden","position","absolute",3,"change"],[1,"btn","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-link"],["aria-hidden","true",1,"fa","fa-comments"],["aria-hidden","true",1,"fa","fa-list-ol"],["aria-hidden","true",1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-default",3,"click"],[1,"modal-footer"],["templateComment",""],["templateTaskSubscription",""],["class","todo-item",3,"mouseover","mouseout",4,"ngIf"],[1,"todo-item",3,"mouseover","mouseout"],["type","hidden",3,"ngModel","ngModelChange"],["type","checkbox",1,"check-finish",3,"checked","disabled","change"],[1,"task-todo-action-item",3,"ngClass"],["dropdown","",1,"btn-group",3,"isDisabled"],["href","","id","basic-link","dropdownToggle","","aria-controls","basic-link-dropdown",3,"click"],["aria-hidden","true",1,"fa","fa-bars"],["id","basic-link-dropdown","class","dropdown-menu","role","menu","aria-labelledby","basic-link",4,"dropdownMenu"],[3,"hidden"],["aria-hidden","true",1,"fa","fa-user"],["aria-hidden","true",1,"fa","fa-clock-o"],["id","basic-link-dropdown","role","menu","aria-labelledby","basic-link",1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink","click"],[1,"select-task"],[4,"ngIf"],[1,"col-md-12"],[1,"alert","alert-info"],[1,"text-center","action-task"],["data-toggle","tooltip","data-placement","top","class","action-delete-task",3,"click",4,"ngIf"],["data-toggle","tooltip","data-placement","top",1,"action-delete-task",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"panel-attach"],[1,"attach-header"],[1,"fa","fa-paperclip"],["class","attach-content",4,"ngFor","ngForOf"],[1,"attach-content"],[1,"file-display"],["data-toggle","tooltip",1,"action-remove-task-attach",3,"title","click"],["target","_blank",3,"href"],["class","attach-logo",3,"src",4,"ngIf"],["class","attach-logo","src","http://27.72.62.141:8888/tasks/assets/images/download_drive.png",4,"ngIf"],[1,"file-detail"],[1,"attach-logo",3,"src"],["src","http://27.72.62.141:8888/tasks/assets/images/download_drive.png",1,"attach-logo"],[1,"panel","panel-info","activity-log"],[1,"panel-heading"],[1,"fa","fa-history"],[1,"panel-body","log-content"],["class","panel panel-default",4,"ngFor","ngForOf"],[1,"panel","panel-default"],["class","file-task-event",4,"ngIf"],[1,"panel-body",3,"innerHtml"],[1,"file-task-event"],["class","file-display",4,"ngIf"],["aria-hidden","true",1,"fa","fa-edit"],["class","row form-group",4,"ngIf"],[1,"form-group"],[3,"init","ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["id","file-input","type","file","multiple","","capture","camera",3,"change"],[1,"task-attach-image"],["height","150","width","200","style","background-color: #eeee;",3,"src",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","button-submit",3,"click"],[1,"row","form-group"],[1,"control-label","col-md-3","col-sm-3","col-xs-12"],[1,"col-md-9","col-sm-9","col-xs-12"],["name","assignedTo",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger"],["name","priority",1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","4"],["name","status",1,"form-control",3,"ngModel","ngModelChange"],["height","150","width","200",2,"background-color","#eeee",3,"src"],["value","0"],["name","vehicle",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){const t=s.cc();s.bc(0,"div",0),s.bc(1,"h4",1),s.bc(2,"strong"),s.Mc(3),s.ac(),s.ac(),s.bc(4,"button",2),s.ic("click",function(){return e.onCloseTaskDetail()}),s.bc(5,"span",3),s.Mc(6,"\xd7"),s.ac(),s.ac(),s.ac(),s.bc(7,"div",4),s.bc(8,"div",5),s.bc(9,"div",6),s.bc(10,"div",5),s.bc(11,"div",7),s.bc(12,"div",8),s.bc(13,"span"),s.bc(14,"strong"),s.Mc(15),s.lc(16,"translate"),s.ac(),s.ac(),s.bc(17,"span"),s.Mc(18),s.ac(),s.ac(),s.bc(19,"div",8),s.bc(20,"span"),s.bc(21,"strong"),s.Mc(22),s.lc(23,"translate"),s.ac(),s.ac(),s.bc(24,"span"),s.Mc(25),s.ac(),s.ac(),s.bc(26,"div",8),s.bc(27,"span"),s.bc(28,"strong"),s.Mc(29),s.lc(30,"translate"),s.ac(),s.ac(),s.bc(31,"span"),s.Mc(32),s.lc(33,"priorityPipe"),s.ac(),s.ac(),s.ac(),s.bc(34,"div",9),s.bc(35,"div",8),s.bc(36,"span"),s.bc(37,"strong"),s.Mc(38),s.lc(39,"translate"),s.ac(),s.ac(),s.bc(40,"span"),s.Mc(41),s.lc(42,"statusPipe"),s.ac(),s.ac(),s.bc(43,"div",8),s.bc(44,"span"),s.bc(45,"strong"),s.Mc(46),s.lc(47,"translate"),s.ac(),s.ac(),s.bc(48,"span"),s.Mc(49),s.lc(50,"date"),s.ac(),s.ac(),s.bc(51,"div",8),s.bc(52,"span"),s.bc(53,"strong"),s.Mc(54),s.lc(55,"translate"),s.ac(),s.ac(),s.bc(56,"span"),s.Mc(57),s.lc(58,"date"),s.ac(),s.ac(),s.ac(),s.bc(59,"div",10),s.bc(60,"div",8),s.bc(61,"span"),s.bc(62,"strong"),s.Mc(63),s.lc(64,"translate"),s.ac(),s.ac(),s.bc(65,"span"),s.Mc(66),s.lc(67,"date"),s.ac(),s.ac(),s.bc(68,"div",8),s.bc(69,"span"),s.bc(70,"strong"),s.Mc(71),s.lc(72,"translate"),s.ac(),s.ac(),s.bc(73,"span"),s.Mc(74),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(75,"div",8),s.bc(76,"span"),s.bc(77,"strong"),s.Mc(78),s.lc(79,"translate"),s.ac(),s.ac(),s.Wb(80,"p",11),s.ac(),s.bc(81,"tabset"),s.bc(82,"tab",12),s.lc(83,"translate"),s.bc(84,"div",13),s.bc(85,"span"),s.Wb(86,"i",14),s.bc(87,"strong"),s.Mc(88),s.lc(89,"translate"),s.ac(),s.ac(),s.bc(90,"div",15),s.Wb(91,"progressbar",16),s.ac(),s.bc(92,"div",17),s.Kc(93,xt,2,1,"div",18),s.ac(),s.ac(),s.ac(),s.bc(94,"tab",19),s.lc(95,"translate"),s.bc(96,"div",20),s.bc(97,"table",21),s.bc(98,"thead"),s.bc(99,"tr"),s.bc(100,"th"),s.Mc(101),s.lc(102,"translate"),s.ac(),s.Kc(103,Et,2,1,"th",18),s.lc(104,"jsonToArray"),s.ac(),s.ac(),s.bc(105,"tbody"),s.Kc(106,Kt,5,5,"tr",22),s.ac(),s.ac(),s.Kc(107,Vt,7,6,"div",23),s.ac(),s.ac(),s.bc(108,"tab",24),s.lc(109,"translate"),s.bc(110,"div",20),s.bc(111,"table",21),s.bc(112,"thead"),s.bc(113,"tr"),s.bc(114,"th"),s.Mc(115),s.lc(116,"translate"),s.ac(),s.Kc(117,Ut,2,1,"th",18),s.lc(118,"jsonToArray"),s.ac(),s.ac(),s.bc(119,"tbody"),s.Kc(120,$t,8,5,"tr",22),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.Kc(121,Qt,8,4,"div",25),s.Kc(122,oe,8,4,"div",26),s.ac(),s.bc(123,"div",27),s.bc(124,"span",28),s.bc(125,"strong"),s.Mc(126),s.lc(127,"translate"),s.ac(),s.ac(),s.Kc(128,re,4,3,"button",29),s.bc(129,"label",30),s.Wb(130,"i",31),s.Mc(131),s.lc(132,"translate"),s.bc(133,"input",32),s.ic("change",function(t){return e.onAttachTask(t)}),s.ac(),s.ac(),s.Kc(134,le,4,3,"button",29),s.bc(135,"button",33),s.ic("click",function(){s.Ec(t);const a=s.Ac(161);return e.onTaskSubscription(a)}),s.Wb(136,"i",34),s.Mc(137),s.lc(138,"translate"),s.ac(),s.bc(139,"button",33),s.ic("click",function(){s.Ec(t);const a=s.Ac(159);return e.onComment(a)}),s.Wb(140,"i",35),s.Mc(141),s.lc(142,"translate"),s.ac(),s.bc(143,"button",33),s.ic("click",function(){s.Ec(t);const a=s.Ac(159);return e.onChangeStatus(a)}),s.Wb(144,"i",36),s.Mc(145),s.lc(146,"translate"),s.ac(),s.bc(147,"button",33),s.ic("click",function(){s.Ec(t);const a=s.Ac(159);return e.onFinishTask(a)}),s.Wb(148,"i",37),s.Mc(149),s.lc(150,"translate"),s.ac(),s.bc(151,"button",38),s.ic("click",function(){return e.onCloseTaskDetail()}),s.Mc(152),s.lc(153,"translate"),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(154,"div",39),s.bc(155,"button",38),s.ic("click",function(){return e.onCloseTaskDetail()}),s.Mc(156),s.lc(157,"translate"),s.ac(),s.ac(),s.Kc(158,fe,36,25,"ng-template",null,40,s.Lc),s.Kc(160,Te,59,46,"ng-template",null,41,s.Lc)}2&t&&(s.Jb(3),s.Nc(null==e.taskItem?null:e.taskItem.Title),s.Jb(12),s.Oc("",s.mc(16,47,"task_manager_task_owner"),": "),s.Jb(3),s.Nc(null==e.taskItem?null:e.taskItem.OwnerName),s.Jb(4),s.Oc("",s.mc(23,49,"task_manager_task_assigned_to"),": "),s.Jb(3),s.Nc(null==e.taskItem?null:e.taskItem.AssignedName),s.Jb(4),s.Oc("",s.mc(30,51,"task_manager_task_priority"),": "),s.Jb(3),s.Nc(s.mc(33,53,null==e.taskItem?null:e.taskItem.Priority)),s.Jb(6),s.Oc("",s.mc(39,55,"task_manager_task_status"),": "),s.Jb(3),s.Nc(s.mc(42,57,null==e.taskItem?null:e.taskItem.Status)),s.Jb(5),s.Oc("",s.mc(47,59,"task_manager_task_due_date"),": "),s.Jb(3),s.Nc(s.nc(50,61,null==e.taskItem?null:e.taskItem.DueDate,"dd/MM/yyyy HH:mm")),s.Jb(5),s.Oc("",s.mc(55,64,"task_manager_task_actual_date"),": "),s.Jb(3),s.Nc(s.nc(58,66,null==e.taskItem?null:e.taskItem.ActualDate,"dd/MM/yyyy HH:mm")),s.Jb(6),s.Oc("",s.mc(64,69,"task_manager_task_updated_on"),": "),s.Jb(3),s.Nc(s.nc(67,71,null==e.taskItem?null:e.taskItem.ChangedOn,"dd/MM/yyyy HH:mm")),s.Jb(5),s.Oc("",s.mc(72,74,"task_manager_task_updated_by"),": "),s.Jb(3),s.Nc(null==e.taskItem?null:e.taskItem.ChangedByName),s.Jb(4),s.Nc(s.mc(79,76,"task_manager_task_description")),s.Jb(2),s.qc("innerHTML",null==e.taskItem?null:e.taskItem.Description,s.Fc),s.Jb(2),s.rc("heading",s.mc(83,78,"task_manager_action_task_todo")),s.Jb(6),s.Oc(" ",s.mc(89,80,"task_manager_action_task_todo"),""),s.Jb(3),s.qc("value",e.progressing)("max",e.maxProgressbar)("striped",!0)("animate",!0),s.Jb(2),s.qc("ngForOf",e.listTaskToDo),s.Jb(1),s.rc("heading",s.mc(95,82,"task_manager_task_detail")),s.Jb(7),s.Nc(s.mc(102,84,"task_manager_task_number")),s.Jb(2),s.qc("ngForOf",s.nc(104,86,e.taskItemColumn,"CustomerId")),s.Jb(3),s.qc("ngForOf",e.listTaskItem),s.Jb(1),s.qc("ngIf",e.listTaskItem&&0==e.listTaskItem.length),s.Jb(1),s.rc("heading",s.mc(109,89,"task_manager_TaskSubscription_list")),s.Jb(7),s.Nc(s.mc(116,91,"task_manager_task_number")),s.Jb(2),s.qc("ngForOf",s.mc(118,93,e.taskSubscriptionsColumn)),s.Jb(3),s.qc("ngForOf",e.listTaskSubscription),s.Jb(1),s.qc("ngIf",e.attachUrls.length>0),s.Jb(1),s.qc("ngIf",e.eventByTask.length>0),s.Jb(4),s.Nc(s.mc(127,95,"title_action")),s.Jb(2),s.qc("ngIf",e.authService.hasPermission("/main/task","Edit")),s.Jb(3),s.Oc(" ",s.mc(132,97,"button_attach")," "),s.Jb(3),s.qc("ngIf",e.authService.hasPermission("/main/task","Assign")),s.Jb(3),s.Oc("",s.mc(138,99,"task_manager_TaskSubscription")," "),s.Jb(4),s.Oc(" ",s.mc(142,101,"task_manager_task_button_comment"),""),s.Jb(4),s.Oc(" ",s.mc(146,103,"task_manager_task_button_status"),""),s.Jb(4),s.Oc(" ",s.mc(150,105,"task_manager_task_button_finish"),""),s.Jb(3),s.Nc(s.mc(153,107,"button_close")),s.Jb(4),s.Nc(s.mc(157,109,"button_close")))},directives:[v.c,v.a,N,i.l,i.m,b.b,b.k,b.n,i.k,Dt,Jt,At,c.e,M.a,b.t,b.o,b.v],pipes:[r.c,P,O,i.e,F,i.t,q,x],styles:[".action-task-detail[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .action-task-detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;text-align:left}.action-task-detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#efefef}.activity-log[_ngcontent-%COMP%]{margin-top:50px}.tile-action[_ngcontent-%COMP%]{text-transform:uppercase;margin-bottom:10px}.log-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block}.content-item[_ngcontent-%COMP%]{padding-bottom:10px}.contextmenu[_ngcontent-%COMP%]{position:absolute;border:1px solid grey;padding:10px;background-color:#fff}.task-todo-action-delete[_ngcontent-%COMP%]{float:right;font-size:12px}.task-todo-action[_ngcontent-%COMP%]{font-size:12px}.progress[_ngcontent-%COMP%]{height:10px}.todo-title[_ngcontent-%COMP%]{width:100%;margin-bottom:5px;margin-top:5px}.list-task-todo[_ngcontent-%COMP%]{line-height:2.5}.task-todo[_ngcontent-%COMP%]{margin-top:15px}.todo-item[_ngcontent-%COMP%]{cursor:pointer}.task-todo-action-item[_ngcontent-%COMP%]{padding-left:10px}.remove-hidden[_ngcontent-%COMP%]{display:block}.task-todo-item[_ngcontent-%COMP%]{margin-right:5px}.progressbar-panel[_ngcontent-%COMP%]{margin-top:10px}.table-task-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{white-space:nowrap}.panel-attach[_ngcontent-%COMP%]{margin-top:20px}.attach-header[_ngcontent-%COMP%]{font-size:18px}.attach-content[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;margin-bottom:10px}.file-display[_ngcontent-%COMP%]{width:200px;height:150px;background-color:hsla(0,0%,93.3%,.9333333333333333);position:relative}.file-display[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.action-remove-task-attach[_ngcontent-%COMP%]{display:none;position:absolute;top:0;right:-5px}.file-display[_ngcontent-%COMP%]:hover   .action-remove-task-attach[_ngcontent-%COMP%]{display:block}.file-task-event[_ngcontent-%COMP%]   .attach-content[_ngcontent-%COMP%]{margin-top:5px;margin-left:5px}.task-attach-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px;margin-bottom:10px;-o-object-fit:contain;object-fit:contain}"]}),t})();var Ce=a("qeeY"),Ie=a("Lm2G");function De(t,e){if(1&t){const t=s.cc();s.bc(0,"button",37),s.ic("click",function(){return s.Ec(t),s.kc().gotoAlcTaskItemList()}),s.Wb(1,"i",38),s.Mc(2),s.lc(3,"translate"),s.ac()}2&t&&(s.Jb(2),s.Oc(" ",s.mc(3,1,"task_manager_create_new_task_from_alc_item"),""))}function Ae(t,e){if(1&t){const t=s.cc();s.bc(0,"button",39),s.ic("click",function(){return s.Ec(t),s.kc().openAddItemComponent()}),s.Wb(1,"span",40),s.Mc(2),s.lc(3,"translate"),s.ac()}2&t&&(s.Jb(2),s.Oc(" ",s.mc(3,1,"task_manager_create_new_task"),""))}function Je(t,e){if(1&t&&(s.bc(0,"option",41),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.qc("value",t.Id),s.Jb(1),s.Nc(t.UserName)}}function Se(t,e){1&t&&(s.bc(0,"div"),s.Wb(1,"img",42),s.Mc(2," \xa0"),s.bc(3,"span"),s.Mc(4,"\u0110ang t\u1ea3i d\u1eef li\u1ec7u"),s.ac(),s.ac())}function Ne(t,e){if(1&t){const t=s.cc();s.bc(0,"a",49),s.ic("click",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().onEditTask(a.Id,e)}),s.lc(1,"translate"),s.Wb(2,"i",50),s.ac()}2&t&&s.rc("title",s.mc(1,1,"task_manager_task_edit"))}function we(t,e){if(1&t){const t=s.cc();s.bc(0,"a",51),s.ic("click",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().onDeleteTask(a.Id,e)}),s.lc(1,"translate"),s.Wb(2,"i",52),s.ac()}2&t&&s.rc("title",s.mc(1,1,"task_manager_task_delete"))}function Oe(t,e){if(1&t){const t=s.cc();s.bc(0,"tr",43),s.ic("click",function(){s.Ec(t);const a=e.$implicit;return s.kc().onSelectTask(a.Id)}),s.bc(1,"td"),s.Mc(2),s.ac(),s.bc(3,"td"),s.Mc(4),s.ac(),s.bc(5,"td"),s.Mc(6),s.lc(7,"date"),s.ac(),s.bc(8,"td"),s.Mc(9),s.lc(10,"date"),s.ac(),s.bc(11,"td"),s.Mc(12),s.lc(13,"date"),s.ac(),s.bc(14,"td"),s.Mc(15),s.lc(16,"statusPipe"),s.ac(),s.bc(17,"td",44),s.Wb(18,"input",45),s.ac(),s.bc(19,"td",46),s.Kc(20,Ne,3,3,"a",47),s.Mc(21,"\xa0 "),s.Kc(22,we,3,3,"a",48),s.ac(),s.ac()}if(2&t){const t=e.$implicit,a=e.index,i=s.kc();s.Jb(2),s.Nc(i.tabMyAssignedParams.pageNumber>1?a+1+(i.tabMyAssignedParams.pageNumber-1)*i.tabMyAssignedParams.pageSize:a+1),s.Jb(2),s.Nc(t.Title),s.Jb(2),s.Nc(s.nc(7,9,t.TaskDate,"dd/MM/yyyy")),s.Jb(3),s.Nc(s.nc(10,12,t.DueDate,"dd/MM/yyyy HH:mm")),s.Jb(3),s.Nc(s.nc(13,15,t.ActualDate,"dd/MM/yyyy HH:mm")),s.Jb(3),s.Nc(s.mc(16,18,t.Status)),s.Jb(3),s.qc("checked",t.Finished),s.Jb(2),s.qc("ngIf",i.authService.hasPermission("/main/task","Edit")),s.Jb(2),s.qc("ngIf",i.authService.hasPermission("/main/task","Delete"))}}function Pe(t,e){1&t&&(s.bc(0,"div",53),s.bc(1,"div",54),s.bc(2,"strong"),s.Mc(3),s.lc(4,"translate"),s.ac(),s.Mc(5),s.lc(6,"translate"),s.ac(),s.ac()),2&t&&(s.Jb(3),s.Oc("",s.mc(4,2,"dialog_alert_title"),"!"),s.Jb(2),s.Oc(" ",s.mc(6,4,"task_manager_task_notice_list_empty")," "))}function xe(t,e){if(1&t){const t=s.cc();s.bc(0,"div",53),s.bc(1,"div",55),s.bc(2,"pagination",56),s.ic("pageChanged",function(e){s.Ec(t);const a=s.kc();return a.pageChanged(e,a.tab)})("ngModelChange",function(e){return s.Ec(t),s.kc().tabMyAssignedParams.pageNumber=e}),s.ac(),s.ac(),s.bc(3,"div",57),s.bc(4,"div",58),s.bc(5,"label",11),s.Mc(6),s.lc(7,"translate"),s.ac(),s.bc(8,"select",59),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc().tabMyAssignedParams.pageSize=e})("change",function(){s.Ec(t);const e=s.kc();return e.onChangePageSize(e.tab)}),s.bc(9,"option",60),s.Mc(10,"10"),s.ac(),s.bc(11,"option",61),s.Mc(12,"20"),s.ac(),s.bc(13,"option",62),s.Mc(14,"50"),s.ac(),s.bc(15,"option",63),s.Mc(16,"100"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()}if(2&t){const t=s.kc();s.Jb(2),s.qc("boundaryLinks",!0)("itemsPerPage",t.tabMyAssignedParams.pageSize)("totalItems",t.tabMyAssignedParams.totalRow)("ngModel",t.tabMyAssignedParams.pageNumber),s.Jb(4),s.Oc("",s.mc(7,6,"show_row")," \xa0"),s.Jb(2),s.qc("ngModel",t.tabMyAssignedParams.pageSize)}}function Ee(t,e){if(1&t&&(s.bc(0,"option",41),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.qc("value",t.Id),s.Jb(1),s.Nc(t.UserName)}}function Fe(t,e){1&t&&(s.bc(0,"div"),s.Wb(1,"img",42),s.Mc(2," \xa0"),s.bc(3,"span"),s.Mc(4,"\u0110ang t\u1ea3i d\u1eef li\u1ec7u"),s.ac(),s.ac())}function qe(t,e){if(1&t){const t=s.cc();s.bc(0,"a",49),s.ic("click",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().onEditTask(a.Id,e)}),s.lc(1,"translate"),s.Wb(2,"i",50),s.ac()}2&t&&s.rc("title",s.mc(1,1,"task_manager_task_edit"))}function Le(t,e){if(1&t){const t=s.cc();s.bc(0,"a",51),s.ic("click",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().onDeleteTask(a.Id,e)}),s.lc(1,"translate"),s.Wb(2,"i",52),s.ac()}2&t&&s.rc("title",s.mc(1,1,"task_manager_task_delete"))}function Ke(t,e){if(1&t){const t=s.cc();s.bc(0,"tr",43),s.ic("click",function(){s.Ec(t);const a=e.$implicit;return s.kc().onSelectTask(a.Id)}),s.bc(1,"td"),s.Mc(2),s.ac(),s.bc(3,"td"),s.Mc(4),s.ac(),s.bc(5,"td"),s.Mc(6),s.lc(7,"date"),s.ac(),s.bc(8,"td"),s.Mc(9),s.ac(),s.bc(10,"td"),s.Mc(11),s.ac(),s.bc(12,"td"),s.Mc(13),s.lc(14,"date"),s.ac(),s.bc(15,"td"),s.Mc(16),s.lc(17,"date"),s.ac(),s.bc(18,"td"),s.Mc(19),s.lc(20,"statusPipe"),s.ac(),s.bc(21,"td",44),s.Wb(22,"input",45),s.ac(),s.bc(23,"td",46),s.Kc(24,qe,3,3,"a",47),s.Mc(25,"\xa0 "),s.Kc(26,Le,3,3,"a",48),s.ac(),s.ac()}if(2&t){const t=e.$implicit,a=e.index,i=s.kc();s.Jb(2),s.Nc(i.tabMyFollowedParams.pageNumber>1?a+1+(i.tabMyFollowedParams.pageNumber-1)*i.tabMyFollowedParams.pageSize:a+1),s.Jb(2),s.Nc(t.Title),s.Jb(2),s.Nc(s.nc(7,11,t.TaskDate,"dd/MM/yyyy")),s.Jb(3),s.Nc(t.OwnerName),s.Jb(2),s.Nc(t.AssignedName),s.Jb(2),s.Nc(s.nc(14,14,t.DueDate,"dd/MM/yyyy HH:mm")),s.Jb(3),s.Nc(s.nc(17,17,t.ActualDate,"dd/MM/yyyy HH:mm")),s.Jb(3),s.Nc(s.mc(20,20,t.Status)),s.Jb(3),s.qc("checked",t.Finished),s.Jb(2),s.qc("ngIf",i.authService.hasPermission("/main/task","Edit")),s.Jb(2),s.qc("ngIf",i.authService.hasPermission("/main/task","Delete"))}}function Ve(t,e){1&t&&(s.bc(0,"div",53),s.bc(1,"div",54),s.bc(2,"strong"),s.Mc(3),s.lc(4,"translate"),s.ac(),s.Mc(5),s.lc(6,"translate"),s.ac(),s.ac()),2&t&&(s.Jb(3),s.Oc("",s.mc(4,2,"dialog_alert_title"),"!"),s.Jb(2),s.Oc(" ",s.mc(6,4,"task_manager_task_notice_list_empty")," "))}function Ue(t,e){if(1&t){const t=s.cc();s.bc(0,"div",53),s.bc(1,"div",55),s.bc(2,"pagination",56),s.ic("pageChanged",function(e){s.Ec(t);const a=s.kc();return a.pageChanged(e,a.tab)})("ngModelChange",function(e){return s.Ec(t),s.kc().tabMyFollowedParams.pageNumber=e}),s.ac(),s.ac(),s.bc(3,"div",57),s.bc(4,"div",58),s.bc(5,"label",11),s.Mc(6),s.lc(7,"translate"),s.ac(),s.bc(8,"select",59),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc().tabMyFollowedParams.pageSize=e})("change",function(){s.Ec(t);const e=s.kc();return e.onChangePageSize(e.tab)}),s.bc(9,"option",60),s.Mc(10,"10"),s.ac(),s.bc(11,"option",61),s.Mc(12,"20"),s.ac(),s.bc(13,"option",62),s.Mc(14,"50"),s.ac(),s.bc(15,"option",63),s.Mc(16,"100"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()}if(2&t){const t=s.kc();s.Jb(2),s.qc("boundaryLinks",!0)("itemsPerPage",t.tabMyFollowedParams.pageSize)("totalItems",t.tabMyFollowedParams.totalRow)("ngModel",t.tabMyFollowedParams.pageNumber),s.Jb(4),s.Oc("",s.mc(7,6,"show_row")," \xa0"),s.Jb(2),s.qc("ngModel",t.tabMyFollowedParams.pageSize)}}function We(t,e){if(1&t&&(s.bc(0,"option",41),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.qc("value",t.Id),s.Jb(1),s.Nc(t.UserName)}}function Re(t,e){1&t&&(s.bc(0,"div"),s.Wb(1,"img",42),s.Mc(2," \xa0"),s.bc(3,"span"),s.Mc(4,"\u0110ang t\u1ea3i d\u1eef li\u1ec7u"),s.ac(),s.ac())}function je(t,e){if(1&t){const t=s.cc();s.bc(0,"a",49),s.ic("click",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().onEditTask(a.Id,e)}),s.lc(1,"translate"),s.Wb(2,"i",50),s.ac()}2&t&&s.rc("title",s.mc(1,1,"task_manager_task_edit"))}function Be(t,e){if(1&t){const t=s.cc();s.bc(0,"a",51),s.ic("click",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().onDeleteTask(a.Id,e)}),s.lc(1,"translate"),s.Wb(2,"i",52),s.ac()}2&t&&s.rc("title",s.mc(1,1,"task_manager_task_delete"))}function $e(t,e){if(1&t){const t=s.cc();s.bc(0,"tr",43),s.ic("click",function(){s.Ec(t);const a=e.$implicit;return s.kc().onSelectTask(a.Id)}),s.bc(1,"td"),s.Mc(2),s.ac(),s.bc(3,"td"),s.Mc(4),s.ac(),s.bc(5,"td"),s.Mc(6),s.lc(7,"date"),s.ac(),s.bc(8,"td"),s.Mc(9),s.ac(),s.bc(10,"td"),s.Mc(11),s.ac(),s.bc(12,"td"),s.Mc(13),s.lc(14,"date"),s.ac(),s.bc(15,"td"),s.Mc(16),s.lc(17,"date"),s.ac(),s.bc(18,"td",46),s.Kc(19,je,3,3,"a",47),s.Mc(20,"\xa0 "),s.Kc(21,Be,3,3,"a",48),s.ac(),s.ac()}if(2&t){const t=e.$implicit,a=e.index,i=s.kc();s.Jb(2),s.Nc(i.tabUnAssignedParams.pageNumber>1?a+1+(i.tabUnAssignedParams.pageNumber-1)*i.tabUnAssignedParams.pageSize:a+1),s.Jb(2),s.Nc(t.Title),s.Jb(2),s.Nc(s.nc(7,9,t.TaskDate,"dd/MM/yyyy")),s.Jb(3),s.Nc(t.OwnerName),s.Jb(2),s.Nc(t.AssignedName),s.Jb(2),s.Nc(s.nc(14,12,t.DueDate,"dd/MM/yyyy HH:mm")),s.Jb(3),s.Nc(s.nc(17,15,t.ActualDate,"dd/MM/yyyy HH:mm")),s.Jb(3),s.qc("ngIf",i.authService.hasPermission("/main/task","Edit")),s.Jb(2),s.qc("ngIf",i.authService.hasPermission("/main/task","Delete"))}}function Ge(t,e){1&t&&(s.bc(0,"div",53),s.bc(1,"div",54),s.bc(2,"strong"),s.Mc(3),s.lc(4,"translate"),s.ac(),s.Mc(5),s.lc(6,"translate"),s.ac(),s.ac()),2&t&&(s.Jb(3),s.Oc("",s.mc(4,2,"dialog_alert_title"),"!"),s.Jb(2),s.Oc(" ",s.mc(6,4,"task_manager_task_notice_list_empty")," "))}function ze(t,e){if(1&t){const t=s.cc();s.bc(0,"div",53),s.bc(1,"div",55),s.bc(2,"pagination",56),s.ic("pageChanged",function(e){s.Ec(t);const a=s.kc();return a.pageChanged(e,a.tab)})("ngModelChange",function(e){return s.Ec(t),s.kc().tabUnAssignedParams.pageNumber=e}),s.ac(),s.ac(),s.bc(3,"div",57),s.bc(4,"div",58),s.bc(5,"label",11),s.Mc(6),s.lc(7,"translate"),s.ac(),s.bc(8,"select",59),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc().tabUnAssignedParams.pageSize=e})("change",function(){s.Ec(t);const e=s.kc();return e.onChangePageSize(e.tab)}),s.bc(9,"option",60),s.Mc(10,"10"),s.ac(),s.bc(11,"option",61),s.Mc(12,"20"),s.ac(),s.bc(13,"option",62),s.Mc(14,"50"),s.ac(),s.bc(15,"option",63),s.Mc(16,"100"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()}if(2&t){const t=s.kc();s.Jb(2),s.qc("boundaryLinks",!0)("itemsPerPage",t.tabUnAssignedParams.pageSize)("totalItems",t.tabUnAssignedParams.totalRow)("ngModel",t.tabUnAssignedParams.pageNumber),s.Jb(4),s.Oc("",s.mc(7,6,"show_row")," \xa0"),s.Jb(2),s.qc("ngModel",t.tabUnAssignedParams.pageSize)}}const He=function(t){return{rangeInputFormat:"DD/MM/YYYY",ranges:t}};let Qe=(()=>{class t{constructor(t,e,a,i){this.modalService=t,this.authService=e,this.dataService=a,this.utilityService=i,this.taskList=[],this.taskListUnassigned=[],this.taskListMyAssigned=[],this.taskListOpen=[],this.taskListMyFollowed=[],this.loading=!1,this.tabUnAssignedParams={totalRow:0,keyword:"",fromDate:new Date,toDate:new Date,status:0,ownerId:0,pageNumber:1,pageSize:10,sort:"",direction:""},this.tabMyAssignedParams={totalRow:0,keyword:"",fromDate:new Date,toDate:new Date,status:0,ownerId:0,assignedTo:0,pageNumber:1,pageSize:10,sort:"",direction:""},this.tabMyFollowedParams={totalRow:0,keyword:"",fromDate:new Date,toDate:new Date,status:0,ownerId:0,assignedTo:0,pageNumber:1,pageSize:10,sort:"",direction:""},this.tabOpenParams={totalRow:0,keyword:"",fromDate:new Date,toDate:new Date,status:0,ownerId:0,assignedTo:0,pageNumber:1,pageSize:10,sort:"",direction:""},this.tab="tab-my-assigned",this.dateRangeConfig=[{value:[new Date,new Date],label:"H\xf4m nay"},{value:[new Date((new Date).setDate((new Date).getDate()-7)),new Date],label:"7 ng\xe0y tr\u01b0\u1edbc"},{value:[new Date((new Date).setDate((new Date).getDate()-30)),new Date],label:"30 ng\xe0y tr\u01b0\u1edbc"},{value:[new Date((new Date).setDate(1)),new Date],label:"T\u1eeb \u0111\u1ea7u th\xe1ng"},{value:[new Date((new Date).getFullYear(),0,1),new Date],label:"T\u1eeb \u0111\u1ea7u n\u0103m"}]}ngOnInit(){const t=this.authService.getLoggedInUser();this.getUserIdLogin(t.userName),this.getListUser(),this.dateRangeTabMyAssigned=[this.tabMyAssignedParams.fromDate,this.tabMyAssignedParams.toDate],this.dateRangeTabMyFollowed=[this.tabMyFollowedParams.fromDate,this.tabMyFollowedParams.toDate],this.dateRangeTabOpen=[this.tabOpenParams.fromDate,this.tabOpenParams.toDate],this.dateRangeTabUnAssigned=[this.tabUnAssignedParams.fromDate,this.tabUnAssignedParams.toDate]}getListUser(){let t=[];t.push("@ActivatedOnly",1),this.dataService.post("/commands",{CommandText:"uspUser___Fill",CommandType:1025,Parameters:t}).subscribe(t=>{t.Data&&(this.userList=t.Data)})}getUserIdLogin(t){return Object(n.a)(this,void 0,void 0,function*(){if(t){let e=[];e.push("@UserName",t);let a={CommandText:"uspUser___FindUserName",CommandType:1025,Parameters:e};yield this.dataService.post("/commands",a).subscribe(t=>{t.Data&&(this.userLoginId=t.Data[0].Id)})}})}getListTaskOpen(){this.loading=!0;let t=[];t.push("@KeyWord",this.tabOpenParams.keyword,"@TaskDateFrom",this.tabOpenParams.fromDate,"@TaskDateTo",this.tabOpenParams.toDate,"@Status",-1,"@OwnerId",this.tabOpenParams.ownerId,"@AssignedTo",this.tabOpenParams.assignedTo,"@PageNumber",this.tabOpenParams.pageNumber,"@PageSize",this.tabOpenParams.pageSize,"@Sort","TaskDate","@Direction","DESC"),this.dataService.post("/commands/paged",{CommandText:"uspTask___Search",CommandType:1025,Parameters:t}).subscribe(t=>{this.taskListOpen=t.Data,this.tabOpenParams.totalRow=t.TotalItems,this.loading=!1})}getListTaskUnAssigned(){this.loading=!0;let t=[];t.push("@KeyWord",this.tabUnAssignedParams.keyword,"@TaskDateFrom",this.tabUnAssignedParams.fromDate,"@TaskDateTo",this.tabUnAssignedParams.toDate,"@Status",this.tabUnAssignedParams.status,"@OwnerId",this.tabUnAssignedParams.ownerId,"@AssignedTo",-1,"@PageNumber",this.tabUnAssignedParams.pageNumber,"@PageSize",this.tabUnAssignedParams.pageSize,"@Sort","TaskDate","@Direction","DESC"),this.dataService.post("/commands/paged",{CommandText:"uspTask___Search",CommandType:1025,Parameters:t}).subscribe(t=>{this.taskListUnassigned=t.Data,this.tabUnAssignedParams.totalRow=t.TotalItems,this.loading=!1})}getListTaskMyAssigned(){this.loading=!0;let t=[];t.push("@KeyWord",this.tabMyAssignedParams.keyword,"@TaskDateFrom",this.tabMyAssignedParams.fromDate,"@TaskDateTo",this.tabMyAssignedParams.toDate,"@Status",this.tabMyAssignedParams.status,"@OwnerId",this.tabMyAssignedParams.ownerId,"@AssignedTo",this.userLoginId,"@PageNumber",this.tabMyAssignedParams.pageNumber,"@PageSize",this.tabMyAssignedParams.pageSize,"@Sort","TaskDate","@Direction","DESC"),this.dataService.post("/commands/paged",{CommandText:"uspTask___Search",CommandType:1025,Parameters:t}).subscribe(t=>{this.taskListMyAssigned=t.Data,this.tabMyAssignedParams.totalRow=t.TotalItems,this.loading=!1})}getListTaskMyFollowed(){this.loading=!0;let t=[];t.push("@KeyWord",this.tabMyFollowedParams.keyword,"@TaskDateFrom",this.tabMyFollowedParams.fromDate,"@TaskDateTo",this.tabMyFollowedParams.toDate,"@Status",this.tabMyFollowedParams.status,"@OwnerId",this.userLoginId,"@AssignedTo",this.tabMyFollowedParams.assignedTo,"@PageNumber",this.tabMyFollowedParams.pageNumber,"@PageSize",this.tabMyFollowedParams.pageSize,"@Sort","TaskDate","@Direction","DESC"),this.dataService.post("/commands/paged",{CommandText:"uspTask___Followed",CommandType:1025,Parameters:t}).subscribe(t=>{this.taskListMyFollowed=t.Data,this.tabMyFollowedParams.totalRow=t.TotalItems,this.loading=!1})}onValueChange(t,e){t&&("tab-open"==e?(this.tabOpenParams.fromDate=t[0],this.tabOpenParams.toDate=t[1],this.getListTaskOpen()):"tab-unassigned"==e?(this.tabUnAssignedParams.fromDate=t[0],this.tabUnAssignedParams.toDate=t[1],this.getListTaskUnAssigned()):"tab-my-assigned"==e?(this.tabMyAssignedParams.fromDate=t[0],this.tabMyAssignedParams.toDate=t[1],this.getListTaskMyAssigned()):(this.tabMyFollowedParams.fromDate=t[0],this.tabMyFollowedParams.toDate=t[1],this.getListTaskMyFollowed()))}onValueChange2(t,e){t&&("tab-open"==e?(this.tabOpenParams.toDate=t,this.getListTaskOpen()):"tab-unassigned"==e?(this.tabUnAssignedParams.toDate=t,this.getListTaskUnAssigned()):"tab-my-assigned"==e?(this.tabMyAssignedParams.toDate=t,this.getListTaskMyAssigned()):(this.tabMyFollowedParams.toDate=t,this.getListTaskMyFollowed()))}loadData(){"tab-unassigned"==this.tab?this.getListTaskUnAssigned():"tab-my-assigned"==this.tab?this.getListTaskMyAssigned():"tab-my-followed"==this.tab?this.getListTaskMyFollowed():this.getListTaskOpen()}pageChanged(t,e){"tab-unassigned"==e?(this.tabUnAssignedParams.pageNumber=t.page,this.getListTaskUnAssigned()):"tab-my-assigned"==e?(this.tabMyAssignedParams.pageNumber=t.page,this.getListTaskMyAssigned()):"tab-my-followed"==e?(this.tabMyFollowedParams.pageNumber=t.page,this.getListTaskMyFollowed()):(this.tabOpenParams.pageNumber=t.page,this.getListTaskOpen())}onChangePageSize(t){this.loadData()}openAddItemComponent(){this.bsModalRef=this.modalService.show(ht,{class:"modal-lg"}),this.bsModalRef.content.event.subscribe(t=>{this.loadData()})}onSelectTask(t){this.bsModalRef=this.modalService.show(ye,{initialState:{taskId:t},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(t=>{this.loadData()})}onSelectTab(t){switch(this.tab=t.id,t.id){case"tab-unassigned":this.dateRangeTabUnAssigned=[this.tabUnAssignedParams.fromDate,this.tabUnAssignedParams.toDate];break;case"tab-my-assigned":this.dateRangeTabMyAssigned=[this.tabMyAssignedParams.fromDate,this.tabMyAssignedParams.toDate];break;case"tab-my-followed":this.dateRangeTabMyFollowed=[this.tabMyFollowedParams.fromDate,this.tabMyFollowedParams.toDate];break;default:this.dateRangeTabOpen=[this.tabOpenParams.fromDate,this.tabOpenParams.toDate]}}onChangeStatus(t,e){"tab-unassigned"==e?this.getListTaskUnAssigned():"tab-my-assigned"==e?this.getListTaskMyAssigned():this.getListTaskMyFollowed()}onChangeOwner(t,e){"tab-unassigned"==e?this.getListTaskUnAssigned():"tab-open"==e?this.getListTaskOpen():this.getListTaskMyAssigned()}onChangeAssigned(t,e){"tab-open"==e?this.getListTaskOpen():this.getListTaskMyFollowed()}onSearchTask(t){this.loadData()}onEditTask(t,e){e.stopPropagation(),this.bsModalRef=this.modalService.show(ht,{initialState:{id:t},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(t=>{t&&"Submit"==t.data&&this.loadData()})}onDeleteTask(t,e){e.stopPropagation(),this.modalRefConfirm=this.modalService.show(l,{initialState:{title:"task_manager_confirm_delete_task"},class:"modal-sm"}),this.modalRefConfirm.content.event.subscribe(e=>{if(e){let e=[];e.push("@TaskId",t),this.dataService.post("/commands",{CommandText:"uspTask___DeleteHierarchy",CommandType:1025,Parameters:e}).subscribe(t=>{this.loadData()})}})}gotoAlcTaskItemList(){this.utilityService.navigate("/main/task/alcTaskItem")}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(o.b),s.Vb(u.a),s.Vb(f.a),s.Vb(Ce.a))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-task-list"]],decls:227,vars:200,consts:[[1,"x_title"],[1,"fa","fa-tasks"],[1,"row"],[1,"col-md-10","col-sm-6","col-xs-12"],["class","btn btn-default task-add-new","type","button",3,"click",4,"ngIf"],[1,"col-md-2","col-sm-6","col-xs-12"],["class","btn btn-primary task-add-new","type","button",3,"click",4,"ngIf"],["id","tab-my-assigned",3,"heading","selectTab"],[1,"row","panel-filter"],[1,"col-md-4","col-sm-6","col-xs-12","form-group"],[1,"col-md-2","col-sm-6","col-xs-12","form-group","label-created-date"],["for",""],[1,"col-md-10","col-sm-6","col-xs-12","form-group"],["type","text","bsDaterangepicker","",1,"form-control",3,"placeholder","bsConfig","bsValue","bsValueChange"],[1,"col-md-2","col-sm-6","col-xs-12","form-group"],["name","status",1,"form-control",3,"ngModel","ngModelChange","change"],["value","0"],["value","1"],["value","2"],["value","4"],["name","owner",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","col-sm-6","col-xs-12","form-group","panel-search"],["type","text","name","filter",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-search"],[1,"table-responsive"],[4,"ngIf"],[1,"table","table-bordered"],[1,"col-title"],["class","select-task",3,"click",4,"ngFor","ngForOf"],["class","col-md-12",4,"ngIf"],["id","tab-my_followed",3,"heading","selectTab"],["name","assignedTo",1,"form-control",3,"ngModel","ngModelChange","change"],["type","text","name","filter",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup.enter"],["id","tab-unassigned",3,"heading","selectTab"],["type","text","name","keyword",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-default","task-add-new",3,"click"],["aria-hidden","true",1,"fa","fa-search-plus"],["type","button",1,"btn","btn-primary","task-add-new",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-plus"],[3,"value"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="],[1,"select-task",3,"click"],[2,"text-align","center","vertical-align","middle"],["type","checkbox","disabled","true",1,"form-check-input",3,"checked"],[1,"text-center","action-task"],["data-toggle","tooltip","data-placement","top",3,"title","click",4,"ngIf"],["data-toggle","tooltip","data-placement","top","class","action-delete-task",3,"title","click",4,"ngIf"],["data-toggle","tooltip","data-placement","top",3,"title","click"],["aria-hidden","true",1,"fa","fa-edit"],["data-toggle","tooltip","data-placement","top",1,"action-delete-task",3,"title","click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"col-md-12"],[1,"alert","alert-info"],[1,"col-md-8"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","itemsPerPage","totalItems","ngModel","pageChanged","ngModelChange"],[1,"col-md-4"],[1,"form-group","view-options"],["name","page-size",1,"form-control",3,"ngModel","ngModelChange","change"],["value","10"],["value","20"],["value","50"],["value","100"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.bc(1,"h3"),s.Wb(2,"i",1),s.Mc(3),s.lc(4,"translate"),s.ac(),s.ac(),s.Wb(5,"br"),s.bc(6,"div"),s.bc(7,"div",2),s.bc(8,"div",3),s.bc(9,"div"),s.Kc(10,De,4,3,"button",4),s.ac(),s.ac(),s.bc(11,"div",5),s.Kc(12,Ae,4,3,"button",6),s.ac(),s.ac(),s.bc(13,"tabset"),s.bc(14,"tab",7),s.ic("selectTab",function(t){return e.onSelectTab(t)}),s.lc(15,"translate"),s.bc(16,"div",8),s.bc(17,"div",9),s.bc(18,"div",10),s.bc(19,"p",11),s.Mc(20),s.lc(21,"translate"),s.ac(),s.ac(),s.bc(22,"div",12),s.bc(23,"input",13),s.ic("bsValueChange",function(t){return e.dateRangeTabMyAssigned=t})("bsValueChange",function(t){return e.onValueChange(t,e.tab)}),s.lc(24,"translate"),s.ac(),s.ac(),s.ac(),s.bc(25,"div",14),s.bc(26,"select",15),s.ic("ngModelChange",function(t){return e.tabMyAssignedParams.status=t})("change",function(t){return e.onChangeStatus(t,e.tab)}),s.bc(27,"option",16),s.Mc(28),s.lc(29,"translate"),s.ac(),s.bc(30,"option",17),s.Mc(31),s.lc(32,"translate"),s.ac(),s.bc(33,"option",18),s.Mc(34),s.lc(35,"translate"),s.ac(),s.bc(36,"option",19),s.Mc(37),s.lc(38,"translate"),s.ac(),s.ac(),s.ac(),s.bc(39,"div",14),s.bc(40,"select",20),s.ic("ngModelChange",function(t){return e.tabMyAssignedParams.ownerId=t})("change",function(t){return e.onChangeOwner(t,e.tab)}),s.bc(41,"option",16),s.Mc(42),s.lc(43,"translate"),s.ac(),s.Kc(44,Je,2,2,"option",21),s.ac(),s.ac(),s.bc(45,"div",22),s.bc(46,"input",23),s.ic("ngModelChange",function(t){return e.tabMyAssignedParams.keyword=t})("keyup.enter",function(){return e.onSearchTask(e.tab)}),s.lc(47,"translate"),s.ac(),s.bc(48,"button",24),s.ic("click",function(){return e.onSearchTask(e.tab)}),s.Wb(49,"span",25),s.ac(),s.ac(),s.ac(),s.bc(50,"div",26),s.Kc(51,Se,5,0,"div",27),s.bc(52,"table",28),s.bc(53,"thead"),s.bc(54,"tr"),s.bc(55,"th"),s.Mc(56),s.lc(57,"translate"),s.ac(),s.bc(58,"th",29),s.Mc(59),s.lc(60,"translate"),s.ac(),s.bc(61,"th"),s.Mc(62),s.lc(63,"translate"),s.ac(),s.bc(64,"th"),s.Mc(65),s.lc(66,"translate"),s.ac(),s.bc(67,"th"),s.Mc(68),s.lc(69,"translate"),s.ac(),s.bc(70,"th"),s.Mc(71),s.lc(72,"translate"),s.ac(),s.bc(73,"th"),s.Mc(74),s.lc(75,"translate"),s.ac(),s.bc(76,"th"),s.Mc(77),s.lc(78,"translate"),s.ac(),s.ac(),s.ac(),s.bc(79,"tbody"),s.Kc(80,Oe,23,20,"tr",30),s.ac(),s.ac(),s.Kc(81,Pe,7,6,"div",31),s.Kc(82,xe,17,8,"div",31),s.ac(),s.ac(),s.bc(83,"tab",32),s.ic("selectTab",function(t){return e.onSelectTab(t)}),s.lc(84,"translate"),s.bc(85,"div",8),s.bc(86,"div",9),s.bc(87,"div",10),s.bc(88,"p",11),s.Mc(89),s.lc(90,"translate"),s.ac(),s.ac(),s.bc(91,"div",12),s.bc(92,"input",13),s.ic("bsValueChange",function(t){return e.dateRangeTabMyFollowed=t})("bsValueChange",function(t){return e.onValueChange(t,e.tab)}),s.lc(93,"translate"),s.ac(),s.ac(),s.ac(),s.bc(94,"div",14),s.bc(95,"select",15),s.ic("ngModelChange",function(t){return e.tabMyFollowedParams.status=t})("change",function(t){return e.onChangeStatus(t,e.tab)}),s.bc(96,"option",16),s.Mc(97),s.lc(98,"translate"),s.ac(),s.bc(99,"option",17),s.Mc(100),s.lc(101,"translate"),s.ac(),s.bc(102,"option",18),s.Mc(103),s.lc(104,"translate"),s.ac(),s.bc(105,"option",19),s.Mc(106),s.lc(107,"translate"),s.ac(),s.ac(),s.ac(),s.bc(108,"div",14),s.bc(109,"select",33),s.ic("ngModelChange",function(t){return e.tabMyFollowedParams.assignedTo=t})("change",function(t){return e.onChangeAssigned(t,e.tab)}),s.bc(110,"option",16),s.Mc(111),s.lc(112,"translate"),s.ac(),s.Kc(113,Ee,2,2,"option",21),s.ac(),s.ac(),s.bc(114,"div",22),s.bc(115,"input",34),s.ic("ngModelChange",function(t){return e.tabMyFollowedParams.keyword=t})("keyup.enter",function(){return e.onSearchTask(e.tab)}),s.lc(116,"translate"),s.ac(),s.bc(117,"button",24),s.ic("click",function(){return e.onSearchTask(e.tab)}),s.Wb(118,"span",25),s.ac(),s.ac(),s.ac(),s.bc(119,"div",26),s.Kc(120,Fe,5,0,"div",27),s.bc(121,"table",28),s.bc(122,"thead"),s.bc(123,"tr"),s.bc(124,"th"),s.Mc(125),s.lc(126,"translate"),s.ac(),s.bc(127,"th",29),s.Mc(128),s.lc(129,"translate"),s.ac(),s.bc(130,"th"),s.Mc(131),s.lc(132,"translate"),s.ac(),s.bc(133,"th"),s.Mc(134),s.lc(135,"translate"),s.ac(),s.bc(136,"th"),s.Mc(137),s.lc(138,"translate"),s.ac(),s.bc(139,"th"),s.Mc(140),s.lc(141,"translate"),s.ac(),s.bc(142,"th"),s.Mc(143),s.lc(144,"translate"),s.ac(),s.bc(145,"th"),s.Mc(146),s.lc(147,"translate"),s.ac(),s.bc(148,"th"),s.Mc(149),s.lc(150,"translate"),s.ac(),s.bc(151,"th"),s.Mc(152),s.lc(153,"translate"),s.ac(),s.ac(),s.ac(),s.bc(154,"tbody"),s.Kc(155,Ke,27,22,"tr",30),s.ac(),s.ac(),s.Kc(156,Ve,7,6,"div",31),s.Kc(157,Ue,17,8,"div",31),s.ac(),s.ac(),s.bc(158,"tab",35),s.ic("selectTab",function(t){return e.onSelectTab(t)}),s.lc(159,"translate"),s.bc(160,"div",8),s.bc(161,"div",9),s.bc(162,"div",10),s.bc(163,"p",11),s.Mc(164),s.lc(165,"translate"),s.ac(),s.ac(),s.bc(166,"div",12),s.bc(167,"input",13),s.ic("bsValueChange",function(t){return e.dateRangeTabUnAssigned=t})("bsValueChange",function(t){return e.onValueChange(t,e.tab)}),s.lc(168,"translate"),s.ac(),s.ac(),s.ac(),s.bc(169,"div",14),s.bc(170,"select",15),s.ic("ngModelChange",function(t){return e.tabUnAssignedParams.status=t})("change",function(t){return e.onChangeStatus(t,e.tab)}),s.bc(171,"option",16),s.Mc(172),s.lc(173,"translate"),s.ac(),s.bc(174,"option",17),s.Mc(175),s.lc(176,"translate"),s.ac(),s.bc(177,"option",18),s.Mc(178),s.lc(179,"translate"),s.ac(),s.bc(180,"option",19),s.Mc(181),s.lc(182,"translate"),s.ac(),s.ac(),s.ac(),s.bc(183,"div",14),s.bc(184,"select",20),s.ic("ngModelChange",function(t){return e.tabUnAssignedParams.ownerId=t})("change",function(t){return e.onChangeOwner(t,e.tab)}),s.bc(185,"option",16),s.Mc(186),s.lc(187,"translate"),s.ac(),s.Kc(188,We,2,2,"option",21),s.ac(),s.ac(),s.bc(189,"div",22),s.bc(190,"input",36),s.ic("ngModelChange",function(t){return e.tabUnAssignedParams.keyword=t})("keyup.enter",function(){return e.onSearchTask(e.tab)}),s.lc(191,"translate"),s.ac(),s.bc(192,"button",24),s.ic("click",function(){return e.onSearchTask(e.tab)}),s.Wb(193,"span",25),s.ac(),s.ac(),s.ac(),s.bc(194,"div",26),s.Kc(195,Re,5,0,"div",27),s.bc(196,"table",28),s.bc(197,"thead"),s.bc(198,"tr"),s.bc(199,"th"),s.Mc(200),s.lc(201,"translate"),s.ac(),s.bc(202,"th",29),s.Mc(203),s.lc(204,"translate"),s.ac(),s.bc(205,"th"),s.Mc(206),s.lc(207,"translate"),s.ac(),s.bc(208,"th"),s.Mc(209),s.lc(210,"translate"),s.ac(),s.bc(211,"th"),s.Mc(212),s.lc(213,"translate"),s.ac(),s.bc(214,"th"),s.Mc(215),s.lc(216,"translate"),s.ac(),s.bc(217,"th"),s.Mc(218),s.lc(219,"translate"),s.ac(),s.bc(220,"th"),s.Mc(221),s.lc(222,"translate"),s.ac(),s.ac(),s.ac(),s.bc(223,"tbody"),s.Kc(224,$e,22,18,"tr",30),s.ac(),s.ac(),s.Kc(225,Ge,7,6,"div",31),s.Kc(226,ze,17,8,"div",31),s.ac(),s.ac(),s.ac(),s.ac()),2&t&&(s.Jb(3),s.Oc(" ",s.mc(4,86,"task_manager_list_title"),""),s.Jb(7),s.qc("ngIf",e.authService.hasPermission("/main/task","Add")),s.Jb(2),s.qc("ngIf",e.authService.hasPermission("/main/task","Add")),s.Jb(2),s.rc("heading",s.mc(15,88,"task_manager_tab_my_task_assigned_title")),s.Jb(6),s.Nc(s.mc(21,90,"task_manager_task_date")),s.Jb(3),s.rc("placeholder",s.mc(24,92,"task_manager_task_date")),s.qc("bsConfig",s.uc(194,He,e.dateRangeConfig))("bsValue",e.dateRangeTabMyAssigned),s.Jb(3),s.qc("ngModel",e.tabMyAssignedParams.status),s.Jb(2),s.Nc(s.mc(29,94,"task_manager_task_status")),s.Jb(3),s.Nc(s.mc(32,96,"task_manager_status_created")),s.Jb(3),s.Nc(s.mc(35,98,"task_manager_status_process")),s.Jb(3),s.Nc(s.mc(38,100,"task_manager_status_finish")),s.Jb(3),s.qc("ngModel",e.tabMyAssignedParams.ownerId),s.Jb(2),s.Nc(s.mc(43,102,"task_manager_task_owner")),s.Jb(2),s.qc("ngForOf",e.userList),s.Jb(2),s.rc("placeholder",s.mc(47,104,"filter_title")),s.qc("ngModel",e.tabMyAssignedParams.keyword),s.Jb(5),s.qc("ngIf",e.loading),s.Jb(5),s.Nc(s.mc(57,106,"task_manager_task_number")),s.Jb(3),s.Nc(s.mc(60,108,"task_manager_task_title")),s.Jb(3),s.Nc(s.mc(63,110,"task_manager_task_date")),s.Jb(3),s.Nc(s.mc(66,112,"task_manager_task_due_date")),s.Jb(3),s.Nc(s.mc(69,114,"task_manager_task_actual_date")),s.Jb(3),s.Nc(s.mc(72,116,"task_manager_task_status")),s.Jb(3),s.Nc(s.mc(75,118,"task_manager_task_finished")),s.Jb(3),s.Nc(s.mc(78,120,"title_action")),s.Jb(3),s.qc("ngForOf",e.taskListMyAssigned),s.Jb(1),s.qc("ngIf",e.taskListMyAssigned&&0==e.taskListMyAssigned.length),s.Jb(1),s.qc("ngIf",e.taskListMyAssigned&&e.taskListMyAssigned.length>0),s.Jb(1),s.rc("heading",s.mc(84,122,"task_manager_tab_task_follow_title")),s.Jb(6),s.Nc(s.mc(90,124,"task_manager_task_date")),s.Jb(3),s.rc("placeholder",s.mc(93,126,"task_manager_task_date")),s.qc("bsConfig",s.uc(196,He,e.dateRangeConfig))("bsValue",e.dateRangeTabMyFollowed),s.Jb(3),s.qc("ngModel",e.tabMyFollowedParams.status),s.Jb(2),s.Nc(s.mc(98,128,"task_manager_task_status")),s.Jb(3),s.Nc(s.mc(101,130,"task_manager_status_created")),s.Jb(3),s.Nc(s.mc(104,132,"task_manager_status_process")),s.Jb(3),s.Nc(s.mc(107,134,"task_manager_status_finish")),s.Jb(3),s.qc("ngModel",e.tabMyFollowedParams.assignedTo),s.Jb(2),s.Nc(s.mc(112,136,"task_manager_task_assigned")),s.Jb(2),s.qc("ngForOf",e.userList),s.Jb(2),s.rc("placeholder",s.mc(116,138,"filter_title")),s.qc("ngModel",e.tabMyFollowedParams.keyword),s.Jb(5),s.qc("ngIf",e.loading),s.Jb(5),s.Nc(s.mc(126,140,"task_manager_task_number")),s.Jb(3),s.Nc(s.mc(129,142,"task_manager_task_title")),s.Jb(3),s.Nc(s.mc(132,144,"task_manager_task_date")),s.Jb(3),s.Nc(s.mc(135,146,"task_manager_task_owner")),s.Jb(3),s.Nc(s.mc(138,148,"task_manager_task_assigned")),s.Jb(3),s.Nc(s.mc(141,150,"task_manager_task_due_date")),s.Jb(3),s.Nc(s.mc(144,152,"task_manager_task_actual_date")),s.Jb(3),s.Nc(s.mc(147,154,"task_manager_task_status")),s.Jb(3),s.Nc(s.mc(150,156,"task_manager_task_finished")),s.Jb(3),s.Nc(s.mc(153,158,"title_action")),s.Jb(3),s.qc("ngForOf",e.taskListMyFollowed),s.Jb(1),s.qc("ngIf",e.taskListMyFollowed&&0==e.taskListMyFollowed.length),s.Jb(1),s.qc("ngIf",e.taskListMyFollowed&&e.taskListMyFollowed.length>0),s.Jb(1),s.rc("heading",s.mc(159,160,"task_manager_tab_task_unassigned_title")),s.Jb(6),s.Nc(s.mc(165,162,"task_manager_task_date")),s.Jb(3),s.rc("placeholder",s.mc(168,164,"task_manager_task_date")),s.qc("bsConfig",s.uc(198,He,e.dateRangeConfig))("bsValue",e.dateRangeTabUnAssigned),s.Jb(3),s.qc("ngModel",e.tabUnAssignedParams.status),s.Jb(2),s.Nc(s.mc(173,166,"task_manager_task_status")),s.Jb(3),s.Nc(s.mc(176,168,"task_manager_status_created")),s.Jb(3),s.Nc(s.mc(179,170,"task_manager_status_process")),s.Jb(3),s.Nc(s.mc(182,172,"task_manager_status_finish")),s.Jb(3),s.qc("ngModel",e.tabUnAssignedParams.ownerId),s.Jb(2),s.Nc(s.mc(187,174,"task_manager_task_owner")),s.Jb(2),s.qc("ngForOf",e.userList),s.Jb(2),s.rc("placeholder",s.mc(191,176,"filter_title")),s.qc("ngModel",e.tabUnAssignedParams.keyword),s.Jb(5),s.qc("ngIf",e.loading),s.Jb(5),s.Nc(s.mc(201,178,"task_manager_task_number")),s.Jb(3),s.Nc(s.mc(204,180,"task_manager_task_title")),s.Jb(3),s.Nc(s.mc(207,182,"task_manager_task_date")),s.Jb(3),s.Nc(s.mc(210,184,"task_manager_task_owner")),s.Jb(3),s.Nc(s.mc(213,186,"task_manager_task_assigned")),s.Jb(3),s.Nc(s.mc(216,188,"task_manager_task_due_date")),s.Jb(3),s.Nc(s.mc(219,190,"task_manager_task_actual_date")),s.Jb(3),s.Nc(s.mc(222,192,"title_action")),s.Jb(3),s.qc("ngForOf",e.taskListUnassigned),s.Jb(1),s.qc("ngIf",e.taskListUnassigned&&0==e.taskListUnassigned.length),s.Jb(1),s.qc("ngIf",e.taskListUnassigned&&e.taskListUnassigned.length>0))},directives:[i.m,v.c,v.a,k.e,k.d,b.t,b.k,b.n,b.o,b.v,i.l,b.b,Ie.a],pipes:[r.c,i.e,O],styles:[".panel-filter[_ngcontent-%COMP%]{margin:20px 0}.panel-search[_ngcontent-%COMP%]{display:inline-flex}.panel-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0}.task-add-new[_ngcontent-%COMP%]{float:right}@media (max-width:1200px){.task-add-new[_ngcontent-%COMP%]{float:none}}.view-options[_ngcontent-%COMP%]{text-align:right;margin-top:20px}.view-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:auto;display:inline-block}.select-task[_ngcontent-%COMP%]{cursor:pointer}.select-task[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}.col-title[_ngcontent-%COMP%]{width:35%}.label-created-date[_ngcontent-%COMP%]{padding-top:5px;text-align:right}.action-delete-task[_ngcontent-%COMP%]{margin-right:5px}.action-task[_ngcontent-%COMP%]{font-size:15px}"]}),t})();const Ye=["modalAddEdit"];function Xe(t,e){if(1&t){const t=s.cc();s.bc(0,"button",31),s.ic("click",function(){return s.Ec(t),s.kc().showCreateTaskModel()}),s.Wb(1,"span",45),s.Mc(2),s.lc(3,"translate"),s.ac()}2&t&&(s.Jb(2),s.Oc(" ",s.mc(3,1,"add_new"),""))}function Ze(t,e){1&t&&(s.bc(0,"div"),s.Wb(1,"img",46),s.Mc(2," \xa0"),s.bc(3,"span"),s.Mc(4,"\u0110ang t\u1ea3i d\u1eef li\u1ec7u"),s.ac(),s.ac())}function ta(t,e){if(1&t&&(s.bc(0,"th"),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.Nc(t.Caption)}}function ea(t,e){if(1&t&&(s.bc(0,"span"),s.Mc(1),s.ac()),2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.Jb(1),s.Nc(e[t.Name])}}function aa(t,e){if(1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"date"),s.ac()),2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.Jb(1),s.Nc(s.nc(2,1,e[t.Name],"dd/MM/yyyy"))}}function ia(t,e){if(1&t&&(s.bc(0,"td"),s.Kc(1,ea,2,1,"span",38),s.Kc(2,aa,3,4,"span",38),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.qc("ngIf","TaskItemDate"!=t.Name&&"JobFileDate"!=t.Name&&"JobItemDate"!=t.Name),s.Jb(1),s.qc("ngIf","TaskItemDate"==t.Name||"JobFileDate"==t.Name||"JobItemDate"==t.Name)}}function ca(t,e){if(1&t){const t=s.cc();s.bc(0,"tr"),s.bc(1,"td",17),s.bc(2,"input",47),s.ic("change",function(a){s.Ec(t);const i=e.$implicit;return s.kc().onCheckedChange(a.target.checked,i)})("ngModelChange",function(t){return e.$implicit.checked=t}),s.ac(),s.ac(),s.Kc(3,ia,3,2,"td",43),s.ac()}if(2&t){const t=e.$implicit,a=s.kc();s.Jb(2),s.qc("ngModel",t.checked),s.Jb(1),s.qc("ngForOf",a.displayColumns)}}function na(t,e){1&t&&(s.bc(0,"div",48),s.bc(1,"div",49),s.bc(2,"strong"),s.Mc(3),s.lc(4,"translate"),s.ac(),s.Mc(5),s.lc(6,"translate"),s.ac(),s.ac()),2&t&&(s.Jb(3),s.Oc("",s.mc(4,2,"dialog_alert_title"),"!"),s.Jb(2),s.Oc(" ",s.mc(6,4,"task_manager_task_notice_list_empty")," "))}function sa(t,e){if(1&t){const t=s.cc();s.bc(0,"div",48),s.bc(1,"div",50),s.bc(2,"pagination",51),s.ic("pageChanged",function(e){return s.Ec(t),s.kc().pageChanged(e)})("ngModelChange",function(e){return s.Ec(t),s.kc().pageNumber=e}),s.ac(),s.ac(),s.bc(3,"div",52),s.bc(4,"div",53),s.bc(5,"label",54),s.Mc(6),s.lc(7,"translate"),s.ac(),s.bc(8,"select",55),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc().pageSize=e})("change",function(){return s.Ec(t),s.kc().onChangePageSize()}),s.bc(9,"option",56),s.Mc(10,"10"),s.ac(),s.bc(11,"option",57),s.Mc(12,"20"),s.ac(),s.bc(13,"option",58),s.Mc(14,"50"),s.ac(),s.bc(15,"option",59),s.Mc(16,"100"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()}if(2&t){const t=s.kc();s.Jb(2),s.qc("boundaryLinks",!0)("itemsPerPage",t.pageSize)("totalItems",t.totalRow)("ngModel",t.pageNumber),s.Jb(4),s.Oc("",s.mc(7,6,"show_row")," \xa0"),s.Jb(2),s.qc("ngModel",t.pageSize)}}const oa=function(t){return{rangeInputFormat:"DD/MM/YYYY",ranges:t}};let ra=(()=>{class t{constructor(t,e,a,i,c){this.authService=t,this.dataService=e,this.notificationService=a,this.modalService=i,this.utilityService=c,this.fromDate=new Date,this.toDate=new Date,this.serviceType="",this.contactCode="",this.VAN_DON="",this.SOTK="",this.transportMode=1,this.portOfLoading="",this.portOfDischarge="",this.pageNumber=1,this.pageSize=20,this.pageDisplay=10,this.filter="",this.Customer={},this.loading=!1,this.checkedAll=!1,this.dateRangeConfig=[{value:[new Date,new Date],label:"H\xf4m nay"},{value:[new Date((new Date).setDate((new Date).getDate()-7)),new Date],label:"7 ng\xe0y tr\u01b0\u1edbc"},{value:[new Date((new Date).setDate((new Date).getDate()-30)),new Date],label:"30 ng\xe0y tr\u01b0\u1edbc"},{value:[new Date((new Date).setDate(1)),new Date],label:"T\u1eeb \u0111\u1ea7u th\xe1ng"},{value:[new Date((new Date).getFullYear(),0,1),new Date],label:"T\u1eeb \u0111\u1ea7u n\u0103m"}],this.ColumnSettings=[{Name:"JobItemDate",Caption:"Ng\xe0y ph\xe1t sinh",Width:120,CustomSettings:""},{Name:"CustomsCode",Caption:"Kh\xe1ch H\xe0ng",Width:120,CustomSettings:""},{Name:"JobFileId",Caption:"S\u1ed1 l\xf4 h\xe0ng",Width:120,CustomSettings:"TaskAdmins"},{Name:"SOTK",Caption:"S\u1ed1 t\u1edd khai",Width:120,CustomSettings:""},{Name:"VAN_DON",Caption:"V\u1eadn \u0111\u01a1n",Width:120,CustomSettings:""},{Name:"VAN_DON_MAWB",Caption:"V\u1eadn \u0111\u01a1n MAWB",Width:120,CustomSettings:""},{Name:"GroupCode",Caption:"Group Code",Width:120,CustomSettings:""},{Name:"SO_KIEN",Caption:"S\u1ed1 l\u01b0\u1ee3ng ki\u1ec7n",Width:100,CustomSettings:""},{Name:"TR_LUONG",Caption:"Tr\u1ecdng l\u01b0\u1ee3ng",Width:100,CustomSettings:""},{Name:"TEN_DD_LUU_KHO",Caption:"\u0110\u1ecba \u0111i\u1ec3m l\u01b0u kho ",Width:100,CustomSettings:""},{Name:"Description",Caption:"Di\u1ec5n gi\u1ea3i",Width:120,CustomSettings:""}]}ngOnInit(){this.dateRange=[this.fromDate,this.toDate],this.loadData();const t=this.authService.getLoggedInUser(),e=t.roles.length>0?t.roles[0]:"";this.displayColumns=this.ColumnSettings.filter(t=>""===t.CustomSettings||t.CustomSettings.includes(e))}loadData(){this.loading=!0;let t=[];t.push("@FromDate",this.fromDate,"@ToDate",this.toDate,"@StateId",0,"@XorN",this.serviceType,"@TransportType",this.transportMode,"@ContactCode",this.contactCode,"@PortOfLoading",this.portOfLoading,"@PortOfDischarge",this.portOfDischarge,"@SOTK",this.SOTK,"@VAN_DON",this.VAN_DON,"@VAN_DON_MAWB","","@PageNumber",this.pageNumber,"@PageSize",this.pageSize,"@Sort","JobItemDate","@Direction","DESC","@Description",this.keyword),this.dataService.post("/commands/paged",{CommandText:"uspTaskItem___SearchAvaiableOnJobItem",CommandType:1025,Parameters:t}).subscribe(t=>{this.taskItems=t.Data,this.totalRow=t.TotalItems,this.checkedAll=!1,this.ConverCustomer(),this.loading=!1})}onChangeTransportMode(){this.loadData()}onValueChangeDateRange(t){null!=t&&(this.fromDate=t[0],this.fromDate.setTime(this.fromDate.getTime()-6e4*this.fromDate.getTimezoneOffset()),this.toDate=t[1],this.toDate.setTime(this.toDate.getTime()-6e4*this.toDate.getTimezoneOffset()),this.loadData())}changeServiceType(t){this.serviceType="All"==t?"":t,this.loadData()}onCheckedChange(t,e){this.taskItems.find(t=>t.JobItemId==e.JobItemId).checked=!!t}selectAll(t){this.taskItems.forEach(0==t?t=>{t.checked=!1}:t=>{t.checked=!0})}loadTaskItem(t){this.dataService.get("/appTaskItem/detail/"+t).subscribe(t=>{this.entity=t})}pageChanged(t){this.pageNumber=t.page,this.loadData()}onChangePageSize(){this.loadData()}loadLocation(){this.dataService.post("/commands",{CommandText:"GetLocaitonByLocationType",CommandType:1025}).subscribe(t=>{this.locations=t.Data})}showCreateTaskModel(){let t=this.taskItems.filter(t=>t.checked);this.bsModalRef=this.modalService.show(ht,{initialState:{extenalTaskItems:t},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(t=>{t&&"Submit"==t.data&&this.loadData()})}showAddModal(){this.entity={},this.modalAddEdit.show()}showEditModal(t){this.loadTaskItem(t),this.modalAddEdit.show()}deleteItem(t){this.notificationService.printConfirmationDialog(d.a.CONFIRM_DELETE_MSG,()=>this.deleteItemConfirm(t))}deleteItemConfirm(t){}ConverCustomer(){if(this.taskItems)for(const t of this.taskItems)this.dataService.get("/Contacts/"+t.CustomerId).subscribe(e=>{e&&(this.Customer=e,t.CustomsCode=this.Customer.Code,t.CustomerName=this.Customer.Name)})}goBack(){this.utilityService.navigate("/main/task")}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(u.a),s.Vb(f.a),s.Vb(g.a),s.Vb(o.b),s.Vb(Ce.a))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-alc-task-item-list"]],viewQuery:function(t,e){if(1&t&&s.Qc(Ye,1),2&t){let t;s.zc(t=s.jc())&&(e.modalAddEdit=t.first)}},decls:93,vars:65,consts:[[1,"x_title"],[1,"fa","fa-tasks"],[1,"panel-filter"],[1,"row"],[1,"col-md-1","col-sm-6","col-xs-12","form-group","label-created-date"],[1,"text-left"],[1,"col-md-3","col-sm-6","col-xs-12","form-group"],["type","text","bsDaterangepicker","",1,"form-control",3,"placeholder","bsConfig","bsValue","bsValueChange"],[1,"col-md-2","col-sm-6","col-xs-12","form-group"],["name","transport_mode",1,"form-control",3,"ngModel","ngModelChange","change"],["value","0"],["value","1"],["value","2"],["value","3"],["value","9"],[1,"col-md-6","col-sm-6","col-xs-12","form-group","filter-service-type"],[1,"col-md-2","col-sm-6","col-xs-12",2,"text-align","right","vertical-align","middle"],[2,"text-align","center"],[1,"col-md-8","col-sm-6","col-xs-12",2,"text-align","left"],["for","import_export"],["id","import_export","type","radio","value","All","name","serviceType",3,"change"],["for","import"],["id","import","type","radio","value","N","name","serviceType",3,"checked","change"],["for","export"],["id","export","type","radio","value","X","name","serviceType",3,"change"],[1,"col-md-1","col-sm-6","col-xs-12","form-group"],["type","text","name","contactCode",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["type","text","name","VAN_DON",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["type","text","name","SOTK",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],[1,"col-md-4","col-sm-6","col-xs-12","form-group","panel-search"],["type","text","name","keyword",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-search"],[1,"col-md-6","col-sm-6","col-xs-6"],["type","button",1,"btn","btn-default",3,"click"],["aria-hidden","true",1,"fa","fa-backward"],[1,"btn-add-new"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],[4,"ngIf"],[1,"table-responsive"],[1,"table","table-bordered"],[2,"text-align","center","width","50px"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],["class","col-md-12",4,"ngIf"],["aria-hidden","true",1,"glyphicon","glyphicon-plus"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="],["type","checkbox",1,"form-check-input",3,"ngModel","change","ngModelChange"],[1,"col-md-12"],[1,"alert","alert-info"],[1,"col-md-8"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","itemsPerPage","totalItems","ngModel","pageChanged","ngModelChange"],[1,"col-md-4"],[1,"form-group","view-options"],["for",""],["name","page-size",1,"form-control",3,"ngModel","ngModelChange","change"],["value","10"],["value","20"],["value","50"],["value","100"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.bc(1,"h3"),s.Wb(2,"i",1),s.Mc(3),s.lc(4,"translate"),s.ac(),s.ac(),s.Wb(5,"br"),s.bc(6,"div",2),s.bc(7,"div",3),s.bc(8,"div",4),s.bc(9,"span",5),s.Mc(10),s.lc(11,"translate"),s.ac(),s.ac(),s.bc(12,"div",6),s.bc(13,"input",7),s.ic("bsValueChange",function(t){return e.dateRange=t})("bsValueChange",function(t){return e.onValueChangeDateRange(t)}),s.lc(14,"translate"),s.ac(),s.ac(),s.bc(15,"div",8),s.bc(16,"select",9),s.ic("ngModelChange",function(t){return e.transportMode=t})("change",function(){return e.onChangeTransportMode()}),s.bc(17,"option",10),s.Mc(18),s.lc(19,"translate"),s.ac(),s.bc(20,"option",11),s.Mc(21),s.lc(22,"translate"),s.ac(),s.bc(23,"option",12),s.Mc(24),s.lc(25,"translate"),s.ac(),s.bc(26,"option",13),s.Mc(27),s.lc(28,"translate"),s.ac(),s.bc(29,"option",14),s.Mc(30),s.lc(31,"translate"),s.ac(),s.ac(),s.ac(),s.bc(32,"div",15),s.bc(33,"div",16),s.bc(34,"span",17),s.Mc(35,"Lo\u1ea1i h\xecnh"),s.ac(),s.ac(),s.bc(36,"div",18),s.bc(37,"div"),s.bc(38,"label",19),s.bc(39,"input",20),s.ic("change",function(){return e.changeServiceType("All")}),s.ac(),s.Mc(40),s.lc(41,"translate"),s.ac(),s.ac(),s.bc(42,"div"),s.bc(43,"label",21),s.bc(44,"input",22),s.ic("change",function(){return e.changeServiceType("N")}),s.ac(),s.Mc(45),s.lc(46,"translate"),s.ac(),s.ac(),s.bc(47,"div"),s.bc(48,"label",23),s.bc(49,"input",24),s.ic("change",function(){return e.changeServiceType("X")}),s.ac(),s.Mc(50),s.lc(51,"translate"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(52,"div",3),s.bc(53,"div",25),s.bc(54,"span"),s.Mc(55,"L\u1ecdc theo"),s.ac(),s.ac(),s.bc(56,"div",6),s.bc(57,"input",26),s.ic("ngModelChange",function(t){return e.contactCode=t})("keyup.enter",function(){return e.loadData()}),s.lc(58,"translate"),s.ac(),s.ac(),s.bc(59,"div",8),s.bc(60,"input",27),s.ic("ngModelChange",function(t){return e.VAN_DON=t})("keyup.enter",function(){return e.loadData()}),s.lc(61,"translate"),s.ac(),s.ac(),s.bc(62,"div",8),s.bc(63,"input",28),s.ic("ngModelChange",function(t){return e.SOTK=t})("keyup.enter",function(){return e.loadData()}),s.lc(64,"translate"),s.ac(),s.ac(),s.bc(65,"div",29),s.bc(66,"input",30),s.ic("ngModelChange",function(t){return e.keyword=t})("keyup.enter",function(){return e.loadData()}),s.lc(67,"translate"),s.ac(),s.bc(68,"button",31),s.ic("click",function(){return e.loadData()}),s.Wb(69,"span",32),s.ac(),s.ac(),s.ac(),s.ac(),s.Wb(70,"hr"),s.bc(71,"div",3),s.bc(72,"div",33),s.bc(73,"div"),s.bc(74,"button",34),s.ic("click",function(){return e.goBack()}),s.Wb(75,"i",35),s.Mc(76),s.lc(77,"translate"),s.ac(),s.ac(),s.ac(),s.bc(78,"div",33),s.bc(79,"div",36),s.Kc(80,Xe,4,3,"button",37),s.ac(),s.ac(),s.ac(),s.Kc(81,Ze,5,0,"div",38),s.bc(82,"div",39),s.bc(83,"table",40),s.bc(84,"thead"),s.bc(85,"tr"),s.bc(86,"th",41),s.bc(87,"input",42),s.ic("ngModelChange",function(t){return e.checkedAll=t})("change",function(t){return e.selectAll(!!t.target.checked)}),s.ac(),s.ac(),s.Kc(88,ta,2,1,"th",43),s.ac(),s.ac(),s.bc(89,"tbody"),s.Kc(90,ca,4,2,"tr",43),s.ac(),s.ac(),s.Kc(91,na,7,6,"div",44),s.Kc(92,sa,17,8,"div",44),s.ac()),2&t&&(s.Jb(3),s.Oc(" ",s.mc(4,31,"task_manager_task_category_item"),""),s.Jb(7),s.Nc(s.mc(11,33,"date_range")),s.Jb(3),s.rc("placeholder",s.mc(14,35,"task_manager_task_date")),s.qc("bsConfig",s.uc(63,oa,e.dateRangeConfig))("bsValue",e.dateRange),s.Jb(3),s.qc("ngModel",e.transportMode),s.Jb(2),s.Nc(s.mc(19,37,"task_manager_task_category_transport_mode")),s.Jb(3),s.Nc(s.mc(22,39,"task_manager_task_category_air")),s.Jb(3),s.Nc(s.mc(25,41,"task_manager_task_category_sea_fcl")),s.Jb(3),s.Nc(s.mc(28,43,"task_manager_task_category_sea_lcl")),s.Jb(3),s.Nc(s.mc(31,45,"task_manager_task_category_other")),s.Jb(10),s.Oc(" ",s.mc(41,47,"common_all"),""),s.Jb(4),s.qc("checked",!0),s.Jb(1),s.Oc(" ",s.mc(46,49,"logistics_import"),""),s.Jb(5),s.Oc(" ",s.mc(51,51,"logistics_export"),""),s.Jb(7),s.rc("placeholder",s.mc(58,53,"task_manager_task_item_customer")),s.qc("ngModel",e.contactCode),s.Jb(3),s.rc("placeholder",s.mc(61,55,"task_manager_task_item_van_don")),s.qc("ngModel",e.VAN_DON),s.Jb(3),s.rc("placeholder",s.mc(64,57,"task_manager_task_item_so_to_khai")),s.qc("ngModel",e.SOTK),s.Jb(3),s.rc("placeholder",s.mc(67,59,"filter_title_of_description")),s.qc("ngModel",e.keyword),s.Jb(10),s.Oc(" ",s.mc(77,61,"button_back"),""),s.Jb(4),s.qc("ngIf",e.authService.hasPermission("/main/task/alcTaskItem","Add")),s.Jb(1),s.qc("ngIf",e.loading),s.Jb(6),s.qc("ngModel",e.checkedAll),s.Jb(1),s.qc("ngForOf",e.displayColumns),s.Jb(2),s.qc("ngForOf",e.taskItems),s.Jb(1),s.qc("ngIf",e.taskItems&&0==e.taskItems.length),s.Jb(1),s.qc("ngIf",e.taskItems&&e.taskItems.length>0))},directives:[k.e,k.d,b.t,b.k,b.n,b.o,b.v,b.b,i.m,b.a,i.l,Ie.a],pipes:[r.c,i.e],styles:[".panel-search[_ngcontent-%COMP%]{display:inline-flex}.panel-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;margin-right:0}.filter-service-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;padding-right:10px}.btn-add-new[_ngcontent-%COMP%], .view-options[_ngcontent-%COMP%]{text-align:right}.view-options[_ngcontent-%COMP%]{margin-top:20px}.view-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:auto;display:inline-block}.label-created-date[_ngcontent-%COMP%]{padding-top:5px}"]}),t})();function la(t,e){1&t&&(s.bc(0,"h4",24),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"task_manager_create_new_task")))}function da(t,e){1&t&&(s.bc(0,"h4",24),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"task_manager_update_task")))}function ba(t,e){1&t&&(s.bc(0,"small",25),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function ma(t,e){1&t&&(s.bc(0,"small",25),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function ha(t,e){1&t&&(s.bc(0,"small",25),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function ga(t,e){1&t&&(s.bc(0,"small",25),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function ua(t,e){1&t&&(s.bc(0,"small",25),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function pa(t,e){1&t&&(s.bc(0,"small",25),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function fa(t,e){1&t&&(s.bc(0,"small",25),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function ka(t,e){1&t&&(s.bc(0,"small",25),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function _a(t,e){1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"button_add")))}function va(t,e){1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"button_update")))}let Ma=(()=>{class t{constructor(t,e,a,i,c,n,o){this.bsModalRef=t,this.notificationService=e,this.datePipe=a,this._authenService=i,this.formBuilder=c,this.formErrors=n,this.dataService=o,this.list=[],this.errors={},this.id=0,this.loading=!1,this.initTiny={base_url:"/tinymce",height:250,language:"vi_VN",skin_url:"./assets/tinymce/skins/lightgray",language_url:"./assets/tinymce/langs/vi_VN.js",plugins:"autosave autolink code codesample colorpicker emoticons fullscreen hr preview table textcolor wordcount",toolbar:"undo redo forecolor cut copy paste fontselect styleselect bold italic link preview code alignleft aligncenter alignright alignjustify"},this.vehicle={},this.event=new s.q,this.bsValue=new Date,this.maxProgressbar=0,this.progressing=0,this.hasTaskvehicle=!1,this.initForm()}ngOnInit(){var t=this._authenService.getLoggedInUser();this.getUserIdLogin(t.userName),this.getListUser(),this.fillFormData()}getUserIdLogin(t){if(t){let e=[];e.push("@UserName",t),this.dataService.post("/commands",{CommandText:"uspUser___FindUserName",CommandType:1025,Parameters:e}).subscribe(t=>{t.Data&&(this.userLoginId=t.Data[0].Id)})}}getListUser(){let t=[];t.push("@ActivatedOnly",1),this.dataService.post("/commands",{CommandText:"uspUser___Fill",CommandType:1025,Parameters:t}).subscribe(t=>{t.Data&&(this.userList=t.Data)})}initForm(){this.vehicleModel=this.formBuilder.group({id:["",b.u.required],Code:["",b.u.required],Name:["",b.u.required],EmplyeeId:["",b.u.required],VehicleType:["",b.u.required],Length:["",b.u.required],Wide:["",b.u.required],Hieght:["",b.u.required],Tonnage:["",b.u.required],Description:["",b.u.required]}),Object.keys(this.vehicleModel.controls).forEach(t=>{this.errors[t]=""}),this.vehicleModel.valueChanges.subscribe(t=>{this.errors=this.formErrors.validateForm(this.vehicleModel,this.errors,!0)})}triggerEvent(t){this.event.emit({data:t})}onSubmit(t){const e=this.formatFormData(t);this.id?e.ChangedBy=this.userLoginId:(e.CreatedBy=this.userLoginId,e.OwnerId=this.userLoginId),console.log(e),this.dataService.post("/Vehicles",e).subscribe(t=>{this.notificationService.printSuccessMessage(this.id?d.a.UPDATED_OK_MSG:d.a.CREATED_OK_MSG),this.triggerEvent("Submit"),this.bsModalRef.hide()},t=>this.dataService.handleError(t))}formatFormData(t){let e={};return t&&Object.keys(this.vehicleModel.controls).forEach(a=>{e[a]=t[a]?t[a]:null}),e}onClose(){this.triggerEvent("Close"),this.bsModalRef.hide()}fillFormData(){0!=this.id&&this.dataService.get("/Vehicles/"+this.id).subscribe(t=>{this.vehicle=t,Object.keys(this.vehicleModel.controls).forEach(t=>{"id"!=t&&this.vehicleModel.controls[t].setValue(this.vehicle[t]?this.vehicle[t]:"")})})}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(o.a),s.Vb(g.a),s.Vb(i.e),s.Vb(u.a),s.Vb(b.c),s.Vb(p.a),s.Vb(f.a))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-vehicle-detail"]],decls:90,vars:49,consts:[[1,"modal-header"],["class","modal-title pull-left",4,"ngIf"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],["autocomplete","off","standalone","",1,"form-horizontal","form-label-left","input_mask",3,"formGroup","ngSubmit"],["type","number","formControlName","id",1,"hidden",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-md-4","col-sm-4","col-xs-12"],[1,"form-group"],["type","text","required","","minlength","3","formControlName","Code",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],[1,"col-md-8","col-sm-8","col-xs-12"],["type","text","required","","minlength","3","formControlName","Name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","VehicleType",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","Length",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","Wide",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","Hieght",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","Tonnage",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","Description",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","button-submit",3,"click"],[4,"ngIf"],["type","button",1,"btn","btn-default",3,"click"],[1,"modal-title","pull-left"],[1,"text-danger"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.Kc(1,la,3,3,"h4",1),s.Kc(2,da,3,3,"h4",1),s.bc(3,"button",2),s.ic("click",function(){return e.onClose()}),s.bc(4,"span",3),s.Mc(5,"\xd7"),s.ac(),s.ac(),s.ac(),s.bc(6,"div",4),s.bc(7,"form",5),s.ic("ngSubmit",function(){return e.onSubmit(e.vehicleModel.value)}),s.bc(8,"input",6),s.ic("ngModelChange",function(t){return e.id=t}),s.ac(),s.bc(9,"div",7),s.bc(10,"div",8),s.bc(11,"div",9),s.bc(12,"p"),s.bc(13,"strong"),s.Mc(14),s.lc(15,"translate"),s.ac(),s.ac(),s.bc(16,"div"),s.bc(17,"input",10),s.ic("ngModelChange",function(t){return e.Code=t}),s.ac(),s.Kc(18,ba,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.bc(19,"div",12),s.bc(20,"div",9),s.bc(21,"p"),s.bc(22,"strong"),s.Mc(23),s.lc(24,"translate"),s.ac(),s.ac(),s.bc(25,"div"),s.bc(26,"input",13),s.ic("ngModelChange",function(t){return e.Name=t}),s.ac(),s.Kc(27,ma,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(28,"div",7),s.bc(29,"div",8),s.bc(30,"div",9),s.bc(31,"p"),s.bc(32,"strong"),s.Mc(33),s.lc(34,"translate"),s.ac(),s.ac(),s.bc(35,"div"),s.bc(36,"input",14),s.ic("ngModelChange",function(t){return e.VehicleType=t}),s.ac(),s.Kc(37,ha,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.bc(38,"div",8),s.bc(39,"div",9),s.bc(40,"p"),s.bc(41,"strong"),s.Mc(42),s.lc(43,"translate"),s.ac(),s.ac(),s.bc(44,"div"),s.bc(45,"input",15),s.ic("ngModelChange",function(t){return e.Length=t}),s.ac(),s.Kc(46,ga,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.bc(47,"div",8),s.bc(48,"div",9),s.bc(49,"p"),s.bc(50,"strong"),s.Mc(51),s.lc(52,"translate"),s.ac(),s.ac(),s.bc(53,"div"),s.bc(54,"input",16),s.ic("ngModelChange",function(t){return e.Wide=t}),s.ac(),s.Kc(55,ua,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.bc(56,"div",8),s.bc(57,"div",9),s.bc(58,"p"),s.bc(59,"strong"),s.Mc(60),s.lc(61,"translate"),s.ac(),s.ac(),s.bc(62,"div"),s.bc(63,"input",17),s.ic("ngModelChange",function(t){return e.Hieght=t}),s.ac(),s.Kc(64,pa,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.bc(65,"div",8),s.bc(66,"div",9),s.bc(67,"p"),s.bc(68,"strong"),s.Mc(69),s.lc(70,"translate"),s.ac(),s.ac(),s.bc(71,"div"),s.bc(72,"input",18),s.ic("ngModelChange",function(t){return e.Tonnage=t}),s.ac(),s.Kc(73,fa,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.bc(74,"div",8),s.bc(75,"div",9),s.bc(76,"p"),s.bc(77,"strong"),s.Mc(78),s.lc(79,"translate"),s.ac(),s.ac(),s.bc(80,"div"),s.bc(81,"input",19),s.ic("ngModelChange",function(t){return e.Description=t}),s.ac(),s.Kc(82,ka,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(83,"div",20),s.bc(84,"button",21),s.ic("click",function(){return e.onSubmit(e.vehicleModel.value)}),s.Kc(85,_a,3,3,"span",22),s.Kc(86,va,3,3,"span",22),s.ac(),s.bc(87,"button",23),s.ic("click",function(){return e.onClose()}),s.Mc(88),s.lc(89,"translate"),s.ac(),s.ac()),2&t&&(s.Jb(1),s.qc("ngIf",!e.id),s.Jb(1),s.qc("ngIf",e.id),s.Jb(5),s.qc("formGroup",e.vehicleModel),s.Jb(1),s.qc("ngModel",e.id),s.Jb(6),s.Nc(s.mc(15,31,"M\xe3")),s.Jb(3),s.qc("ngModel",e.Code),s.Jb(1),s.qc("ngIf",e.errors.Code),s.Jb(5),s.Nc(s.mc(24,33,"T\xean")),s.Jb(3),s.qc("ngModel",e.Name),s.Jb(1),s.qc("ngIf",e.errors.Name),s.Jb(6),s.Nc(s.mc(34,35,"Lo\u1ea1i h\xecnh")),s.Jb(3),s.qc("ngModel",e.VehicleType),s.Jb(1),s.qc("ngIf",e.errors.VehicleType),s.Jb(5),s.Nc(s.mc(43,37,"Chi\u1ec1u d\xe0i")),s.Jb(3),s.qc("ngModel",e.Length),s.Jb(1),s.qc("ngIf",e.errors.Length),s.Jb(5),s.Nc(s.mc(52,39,"Chi\u1ec1u r\u1ed9ng")),s.Jb(3),s.qc("ngModel",e.Wide),s.Jb(1),s.qc("ngIf",e.errors.Wide),s.Jb(5),s.Nc(s.mc(61,41,"Chi\u1ec1u cao")),s.Jb(3),s.qc("ngModel",e.Hieght),s.Jb(1),s.qc("ngIf",e.errors.Hieght),s.Jb(5),s.Nc(s.mc(70,43,"Tr\u1ecdng t\u1ea3i")),s.Jb(3),s.qc("ngModel",e.Tonnage),s.Jb(1),s.qc("ngIf",e.errors.Tonnage),s.Jb(5),s.Nc(s.mc(79,45,"Di\u1ec5n gi\u1ea3i")),s.Jb(3),s.qc("ngModel",e.Description),s.Jb(1),s.qc("ngIf",e.errors.Description),s.Jb(3),s.qc("ngIf",!e.id),s.Jb(1),s.qc("ngIf",e.id),s.Jb(2),s.Nc(s.mc(89,47,"button_close")))},directives:[i.m,b.w,b.l,b.f,b.p,b.b,b.k,b.e,b.s,b.h],pipes:[r.c],styles:[".check-affects[_ngcontent-%COMP%]{padding-top:30px}.button-submit[_ngcontent-%COMP%]{margin-bottom:0}.task-todo-action-delete[_ngcontent-%COMP%]{float:right;font-size:12px}.task-todo-action[_ngcontent-%COMP%]{font-size:12px}.progress[_ngcontent-%COMP%]{height:10px}.todo-title[_ngcontent-%COMP%]{width:100%;margin-bottom:5px;margin-top:5px}.list-task-todo[_ngcontent-%COMP%]{line-height:2.5}.task-todo[_ngcontent-%COMP%]{margin-top:15px}.progressbar-panel[_ngcontent-%COMP%]{margin-top:10px}.table-task-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{white-space:nowrap}"]}),t})();const Ta=["modalAddEdit"];function ya(t,e){if(1&t){const t=s.cc();s.bc(0,"button",9),s.ic("click",function(){return s.Ec(t),s.kc().showCreateVehicleModel()}),s.Wb(1,"span",10),s.Mc(2),s.lc(3,"translate"),s.ac()}2&t&&(s.Jb(2),s.Oc(" ",s.mc(3,1,"add_new"),""))}function Ca(t,e){if(1&t&&(s.bc(0,"th"),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.Nc(t.Caption)}}function Ia(t,e){if(1&t&&(s.bc(0,"td"),s.bc(1,"span"),s.Mc(2),s.ac(),s.ac()),2&t){const t=e.$implicit,a=s.kc().$implicit;s.Jb(2),s.Nc(a[t.Name])}}function Da(t,e){if(1&t){const t=s.cc();s.bc(0,"button",15),s.ic("click",function(){s.Ec(t);const e=s.kc().$implicit;return s.kc().showEditModal(e.Id)}),s.Wb(1,"i",16),s.ac()}}function Aa(t,e){if(1&t){const t=s.cc();s.bc(0,"button",17),s.ic("click",function(){s.Ec(t);const e=s.kc().$implicit;return s.kc().deleteItem(e.Id)}),s.Wb(1,"i",18),s.ac()}}function Ja(t,e){if(1&t&&(s.bc(0,"tr",11),s.Kc(1,Ia,3,1,"td",6),s.bc(2,"td",12),s.Kc(3,Da,2,0,"button",13),s.Kc(4,Aa,2,0,"button",14),s.ac(),s.ac()),2&t){const t=s.kc();s.Jb(1),s.qc("ngForOf",t.columnInfoVehicle),s.Jb(2),s.qc("ngIf",t.authService.hasPermission("/main/task/vehicleList","Edit")),s.Jb(1),s.qc("ngIf",t.authService.hasPermission("/main/task/vehicleList","Delete"))}}function Sa(t,e){1&t&&(s.bc(0,"div",19),s.bc(1,"div",20),s.bc(2,"strong"),s.Mc(3),s.lc(4,"translate"),s.ac(),s.Mc(5),s.lc(6,"translate"),s.ac(),s.ac()),2&t&&(s.Jb(3),s.Oc("",s.mc(4,2,"dialog_alert_title"),"!"),s.Jb(2),s.Oc(" ",s.mc(6,4,"task_manager_task_notice_list_empty")," "))}function Na(t,e){if(1&t){const t=s.cc();s.bc(0,"div",19),s.bc(1,"div",21),s.bc(2,"pagination",22),s.ic("pageChanged",function(e){return s.Ec(t),s.kc().pageChanged(e)})("ngModelChange",function(e){return s.Ec(t),s.kc().pageNumber=e}),s.ac(),s.ac(),s.bc(3,"div",23),s.bc(4,"div",24),s.bc(5,"label",25),s.Mc(6),s.lc(7,"translate"),s.ac(),s.bc(8,"select",26),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc().pageSize=e})("change",function(){return s.Ec(t),s.kc().onChangePageSize()}),s.bc(9,"option",27),s.Mc(10,"10"),s.ac(),s.bc(11,"option",28),s.Mc(12,"20"),s.ac(),s.bc(13,"option",29),s.Mc(14,"50"),s.ac(),s.bc(15,"option",30),s.Mc(16,"100"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()}if(2&t){const t=s.kc();s.Jb(2),s.qc("boundaryLinks",!0)("itemsPerPage",t.pageSize)("totalItems",t.totalRow)("ngModel",t.pageNumber),s.Jb(4),s.Oc("",s.mc(7,6,"show_row")," \xa0"),s.Jb(2),s.qc("ngModel",t.pageSize)}}let wa=(()=>{class t{constructor(t,e,a,i){this.authService=t,this.dataService=e,this._notificationService=a,this.modalService=i,this.keyword="",this.fromDate=new Date,this.toDate=new Date,this.serviceType="",this.transportMode=0,this.portOfLoading=0,this.portOfDischarge=0,this.pageNumber=1,this.pageSize=20,this.pageDisplay=10,this.filter="",this.checkedAll=!1,this.columnInfoVehicle=[{Name:"Code",Caption:"M\xe3 xe",Width:120},{Name:"Name",Caption:"T\xean xe",Width:120},{Name:"VehicleType",Caption:"Lo\u1ea1i xe",Width:120},{Name:"Length",Caption:"Chi\u1ec1u d\xe0i",Width:120},{Name:"Wide",Caption:"Chi\u1ec1u r\u1ed9ng",Width:120},{Name:"Hieght",Caption:"Chi\u1ec1u cao",Width:120},{Name:"Tonnage",Caption:"Tr\u1ecdng t\u1ea3i",Format:"#,###.###",Width:120,Visible:!1},{Name:"Description",Caption:"Di\u1ec5n gi\u1ea3i",Width:120}]}ngOnInit(){this.fromDate.setDate(1),this.dateRange=[this.fromDate,this.toDate],this.loadData()}loadData(){this.dataService.get("/Vehicles").subscribe(t=>{this.vehicles=t})}onChangeTransportMode(){this.loadData()}onChangePortOfLoading(){this.loadData()}onChangePortOfDischarge(){this.loadData()}onValueChangeDateRange(t){this.fromDate=t[0],this.toDate=t[1],this.loadData()}loadVehicle(t){this.bsModalRef=this.modalService.show(Ma,{initialState:{id:t},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(t=>{this.loadData()})}showCreateVehicleModel(){this.bsModalRef=this.modalService.show(Ma,{initialState:{extenalVehicle:void 0},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(t=>{this.loadData()})}pageChanged(t){this.pageNumber=t.page,this.loadData()}onChangePageSize(){this.loadData()}showAddModal(){this.entity={},this.modalAddEdit.show()}showEditModal(t){this.loadVehicle(t)}deleteItem(t){this._notificationService.printConfirmationDialog(d.a.CONFIRM_DELETE_MSG,()=>this.deleteItemConfirm(t))}deleteItemConfirm(t){this.dataService.delete("/Vehicles/"+t).subscribe(t=>{this._notificationService.printSuccessMessage(d.a.DELETED_OK_MSG),this.loadData()})}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(u.a),s.Vb(f.a),s.Vb(g.a),s.Vb(o.b))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-vehicle-list"]],viewQuery:function(t,e){if(1&t&&s.Qc(Ta,1),2&t){let t;s.zc(t=s.jc())&&(e.modalAddEdit=t.first)}},decls:18,vars:8,consts:[[1,"x_title"],[1,"fa","fa-tasks"],[1,"btn-add-new"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["class","select-item",4,"ngFor","ngForOf"],["class","col-md-12",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-plus"],[1,"select-item"],[1,"text-center","action-task"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-pencil-square-o"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"col-md-12"],[1,"alert","alert-info"],[1,"col-md-8"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","itemsPerPage","totalItems","ngModel","pageChanged","ngModelChange"],[1,"col-md-4"],[1,"form-group","view-options"],["for",""],["name","page-size",1,"form-control",3,"ngModel","ngModelChange","change"],["value","10"],["value","20"],["value","50"],["value","100"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.bc(1,"h3"),s.Wb(2,"i",1),s.Mc(3),s.lc(4,"translate"),s.ac(),s.ac(),s.Wb(5,"br"),s.Wb(6,"hr"),s.bc(7,"div",2),s.Kc(8,ya,4,3,"button",3),s.ac(),s.bc(9,"div",4),s.bc(10,"table",5),s.bc(11,"thead"),s.bc(12,"tr"),s.Kc(13,Ca,2,1,"th",6),s.ac(),s.ac(),s.bc(14,"tbody"),s.Kc(15,Ja,5,3,"tr",7),s.ac(),s.ac(),s.Kc(16,Sa,7,6,"div",8),s.Kc(17,Na,17,8,"div",8),s.ac()),2&t&&(s.Jb(3),s.Oc(" ",s.mc(4,6,"Danh s\xe1ch ph\u01b0\u01a1ng ti\u1ec7n"),""),s.Jb(5),s.qc("ngIf",e.authService.hasPermission("/main/task/vehicleList","Add")),s.Jb(5),s.qc("ngForOf",e.columnInfoVehicle),s.Jb(2),s.qc("ngForOf",e.vehicles),s.Jb(1),s.qc("ngIf",e.vehicles&&0==e.vehicles.length),s.Jb(1),s.qc("ngIf",e.vehicles&&e.vehicles.length>0))},directives:[i.m,i.l,Ie.a,b.k,b.n,b.t,b.o,b.v],pipes:[r.c],styles:[".panel-search[_ngcontent-%COMP%]{display:inline-flex}.panel-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;margin-right:0}.filter-service-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;padding-right:10px}.btn-add-new[_ngcontent-%COMP%], .view-options[_ngcontent-%COMP%]{text-align:right}.view-options[_ngcontent-%COMP%]{margin-top:20px}.view-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:auto;display:inline-block}.label-created-date[_ngcontent-%COMP%]{padding-top:5px}.select-item[_ngcontent-%COMP%]{cursor:pointer}.select-item[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}"]}),t})();var Oa=a("XOxn");function Pa(t,e){1&t&&(s.bc(0,"h4",25),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"task_manager_create_new_task")))}function xa(t,e){1&t&&(s.bc(0,"h4",25),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"task_manager_update_task")))}function Ea(t,e){1&t&&(s.bc(0,"small",26),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function Fa(t,e){1&t&&(s.bc(0,"small",26),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function qa(t,e){1&t&&(s.bc(0,"small",26),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"error_this_field_is_required")))}function La(t,e){if(1&t&&(s.bc(0,"th"),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.Oc(" ",t.obj.Caption," ")}}function Ka(t,e){if(1&t){const t=s.cc();s.bc(0,"input",32),s.ic("ngModelChange",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().$implicit[a.key]=e}),s.ac()}if(2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.qc("ngModel",e[t.key])}}function Va(t,e){if(1&t){const t=s.cc();s.bc(0,"input",33),s.ic("ngModelChange",function(e){s.Ec(t);const a=s.kc().$implicit;return s.kc().$implicit[a.key]=e}),s.ac()}if(2&t){const t=s.kc().$implicit,e=s.kc().$implicit;s.qc("ngModel",e[t.key])}}function Ua(t,e){if(1&t&&(s.bc(0,"td"),s.bc(1,"div",9),s.Kc(2,Ka,1,1,"input",30),s.Kc(3,Va,1,1,"input",31),s.ac(),s.ac()),2&t){const t=e.$implicit;s.Jb(2),s.qc("ngIf","string"==t.obj.DataType&&t.obj.AllowEditing),s.Jb(1),s.qc("ngIf","number"==t.obj.DataType&&t.obj.AllowEditing)}}function Wa(t,e){if(1&t){const t=s.cc();s.bc(0,"a",34),s.ic("click",function(){s.Ec(t);const e=s.kc().$implicit;return s.kc().deleteItem(e)}),s.Wb(1,"i",35),s.ac()}}function Ra(t,e){if(1&t&&(s.bc(0,"tr",27),s.Kc(1,Ua,4,2,"td",17),s.lc(2,"jsonToArray"),s.bc(3,"td",28),s.Kc(4,Wa,2,0,"a",29),s.Mc(5,"\xa0 "),s.ac(),s.ac()),2&t){const t=s.kc();s.Jb(1),s.qc("ngForOf",s.mc(2,2,t.todoTemplateDetailColumnInfo)),s.Jb(3),s.qc("ngIf",t.authService.hasPermission("/main/task/todoTemplateList","Delete"))}}function ja(t,e){if(1&t){const t=s.cc();s.bc(0,"button",36),s.ic("click",function(){return s.Ec(t),s.kc().addNewTodoTemplate()}),s.Wb(1,"span",37),s.Mc(2),s.lc(3,"translate"),s.ac()}2&t&&(s.Jb(2),s.Oc(" ",s.mc(3,1,"add_new_todo_item"),""))}function Ba(t,e){1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"button_add")))}function $a(t,e){1&t&&(s.bc(0,"span"),s.Mc(1),s.lc(2,"translate"),s.ac()),2&t&&(s.Jb(1),s.Nc(s.mc(2,1,"button_update")))}let Ga=(()=>{class t{constructor(t,e,a,i,c,n,o){this.bsModalRef=t,this.notificationService=e,this.datePipe=a,this.authService=i,this.formBuilder=c,this.formErrors=n,this.dataService=o,this.list=[],this.errors={},this.id=0,this.loading=!1,this.todoTemplate={},this.event=new s.q,this.bsValue=new Date,this.maxProgressbar=0,this.progressing=0,this.todoTemplateDetailColumnInfo=Oa.TaskTodoTemplateDetailForm.ColumnInfo,this.initForm()}ngOnInit(){this.fillFormData()}initForm(){this.todoTemplateModel=this.formBuilder.group({id:["",b.u.required],Code:["",b.u.required],Description:["",b.u.required],CategoryId:["",b.u.required]}),Object.keys(this.todoTemplateModel.controls).forEach(t=>{this.errors[t]=""}),this.todoTemplateModel.valueChanges.subscribe(t=>{this.errors=this.formErrors.validateForm(this.todoTemplateModel,this.errors,!0)})}triggerEvent(t){this.event.emit({data:t})}onSubmit(t){const e=this.authService.getLoggedInUser(),a=this.formatFormData(t);this.id?a.ChangedBy=e.id:(a.CreatedBy=e.id,a.OwnerId=e.id),a.Details=this.todoTemplateDetails,this.dataService.post("/TaskTodoTemplates/SaveHierarchy",a).subscribe(t=>{this.notificationService.printSuccessMessage(this.id?d.a.UPDATED_OK_MSG:d.a.CREATED_OK_MSG),this.triggerEvent("Submit"),this.bsModalRef.hide()},t=>this.dataService.handleError(t))}formatFormData(t){const e={};return t&&Object.keys(this.todoTemplateModel.controls).forEach(a=>{e[a]=t[a]?t[a]:null}),e}onClose(){this.triggerEvent("Close"),this.bsModalRef.hide()}fillFormData(){0!==this.id&&this.dataService.get("/TaskTodoTemplates/"+this.id+"?includeDetail=true").subscribe(t=>{this.todoTemplate=t,this.todoTemplateDetails=t.Details,Object.keys(this.todoTemplateModel.controls).forEach(t=>{"id"!==t&&this.todoTemplateModel.controls[t].setValue(this.todoTemplate[t]?this.todoTemplate[t]:"")})})}addNewTodoTemplate(){this.todoTemplateDetails.push({})}deleteItem(t){const e=t.Id;this.todoTemplateDetails=this.todoTemplateDetails.filter(t=>t.Id!==e)}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(o.a),s.Vb(g.a),s.Vb(i.e),s.Vb(u.a),s.Vb(b.c),s.Vb(p.a),s.Vb(f.a))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-todo-template-item"]],decls:58,vars:29,consts:[[1,"modal-header"],["class","modal-title pull-left",4,"ngIf"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],["autocomplete","off","standalone","",1,"form-horizontal","form-label-left","input_mask",3,"formGroup","ngSubmit"],["type","number","formControlName","id",1,"hidden",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-md-4","col-sm-4","col-xs-12"],[1,"form-group"],["type","text","required","","minlength","3","formControlName","Code",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["type","text","required","","minlength","3","formControlName","CategoryId",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12","col-xs-12"],["type","text","required","","minlength","3","formControlName","Description",1,"form-control",3,"ngModel","ngModelChange"],[1,"table-responsive","table-task-item"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["class","select-task",4,"ngFor","ngForOf"],[1,"btn-add-new"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","button-submit",3,"click"],[4,"ngIf"],["type","button",1,"btn","btn-default",3,"click"],[1,"modal-title","pull-left"],[1,"text-danger"],[1,"select-task"],[1,"text-center","action-task"],["data-toggle","tooltip","data-placement","top","class","action-delete-task",3,"click",4,"ngIf"],["type","text","class","form-control",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","class","form-control",3,"ngModel","ngModelChange",4,"ngIf"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],["data-toggle","tooltip","data-placement","top",1,"action-delete-task",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["type","button",1,"btn","btn-primary",3,"click"],[1,"glyphicon","glyphicon-plus"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.Kc(1,Pa,3,3,"h4",1),s.Kc(2,xa,3,3,"h4",1),s.bc(3,"button",2),s.ic("click",function(){return e.onClose()}),s.bc(4,"span",3),s.Mc(5,"\xd7"),s.ac(),s.ac(),s.ac(),s.bc(6,"div",4),s.bc(7,"form",5),s.ic("ngSubmit",function(){return e.onSubmit(e.todoTemplateModel.value)}),s.bc(8,"input",6),s.ic("ngModelChange",function(t){return e.id=t}),s.ac(),s.bc(9,"div",7),s.bc(10,"div",8),s.bc(11,"div",9),s.bc(12,"p"),s.bc(13,"strong"),s.Mc(14),s.lc(15,"translate"),s.ac(),s.ac(),s.bc(16,"div"),s.bc(17,"input",10),s.ic("ngModelChange",function(t){return e.Code=t}),s.ac(),s.Kc(18,Ea,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.bc(19,"div",8),s.bc(20,"div",9),s.bc(21,"p"),s.bc(22,"strong"),s.Mc(23),s.lc(24,"translate"),s.ac(),s.ac(),s.bc(25,"div"),s.bc(26,"input",12),s.ic("ngModelChange",function(t){return e.CategoryId=t}),s.ac(),s.Kc(27,Fa,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(28,"div",7),s.bc(29,"div",13),s.bc(30,"div",9),s.bc(31,"p"),s.bc(32,"strong"),s.Mc(33),s.lc(34,"translate"),s.ac(),s.ac(),s.bc(35,"div"),s.bc(36,"input",14),s.ic("ngModelChange",function(t){return e.Description=t}),s.ac(),s.Kc(37,qa,3,3,"small",11),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(38,"div",7),s.bc(39,"div"),s.Mc(40,"Details"),s.ac(),s.bc(41,"div",15),s.bc(42,"table",16),s.bc(43,"thead"),s.bc(44,"tr"),s.Kc(45,La,2,1,"th",17),s.lc(46,"jsonToArray"),s.ac(),s.ac(),s.bc(47,"tbody"),s.Kc(48,Ra,6,4,"tr",18),s.ac(),s.ac(),s.bc(49,"div",19),s.Kc(50,ja,4,3,"button",20),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(51,"div",21),s.bc(52,"button",22),s.ic("click",function(){return e.onSubmit(e.todoTemplateModel.value)}),s.Kc(53,Ba,3,3,"span",23),s.Kc(54,$a,3,3,"span",23),s.ac(),s.bc(55,"button",24),s.ic("click",function(){return e.onClose()}),s.Mc(56),s.lc(57,"translate"),s.ac(),s.ac()),2&t&&(s.Jb(1),s.qc("ngIf",!e.id),s.Jb(1),s.qc("ngIf",e.id),s.Jb(5),s.qc("formGroup",e.todoTemplateModel),s.Jb(1),s.qc("ngModel",e.id),s.Jb(6),s.Nc(s.mc(15,19,"M\xe3")),s.Jb(3),s.qc("ngModel",e.Code),s.Jb(1),s.qc("ngIf",e.errors.Code),s.Jb(5),s.Nc(s.mc(24,21,"Lo\u1ea1i h\xecnh")),s.Jb(3),s.qc("ngModel",e.CategoryId),s.Jb(1),s.qc("ngIf",e.errors.CategoryId),s.Jb(6),s.Nc(s.mc(34,23,"Di\u1ec5n gi\u1ea3i")),s.Jb(3),s.qc("ngModel",e.Description),s.Jb(1),s.qc("ngIf",e.errors.Description),s.Jb(8),s.qc("ngForOf",s.mc(46,25,e.todoTemplateDetailColumnInfo)),s.Jb(3),s.qc("ngForOf",e.todoTemplateDetails),s.Jb(2),s.qc("ngIf",e.authService.hasPermission("/main/task/todoTemplateList","Add")),s.Jb(3),s.qc("ngIf",!e.id),s.Jb(1),s.qc("ngIf",e.id),s.Jb(2),s.Nc(s.mc(57,27,"button_close")))},directives:[i.m,b.w,b.l,b.f,b.p,b.b,b.k,b.e,b.s,b.h,i.l,b.n],pipes:[r.c,F],styles:[""]}),t})();var za=a("joGx");function Ha(t,e){if(1&t){const t=s.cc();s.bc(0,"button",9),s.ic("click",function(){return s.Ec(t),s.kc().loadTodoTemplate(0)}),s.Wb(1,"span",10),s.Mc(2),s.lc(3,"translate"),s.ac()}2&t&&(s.Jb(2),s.Oc(" ",s.mc(3,1,"add_new"),""))}function Qa(t,e){if(1&t&&(s.bc(0,"th"),s.Mc(1),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.Oc(" ",t.obj.Caption," ")}}function Ya(t,e){if(1&t&&(s.bc(0,"td"),s.bc(1,"span"),s.Mc(2),s.ac(),s.ac()),2&t){const t=e.$implicit,a=s.kc().$implicit;s.Jb(2),s.Nc(a[t.obj.Name])}}function Xa(t,e){if(1&t){const t=s.cc();s.bc(0,"button",15),s.ic("click",function(){s.Ec(t);const e=s.kc().$implicit;return s.kc().loadTodoTemplate(e.Id)}),s.Wb(1,"i",16),s.ac()}}function Za(t,e){if(1&t){const t=s.cc();s.bc(0,"button",17),s.ic("click",function(){s.Ec(t);const e=s.kc().$implicit;return s.kc().deleteItem(e.Id)}),s.Wb(1,"i",18),s.ac()}}function ti(t,e){if(1&t&&(s.bc(0,"tr",11),s.Kc(1,Ya,3,1,"td",6),s.lc(2,"jsonToArray"),s.bc(3,"td",12),s.Kc(4,Xa,2,0,"button",13),s.Kc(5,Za,2,0,"button",14),s.ac(),s.ac()),2&t){const t=s.kc();s.Jb(1),s.qc("ngForOf",s.mc(2,3,t.todoTemplateColumnInfo)),s.Jb(3),s.qc("ngIf",t.authService.hasPermission("/main/task/todoTemplateList","Edit")),s.Jb(1),s.qc("ngIf",t.authService.hasPermission("/main/task/todoTemplateList","Delete"))}}function ei(t,e){1&t&&(s.bc(0,"div",19),s.bc(1,"div",20),s.bc(2,"strong"),s.Mc(3),s.lc(4,"translate"),s.ac(),s.Mc(5),s.lc(6,"translate"),s.ac(),s.ac()),2&t&&(s.Jb(3),s.Oc("",s.mc(4,2,"dialog_alert_title"),"!"),s.Jb(2),s.Oc(" ",s.mc(6,4,"task_manager_task_notice_list_empty")," "))}function ai(t,e){if(1&t){const t=s.cc();s.bc(0,"div",19),s.bc(1,"div",21),s.bc(2,"pagination",22),s.ic("pageChanged",function(e){return s.Ec(t),s.kc().pageChanged(e)})("ngModelChange",function(e){return s.Ec(t),s.kc().pageNumber=e}),s.ac(),s.ac(),s.bc(3,"div",23),s.bc(4,"div",24),s.bc(5,"label",25),s.Mc(6),s.lc(7,"translate"),s.ac(),s.bc(8,"select",26),s.ic("ngModelChange",function(e){return s.Ec(t),s.kc().pageSize=e})("change",function(){return s.Ec(t),s.kc().onChangePageSize()}),s.bc(9,"option",27),s.Mc(10,"10"),s.ac(),s.bc(11,"option",28),s.Mc(12,"20"),s.ac(),s.bc(13,"option",29),s.Mc(14,"50"),s.ac(),s.bc(15,"option",30),s.Mc(16,"100"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()}if(2&t){const t=s.kc();s.Jb(2),s.qc("boundaryLinks",!0)("itemsPerPage",t.pageSize)("totalItems",t.totalRow)("ngModel",t.pageNumber),s.Jb(4),s.Oc("",s.mc(7,6,"show_row")," \xa0"),s.Jb(2),s.qc("ngModel",t.pageSize)}}const ii=c.f.forChild([{path:"",component:Qe},{path:"alcTaskItem",component:ra},{path:"vehicleList",component:wa},{path:"vehicle",component:Ma},{path:"todoTemplateList",component:(()=>{class t{constructor(t,e,a,i){this.authService=t,this.dataService=e,this.notificationService=a,this.modalService=i,this.keyword="",this.fromDate=new Date,this.toDate=new Date,this.serviceType="",this.transportMode=0,this.portOfLoading=0,this.portOfDischarge=0,this.pageNumber=1,this.pageSize=20,this.pageDisplay=10,this.filter="",this.checkedAll=!1,this.todoTemplateColumnInfo=za.TaskTodoTemplateForm.ColumnInfo}ngOnInit(){this.fromDate.setDate(1),this.dateRange=[this.fromDate,this.toDate],this.loadData()}loadData(){this.dataService.get("/TaskTodoTemplates").subscribe(t=>{this.todoTemplates=t,this.checkedAll=!1})}loadTodoTemplate(t){this.bsModalRef=this.modalService.show(Ga,{initialState:{id:t},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(t=>{this.loadData()})}pageChanged(t){this.pageNumber=t.page,this.loadData()}onChangePageSize(){this.loadData()}deleteItem(t){this.notificationService.printConfirmationDialog(d.a.CONFIRM_DELETE_MSG,()=>this.deleteItemConfirm(t))}deleteItemConfirm(t){this.dataService.delete("/TaskTodoTemplates/"+t).subscribe(t=>{this.notificationService.printSuccessMessage(d.a.DELETED_OK_MSG),this.loadData()})}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(u.a),s.Vb(f.a),s.Vb(g.a),s.Vb(o.b))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-todo-template-list"]],decls:19,vars:10,consts:[[1,"x_title"],[1,"fa","fa-tasks"],[1,"btn-add-new"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["class","select-item",4,"ngFor","ngForOf"],["class","col-md-12",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-plus"],[1,"select-item"],[1,"text-center","action-task"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-pencil-square-o"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"col-md-12"],[1,"alert","alert-info"],[1,"col-md-8"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","itemsPerPage","totalItems","ngModel","pageChanged","ngModelChange"],[1,"col-md-4"],[1,"form-group","view-options"],["for",""],["name","page-size",1,"form-control",3,"ngModel","ngModelChange","change"],["value","10"],["value","20"],["value","50"],["value","100"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.bc(1,"h3"),s.Wb(2,"i",1),s.Mc(3),s.lc(4,"translate"),s.ac(),s.ac(),s.Wb(5,"br"),s.Wb(6,"hr"),s.bc(7,"div",2),s.Kc(8,Ha,4,3,"button",3),s.ac(),s.bc(9,"div",4),s.bc(10,"table",5),s.bc(11,"thead"),s.bc(12,"tr"),s.Kc(13,Qa,2,1,"th",6),s.lc(14,"jsonToArray"),s.ac(),s.ac(),s.bc(15,"tbody"),s.Kc(16,ti,6,5,"tr",7),s.ac(),s.ac(),s.Kc(17,ei,7,6,"div",8),s.Kc(18,ai,17,8,"div",8),s.ac()),2&t&&(s.Jb(3),s.Oc(" ",s.mc(4,6,"Danh s\xe1ch vi\u1ec7c vi\u1ec7c c\u1ea7n l\xe0m"),""),s.Jb(5),s.qc("ngIf",e.authService.hasPermission("/main/task/todoTemplateList","Add")),s.Jb(5),s.qc("ngForOf",s.mc(14,8,e.todoTemplateColumnInfo)),s.Jb(3),s.qc("ngForOf",e.todoTemplates),s.Jb(1),s.qc("ngIf",e.todoTemplates&&0==e.todoTemplates.length),s.Jb(1),s.qc("ngIf",e.todoTemplates&&e.todoTemplates.length>0))},directives:[i.m,i.l,Ie.a,b.k,b.n,b.t,b.o,b.v],pipes:[r.c,F],styles:[".panel-search[_ngcontent-%COMP%]{display:inline-flex}.panel-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;margin-right:0}.filter-service-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;padding-right:10px}.btn-add-new[_ngcontent-%COMP%], .view-options[_ngcontent-%COMP%]{text-align:right}.view-options[_ngcontent-%COMP%]{margin-top:20px}.view-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:auto;display:inline-block}.label-created-date[_ngcontent-%COMP%]{padding-top:5px}.select-item[_ngcontent-%COMP%]{cursor:pointer}.select-item[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}"]}),t})()},{path:"todoTemplateItem",component:Ga}]);var ci=a("PCNd");let ni=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Tb({type:t}),t.\u0275inj=s.Sb({providers:[{provide:M.c,useValue:"tinymce/tinymce.min.js"}],imports:[[i.c,ii,v.b,r.b,Ie.b,b.g,b.r,ci.a,M.b,k.c.forRoot(),St.forRoot(),_.b.forRoot(),w.forRoot()]]}),t})()},raoF:function(t){t.exports=JSON.parse('{"TaskForm":{"ColumnInfo":{"Title":{"Name":"Title","Caption":"M\xe3 c\xf4ng vi\u1ec7c","Width":120},"TaskDate":{"Name":"TaskDate","Caption":"Ng\xe0y kh\u1edfi t\u1ea1o c\xf4ng vi\u1ec7c","Width":120},"Status":{"Name":"Status","Caption":"Tr\u1ea1ng th\xe1i","Width":120},"TargetDate":{"Name":"TargetDate","Caption":"Ng\xe0y b\u1eaft \u0111\u1ea7u(d\u1ef1 ki\u1ebfn)","Width":120},"ActualDate":{"Name":"ActualDate","Caption":"Ng\xe0y b\u1eaft \u0111\u1ea7u(th\u1ef1c t\u1ebf)","Width":120},"DueDate":{"Name":"DueDate","Caption":"Ng\xe0y k\u1ebft th\xfac","Width":120},"Description":{"Name":"Description","Caption":"Di\u1ec5n gi\u1ea3i","Width":120},"Add":{"Caption":"New(F4)"},"Edit":{"Caption":"Modify(F3)"},"Delete":{"Caption":"X\xf3a(Ctrl+F8)"},"Save":{"Caption":"L\u01b0u(F12)"},"Cancel":{"Caption":"H\u1ee7y(Esc)"},"Close":{"Caption":"\u0110\xf3ng"},"ShowAll":{"Caption":"T\u1ea5t c\u1ea3"},"Rejected":{"Caption":"\u0110\xe3 h\u1ee7y"},"Approved":{"Caption":"\u0110\xe3 ki\u1ec3m duy\u1ec7t"},"Completed":{"Caption":"\u0110\xe3 ho\xe0n th\xe0nh"},"Acept":{"Caption":"Ch\u1ecdn(F12)"},"OK":{"Caption":"Ch\u1ecdn(F12)"},"Load":{"Caption":"N\u1ea1p"}},"ColumnInfoTaskItem":{"TaskItemDate":{"Name":"TaskItemDate","Caption":"Ng\xe0y ph\xe1t sinh","Width":120,"Type":"date","Editable":false,"Visible":true},"CustomerName":{"Name":"CustomerName","Caption":"T\xean Kh\xe1ch h\xe0ng","Width":120,"Type":"string","Editable":false,"Visible":false},"SO_HDTM":{"Name":"SO_HDTM","Caption":"S\u1ed1 h\xf3a \u0111\u01a1n TM","Format":"#,##0.####;-#,##0.####;#","Width":100},"SO_KIEN":{"Name":"SO_KIEN","Caption":"S\u1ed1 l\u01b0\u1ee3ng ki\u1ec7n","Width":100,"CustomSettings":""},"TR_LUONG":{"Name":"TR_LUONG","Caption":"Tr\u1ecdng l\u01b0\u1ee3ng","Width":100,"CustomSettings":""},"TEN_DD_LUU_KHO":{"Name":"TEN_DD_LUU_KHO","Caption":"\u0110\u1ecba \u0111i\u1ec3m l\u01b0u kho ","Width":100,"CustomSettings":""},"GroupCode":{"Name":"GroupCode","Caption":"Group Code","Width":100},"Description":{"Name":"Description","Caption":"Di\u1ec5n gi\u1ea3i","Width":120,"Type":"string","Editable":true,"Visible":true}},"ColumnInfoTaskItemAir":{"DepartureFlight":{"Name":"DepartureFlight","Caption":"M\xe3 chuy\u1ebfn bay","Width":120,"Type":"string","Editable":true,"Visible":true},"DepartureDate":{"Name":"DepartureDate","Caption":"Ng\xe0y bay","Width":120,"Type":"date","Editable":true,"Visible":true},"ConnectingPort":{"Name":"ConnectingPort","Caption":"S\xe2n bay trung chuy\u1ec3n","Width":120,"Type":"string","Editable":true,"Visible":true},"ConnectingFlight":{"Name":"ConnectingFlight","Caption":"M\xe3 chuy\u1ebfn bay trung chuy\u1ec3n","Width":120,"Type":"string","Editable":true,"Visible":true},"ConectingDate":{"Name":"ConectingDate","Caption":"Ng\xe0y bay trung chuy\u1ec3n","Width":120,"Type":"date","Editable":true,"Visible":true},"FreightCost":{"Name":"FreightCost","Caption":"Chi ph\xed bay","Width":120,"Type":"number","Editable":true,"Visible":true},"Surcharge":{"Name":"Surcharge","Caption":"Ph\u1ee5 ph\xed s\xe2n bay","Width":120,"Type":"number","Editable":true,"Visible":true},"AirlinesSurcharge":{"Name":"AirlinesSurcharge","Caption":"Ph\u1ee5 ph\xed h\xe0ng kh\xf4ng","Width":120,"Type":"number","Editable":true,"Visible":true},"LocalCharge":{"Name":"LocalCharge","Caption":"Ph\xed n\u1ed9i \u0111\u1ecba","Width":120,"Type":"number","Editable":true,"Visible":true},"DeliveryCharge":{"Name":"DeliveryCharge","Caption":"Ph\xed giao h\xe0ng","Width":120,"Type":"number","Editable":true,"Visible":true},"BookingNo":{"Name":"BookingNo","Caption":"S\u1ed1 Booking","Width":120,"Type":"string","Editable":true,"Visible":true}},"ColumnInfoTaskItemSea":{"EmptyPickUpCY":{"Name":"EmptyPickUpCY","Caption":"\u0110\u1ecba \u0111i\u1ec3m l\u1ea5y v\u1ecf Cont","Width":120,"Type":"string","Editable":true,"Visible":true},"FullReturnCY":{"Name":"FullReturnCY","Caption":"\u0110\u1ecba \u0111i\u1ec3m h\u1ea1 c\u1ea3ng Cont","Width":120,"Type":"string","Editable":true,"Visible":true},"PortCargoCutOff":{"Name":"PortCargoCutOff","Caption":"Ng\xe0y-Gi\u1edd c\u1eaft m\xe1ng","Width":120,"Type":"date","Editable":true,"Visible":true},"DocCutOff":{"Name":"DocCutOff","Caption":"H\u1ea1n cu\u1ed1i c\xf3 m\u1eb7t","Width":120,"Type":"date","Editable":true,"Visible":true},"EquipmentType":{"Name":"EquipmentType","Caption":"Lo\u1ea1i Cont","Width":120,"Type":"string","Editable":true,"Visible":true}},"ColumnInfoTaskTodo":{"Finished":{"Name":"Finished","Caption":"Ho\xe0n th\xe0nh","Width":120},"Code":{"Name":"Code","Caption":"M\xe3","Width":120},"Status":{"Name":"Status","Caption":"Tr\u1ea1ng th\xe1i","Width":120},"Description":{"Name":"Description","Caption":"Di\u1ec5n gi\u1ea3i","Width":120}}}}')},xDdU:function(t,e,a){var i,c,n=a("4fRq"),s=a("I2ZF"),o=0,r=0;t.exports=function(t,e,a){var l=e&&a||0,d=e||[],b=(t=t||{}).node||i,m=void 0!==t.clockseq?t.clockseq:c;if(null==b||null==m){var h=n();null==b&&(b=i=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==m&&(m=c=16383&(h[6]<<8|h[7]))}var g=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:r+1,p=g-o+(u-r)/1e4;if(p<0&&void 0===t.clockseq&&(m=m+1&16383),(p<0||g>o)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=g,r=u,c=m;var f=(1e4*(268435455&(g+=122192928e5))+u)%4294967296;d[l++]=f>>>24&255,d[l++]=f>>>16&255,d[l++]=f>>>8&255,d[l++]=255&f;var k=g/4294967296*1e4&268435455;d[l++]=k>>>8&255,d[l++]=255&k,d[l++]=k>>>24&15|16,d[l++]=k>>>16&255,d[l++]=m>>>8|128,d[l++]=255&m;for(var _=0;_<6;++_)d[l+_]=b[_];return e||s(d)}},xk4V:function(t,e,a){var i=a("4fRq"),c=a("I2ZF");t.exports=function(t,e,a){var n=e&&a||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var o=0;o<16;++o)e[n+o]=s[o];return e||c(s)}}}]);