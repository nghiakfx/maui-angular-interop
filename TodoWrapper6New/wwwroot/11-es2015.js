(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"3/ER":function(t,e,r){"use strict";(function(t){var o=r("Ju5/"),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,n=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=n&&n.exports===a?o.a.Buffer:void 0,i=s?s.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var r=t.length,o=i?i(r):new t.constructor(r);return t.copy(o),o}}).call(this,r("3UD+")(t))},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"8Rk9":function(t,e,r){"use strict";r.r(e),r.d(e,"ReportModule",function(){return je});var o=r("ofXK"),a=r("fXoL"),n=r("2Vo4"),s=function(t,e){return t===e||t!=t&&e!=e},i=function(t,e){for(var r=t.length;r--;)if(s(t[r][0],e))return r;return-1},c=Array.prototype.splice;function l(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}l.prototype.clear=function(){this.__data__=[],this.size=0},l.prototype.delete=function(t){var e=this.__data__,r=i(e,t);return!(r<0||(r==e.length-1?e.pop():c.call(e,r,1),--this.size,0))},l.prototype.get=function(t){var e=this.__data__,r=i(e,t);return r<0?void 0:e[r][1]},l.prototype.has=function(t){return i(this.__data__,t)>-1},l.prototype.set=function(t,e){var r=this.__data__,o=i(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this};var h,u=l,d=r("Ju5/"),p=d.a.Symbol,b=Object.prototype,f=b.hasOwnProperty,g=b.toString,y=p?p.toStringTag:void 0,v=Object.prototype.toString,j=p?p.toStringTag:void 0,C=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":j&&j in Object(t)?function(t){var e=f.call(t,y),r=t[y];try{t[y]=void 0;var o=!0}catch(n){}var a=g.call(t);return o&&(e?t[y]=r:delete t[y]),a}(t):function(t){return v.call(t)}(t)},_=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},m=function(t){if(!_(t))return!1;var e=C(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},O=d.a["__core-js_shared__"],D=(h=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",w=Function.prototype.toString,k=function(t){if(null!=t){try{return w.call(t)}catch(e){}try{return t+""}catch(e){}}return""},B=/^\[object .+?Constructor\]$/,A=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=function(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!_(t)||(e=t,D&&D in e))&&(m(t)?A:B).test(k(t));var e}(r)?r:void 0},S=x(d.a,"Map"),M=x(Object,"create"),E=Object.prototype.hasOwnProperty,H=Object.prototype.hasOwnProperty;function U(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}U.prototype.clear=function(){this.__data__=M?M(null):{},this.size=0},U.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},U.prototype.get=function(t){var e=this.__data__;if(M){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return E.call(e,t)?e[t]:void 0},U.prototype.has=function(t){var e=this.__data__;return M?void 0!==e[t]:H.call(e,t)},U.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=M&&void 0===e?"__lodash_hash_undefined__":e,this};var L=U,R=function(t,e){var r,o,a=t.__data__;return("string"==(o=typeof(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?a["string"==typeof e?"string":"hash"]:a.map};function P(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}P.prototype.clear=function(){this.size=0,this.__data__={hash:new L,map:new(S||u),string:new L}},P.prototype.delete=function(t){var e=R(this,t).delete(t);return this.size-=e?1:0,e},P.prototype.get=function(t){return R(this,t).get(t)},P.prototype.has=function(t){return R(this,t).has(t)},P.prototype.set=function(t,e){var r=R(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this};var T=P;function z(t){var e=this.__data__=new u(t);this.size=e.size}z.prototype.clear=function(){this.__data__=new u,this.size=0},z.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},z.prototype.get=function(t){return this.__data__.get(t)},z.prototype.has=function(t){return this.__data__.has(t)},z.prototype.set=function(t,e){var r=this.__data__;if(r instanceof u){var o=r.__data__;if(!S||o.length<199)return o.push([t,e]),this.size=++r.size,this;r=this.__data__=new T(o)}return r.set(t,e),this.size=r.size,this};var W=z,I=function(){try{var t=x(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),F=function(t,e,r){"__proto__"==e&&I?I(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},q=Object.prototype.hasOwnProperty,V=function(t,e,r){var o=t[e];q.call(t,e)&&s(o,r)&&(void 0!==r||e in t)||F(t,e,r)},J=function(t,e,r,o){var a=!r;r||(r={});for(var n=-1,s=e.length;++n<s;){var i=e[n],c=o?o(r[i],t[i],i,r,t):void 0;void 0===c&&(c=t[i]),a?F(r,i,c):V(r,i,c)}return r},$=function(t){return null!=t&&"object"==typeof t},N=function(t){return $(t)&&"[object Arguments]"==C(t)},Y=Object.prototype,Q=Y.hasOwnProperty,X=Y.propertyIsEnumerable,K=N(function(){return arguments}())?N:function(t){return $(t)&&Q.call(t,"callee")&&!X.call(t,"callee")},G=Array.isArray,Z=r("WOAq"),tt=/^(?:0|[1-9]\d*)$/,et=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&tt.test(t))&&t>-1&&t%1==0&&t<e},rt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},ot={};ot["[object Float32Array]"]=ot["[object Float64Array]"]=ot["[object Int8Array]"]=ot["[object Int16Array]"]=ot["[object Int32Array]"]=ot["[object Uint8Array]"]=ot["[object Uint8ClampedArray]"]=ot["[object Uint16Array]"]=ot["[object Uint32Array]"]=!0,ot["[object Arguments]"]=ot["[object Array]"]=ot["[object ArrayBuffer]"]=ot["[object Boolean]"]=ot["[object DataView]"]=ot["[object Date]"]=ot["[object Error]"]=ot["[object Function]"]=ot["[object Map]"]=ot["[object Number]"]=ot["[object Object]"]=ot["[object RegExp]"]=ot["[object Set]"]=ot["[object String]"]=ot["[object WeakMap]"]=!1;var at=function(t){return function(e){return t(e)}},nt=r("xutz"),st=nt.a&&nt.a.isTypedArray,it=st?at(st):function(t){return $(t)&&rt(t.length)&&!!ot[C(t)]},ct=Object.prototype.hasOwnProperty,lt=function(t,e){var r=G(t),o=!r&&K(t),a=!r&&!o&&Object(Z.a)(t),n=!r&&!o&&!a&&it(t),s=r||o||a||n,i=s?function(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o}(t.length,String):[],c=i.length;for(var l in t)!e&&!ct.call(t,l)||s&&("length"==l||a&&("offset"==l||"parent"==l)||n&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||et(l,c))||i.push(l);return i},ht=Object.prototype,ut=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ht)},dt=function(t,e){return function(r){return t(e(r))}},pt=dt(Object.keys,Object),bt=Object.prototype.hasOwnProperty,ft=function(t){return null!=t&&rt(t.length)&&!m(t)},gt=function(t){return ft(t)?lt(t):function(t){if(!ut(t))return pt(t);var e=[];for(var r in Object(t))bt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)},yt=Object.prototype.hasOwnProperty,vt=function(t){return ft(t)?lt(t,!0):function(t){if(!_(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=ut(t),r=[];for(var o in t)("constructor"!=o||!e&&yt.call(t,o))&&r.push(o);return r}(t)},jt=r("3/ER"),Ct=function(){return[]},_t=Object.prototype.propertyIsEnumerable,mt=Object.getOwnPropertySymbols,Ot=mt?function(t){return null==t?[]:(t=Object(t),function(e,r){for(var o=-1,a=null==e?0:e.length,n=0,s=[];++o<a;){var i=e[o];_t.call(t,i)&&(s[n++]=i)}return s}(mt(t)))}:Ct,Dt=function(t,e){for(var r=-1,o=e.length,a=t.length;++r<o;)t[a+r]=e[r];return t},wt=dt(Object.getPrototypeOf,Object),kt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Dt(e,Ot(t)),t=wt(t);return e}:Ct,Bt=function(t,e,r){var o=e(t);return G(t)?o:Dt(o,r(t))},At=function(t){return Bt(t,gt,Ot)},xt=function(t){return Bt(t,vt,kt)},St=x(d.a,"DataView"),Mt=x(d.a,"Promise"),Et=x(d.a,"Set"),Ht=x(d.a,"WeakMap"),Ut=k(St),Lt=k(S),Rt=k(Mt),Pt=k(Et),Tt=k(Ht),zt=C;(St&&"[object DataView]"!=zt(new St(new ArrayBuffer(1)))||S&&"[object Map]"!=zt(new S)||Mt&&"[object Promise]"!=zt(Mt.resolve())||Et&&"[object Set]"!=zt(new Et)||Ht&&"[object WeakMap]"!=zt(new Ht))&&(zt=function(t){var e=C(t),r="[object Object]"==e?t.constructor:void 0,o=r?k(r):"";if(o)switch(o){case Ut:return"[object DataView]";case Lt:return"[object Map]";case Rt:return"[object Promise]";case Pt:return"[object Set]";case Tt:return"[object WeakMap]"}return e});var Wt=zt,It=Object.prototype.hasOwnProperty,Ft=d.a.Uint8Array,qt=function(t){var e=new t.constructor(t.byteLength);return new Ft(e).set(new Ft(t)),e},Vt=/\w*$/,Jt=p?p.prototype:void 0,$t=Jt?Jt.valueOf:void 0,Nt=Object.create,Yt=function(){function t(){}return function(e){if(!_(e))return{};if(Nt)return Nt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Qt=nt.a&&nt.a.isMap,Xt=Qt?at(Qt):function(t){return $(t)&&"[object Map]"==Wt(t)},Kt=nt.a&&nt.a.isSet,Gt=Kt?at(Kt):function(t){return $(t)&&"[object Set]"==Wt(t)},Zt={};Zt["[object Arguments]"]=Zt["[object Array]"]=Zt["[object ArrayBuffer]"]=Zt["[object DataView]"]=Zt["[object Boolean]"]=Zt["[object Date]"]=Zt["[object Float32Array]"]=Zt["[object Float64Array]"]=Zt["[object Int8Array]"]=Zt["[object Int16Array]"]=Zt["[object Int32Array]"]=Zt["[object Map]"]=Zt["[object Number]"]=Zt["[object Object]"]=Zt["[object RegExp]"]=Zt["[object Set]"]=Zt["[object String]"]=Zt["[object Symbol]"]=Zt["[object Uint8Array]"]=Zt["[object Uint8ClampedArray]"]=Zt["[object Uint16Array]"]=Zt["[object Uint32Array]"]=!0,Zt["[object Error]"]=Zt["[object Function]"]=Zt["[object WeakMap]"]=!1;var te=function t(e,r,o,a,n,s){var i,c=1&r,l=2&r,h=4&r;if(o&&(i=n?o(e,a,n,s):o(e)),void 0!==i)return i;if(!_(e))return e;var u=G(e);if(u){if(i=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&It.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(e),!c)return function(t,e){var r=-1,o=t.length;for(e||(e=Array(o));++r<o;)e[r]=t[r];return e}(e,i)}else{var d=Wt(e),p="[object Function]"==d||"[object GeneratorFunction]"==d;if(Object(Z.a)(e))return Object(jt.a)(e,c);if("[object Object]"==d||"[object Arguments]"==d||p&&!n){if(i=l||p?{}:function(t){return"function"!=typeof t.constructor||ut(t)?{}:Yt(wt(t))}(e),!c)return l?function(t,e){return J(t,kt(t),e)}(e,function(t,e){return t&&J(e,vt(e),t)}(i,e)):function(t,e){return J(t,Ot(t),e)}(e,function(t,e){return t&&J(e,gt(e),t)}(i,e))}else{if(!Zt[d])return n?e:{};i=function(t,e,r){var o,a,n=t.constructor;switch(e){case"[object ArrayBuffer]":return qt(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return function(t,e){var r=e?qt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var r=e?qt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return(a=new(o=t).constructor(o.source,Vt.exec(o))).lastIndex=o.lastIndex,a;case"[object Set]":return new n;case"[object Symbol]":return $t?Object($t.call(t)):{}}}(e,d,c)}}s||(s=new W);var b=s.get(e);if(b)return b;s.set(e,i),Gt(e)?e.forEach(function(a){i.add(t(a,r,o,a,e,s))}):Xt(e)&&e.forEach(function(a,n){i.set(n,t(a,r,o,n,e,s))});var f=u?void 0:(h?l?xt:At:l?vt:gt)(e);return function(t,e){for(var r=-1,o=null==t?0:t.length;++r<o&&!1!==e(t[r],r););}(f||e,function(a,n){f&&(a=e[n=a]),V(i,n,t(a,r,o,n,e,s))}),i},ee=r("MO+k");const re=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]];function oe(t,e){return"rgba("+t.concat(e).join(",")+")"}function ae(t,e){return Math.floor(Math.random()*(e-t+1))+t}function ne(t){return{backgroundColor:t.map(t=>oe(t,.6)),borderColor:t.map(()=>"#fff"),pointBackgroundColor:t.map(t=>oe(t,1)),pointBorderColor:t.map(()=>"#fff"),pointHoverBackgroundColor:t.map(t=>oe(t,1)),pointHoverBorderColor:t.map(t=>oe(t,1))}}function se(){return[ae(0,255),ae(0,255),ae(0,255)]}function ie(t){return re[t]||se()}function ce(t){const e=new Array(t);for(let r=0;r<t;r++)e[r]=re[r]||se();return e}let le=(()=>{class t{constructor(){this.pColorschemesOptions={},this.colorschemesOptions=new n.a({})}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(a.Rb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const he={Default:0,Update:1,Refresh:2};he[he.Default]="Default",he[he.Update]="Update",he[he.Refresh]="Refresh";let ue=(()=>{class t{constructor(t,e){this.element=t,this.themeService=e,this.options={},this.chartClick=new a.q,this.chartHover=new a.q,this.old={dataExists:!1,dataLength:0,datasetsExists:!1,datasetsLength:0,datasetsDataObjects:[],datasetsDataLengths:[],colorsExists:!1,colors:[],labelsExist:!1,labels:[],legendExists:!1,legend:{}},this.subs=[]}static registerPlugin(t){ee.pluginService.register(t)}static unregisterPlugin(t){ee.pluginService.unregister(t)}ngOnInit(){this.ctx=this.element.nativeElement.getContext("2d"),this.refresh(),this.subs.push(this.themeService.colorschemesOptions.subscribe(t=>this.themeChanged(t)))}themeChanged(t){this.refresh()}ngDoCheck(){if(!this.chart)return;let t=he.Default;const e=e=>{t=e>t?e:t};switch(!!this.data!==this.old.dataExists&&(this.propagateDataToDatasets(this.data),this.old.dataExists=!!this.data,e(he.Update)),this.data&&this.data.length!==this.old.dataLength&&(this.old.dataLength=this.data&&this.data.length||0,e(he.Update)),!!this.datasets!==this.old.datasetsExists&&(this.old.datasetsExists=!!this.datasets,e(he.Update)),this.datasets&&this.datasets.length!==this.old.datasetsLength&&(this.old.datasetsLength=this.datasets&&this.datasets.length||0,e(he.Update)),this.datasets&&this.datasets.filter((t,e)=>t.data!==this.old.datasetsDataObjects[e]).length&&(this.old.datasetsDataObjects=this.datasets.map(t=>t.data),e(he.Update)),this.datasets&&this.datasets.filter((t,e)=>t.data.length!==this.old.datasetsDataLengths[e]).length&&(this.old.datasetsDataLengths=this.datasets.map(t=>t.data.length),e(he.Update)),!!this.colors!==this.old.colorsExists&&(this.old.colorsExists=!!this.colors,this.updateColors(),e(he.Update)),this.colors&&this.colors.filter((t,e)=>!this.colorsEqual(t,this.old.colors[e])).length&&(this.old.colors=this.colors.map(t=>this.copyColor(t)),this.updateColors(),e(he.Update)),!!this.labels!==this.old.labelsExist&&(this.old.labelsExist=!!this.labels,e(he.Update)),this.labels&&this.labels.filter((t,e)=>!this.labelsEqual(t,this.old.labels[e])).length&&(this.old.labels=this.labels.map(t=>this.copyLabel(t)),e(he.Update)),!!this.options.legend!==this.old.legendExists&&(this.old.legendExists=!!this.options.legend,e(he.Refresh)),this.options.legend&&this.options.legend.position!==this.old.legend.position&&(this.old.legend.position=this.options.legend.position,e(he.Refresh)),t){case he.Default:break;case he.Update:this.update();break;case he.Refresh:this.refresh()}}copyLabel(t){return Array.isArray(t)?[...t]:t}labelsEqual(t,e){return Array.isArray(t)===Array.isArray(e)&&(Array.isArray(t)||t===e)&&(!Array.isArray(t)||t.length===e.length)&&(!Array.isArray(t)||0===t.filter((t,r)=>t!==e[r]).length)}copyColor(t){return{backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderColor:t.borderColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,pointBorderColor:t.pointBorderColor,pointBackgroundColor:t.pointBackgroundColor,pointBorderWidth:t.pointBorderWidth,pointRadius:t.pointRadius,pointHoverRadius:t.pointHoverRadius,pointHitRadius:t.pointHitRadius,pointHoverBackgroundColor:t.pointHoverBackgroundColor,pointHoverBorderColor:t.pointHoverBorderColor,pointHoverBorderWidth:t.pointHoverBorderWidth,pointStyle:t.pointStyle,hoverBackgroundColor:t.hoverBackgroundColor,hoverBorderColor:t.hoverBorderColor,hoverBorderWidth:t.hoverBorderWidth}}colorsEqual(t,e){return!t==!e&&(!t||t.backgroundColor===e.backgroundColor&&t.borderWidth===e.borderWidth&&t.borderColor===e.borderColor&&t.borderCapStyle===e.borderCapStyle&&t.borderDash===e.borderDash&&t.borderDashOffset===e.borderDashOffset&&t.borderJoinStyle===e.borderJoinStyle&&t.pointBorderColor===e.pointBorderColor&&t.pointBackgroundColor===e.pointBackgroundColor&&t.pointBorderWidth===e.pointBorderWidth&&t.pointRadius===e.pointRadius&&t.pointHoverRadius===e.pointHoverRadius&&t.pointHitRadius===e.pointHitRadius&&t.pointHoverBackgroundColor===e.pointHoverBackgroundColor&&t.pointHoverBorderColor===e.pointHoverBorderColor&&t.pointHoverBorderWidth===e.pointHoverBorderWidth&&t.pointStyle===e.pointStyle&&t.hoverBackgroundColor===e.hoverBackgroundColor&&t.hoverBorderColor===e.hoverBorderColor&&t.hoverBorderWidth===e.hoverBorderWidth)}updateColors(){this.datasets.forEach((t,e)=>{this.colors&&this.colors[e]?Object.assign(t,this.colors[e]):Object.assign(t,function(t,e,r){if("pie"===t||"doughnut"===t)return ne(ce(r));if("polarArea"===t)return{backgroundColor:(o=ce(r)).map(t=>oe(t,.6)),borderColor:o.map(t=>oe(t,1)),hoverBackgroundColor:o.map(t=>oe(t,.8)),hoverBorderColor:o.map(t=>oe(t,1))};var o;if("line"===t||"radar"===t)return function(t){return{backgroundColor:oe(t,.4),borderColor:oe(t,1),pointBackgroundColor:oe(t,1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:oe(t,.8)}}(ie(e));if("bar"===t||"horizontalBar"===t)return function(t){return{backgroundColor:oe(t,.6),borderColor:oe(t,1),hoverBackgroundColor:oe(t,.8),hoverBorderColor:oe(t,1)}}(ie(e));if("bubble"===t)return ne(ce(r));if("scatter"===t)return ne(ce(r));throw new Error(`getColors - Unsupported chart type ${t}`)}(this.chartType,e,t.data.length),Object.assign({},t))})}ngOnChanges(t){let e=he.Default;const r=t=>{e=t>e?t:e};switch(t.hasOwnProperty("data")&&t.data.currentValue&&(this.propagateDataToDatasets(t.data.currentValue),r(he.Update)),t.hasOwnProperty("datasets")&&t.datasets.currentValue&&(this.propagateDatasetsToData(t.datasets.currentValue),r(he.Update)),t.hasOwnProperty("labels")&&(this.chart&&(this.chart.data.labels=t.labels.currentValue),r(he.Update)),t.hasOwnProperty("legend")&&(this.chart&&(this.chart.config.options.legend.display=t.legend.currentValue,this.chart.generateLegend()),r(he.Update)),t.hasOwnProperty("options")&&r(he.Refresh),e){case he.Update:this.update();break;case he.Refresh:case he.Default:this.refresh()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}update(t){if(this.chart)return this.chart.update(t)}hideDataset(t,e){this.chart.getDatasetMeta(t).hidden=e,this.chart.update()}isDatasetHidden(t){return this.chart.getDatasetMeta(t).hidden}toBase64Image(){return this.chart.toBase64Image()}getChartConfiguration(){const t=this.getDatasets(),e=Object.assign({},this.options);!1===this.legend&&(e.legend={display:!1}),e.hover=e.hover||{},e.hover.onHover||(e.hover.onHover=(t,e)=>{e&&!e.length||this.chartHover.emit({event:t,active:e})}),e.onClick||(e.onClick=(t,e)=>{this.chartClick.emit({event:t,active:e})});const r=this.smartMerge(e,this.themeService.getColorschemesOptions());return{type:this.chartType,data:{labels:this.labels||[],datasets:t},plugins:this.plugins,options:r}}getChartBuilder(t){const e=this.getChartConfiguration();return new ee.Chart(t,e)}smartMerge(t,e,r=0){if(0===r&&(t=te(t,5)),Object.keys(e).forEach(o=>{if(Array.isArray(e[o])){const a=t[o];a&&a.forEach(t=>{this.smartMerge(t,e[o][0],r+1)})}else"object"==typeof e[o]?(o in t||(t[o]={}),this.smartMerge(t[o],e[o],r+1)):t[o]=e[o]}),0===r)return t}isMultiLineLabel(t){return Array.isArray(t)}joinLabel(t){return t?this.isMultiLineLabel(t)?t.join(" "):t:null}propagateDatasetsToData(t){this.data=this.datasets.map(t=>t.data),this.chart&&(this.chart.data.datasets=t),this.updateColors()}propagateDataToDatasets(t){this.isMultiDataSet(t)?this.datasets&&t.length===this.datasets.length?this.datasets.forEach((e,r)=>{e.data=t[r]}):(this.datasets=t.map((t,e)=>({data:t,label:this.joinLabel(this.labels[e])||`Label ${e}`})),this.chart&&(this.chart.data.datasets=this.datasets)):this.datasets?(this.datasets[0]||(this.datasets[0]={}),this.datasets[0].data=t,this.datasets.splice(1)):(this.datasets=[{data:t}],this.chart&&(this.chart.data.datasets=this.datasets)),this.updateColors()}isMultiDataSet(t){return Array.isArray(t[0])}getDatasets(){if(!this.datasets&&!this.data)throw new Error(`ng-charts configuration error, data or datasets field are required to render chart ${this.chartType}`);return this.datasets?(this.propagateDatasetsToData(this.datasets),this.datasets):this.data?(this.propagateDataToDatasets(this.data),this.datasets):void 0}refresh(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.ctx&&(this.chart=this.getChartBuilder(this.ctx))}}return t.\u0275fac=function(e){return new(e||t)(a.Vb(a.o),a.Vb(le))},t.\u0275dir=a.Qb({type:t,selectors:[["canvas","baseChart",""]],inputs:{options:"options",data:"data",datasets:"datasets",labels:"labels",chartType:"chartType",colors:"colors",legend:"legend",plugins:"plugins"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[a.Hb]}),t})(),de=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Tb({type:t}),t.\u0275inj=a.Sb({imports:[[]]}),t})();var pe=r("cplz");function be(t,e){if(1&t){const t=a.cc();a.bc(0,"div",15),a.bc(1,"canvas",16),a.ic("chartHover",function(e){return a.Ec(t),a.kc().chartHovered(e)})("chartClick",function(e){return a.Ec(t),a.kc().chartClicked(e)}),a.ac(),a.ac()}if(2&t){const t=a.kc();a.Jb(1),a.qc("datasets",t.lineChartData)("labels",t.lineChartLabels)("options",t.lineChartOptions)("colors",t.lineChartColors)("legend",t.lineChartLegend)("chartType",t.lineChartType)}}function fe(t,e){if(1&t&&(a.bc(0,"tr"),a.bc(1,"td"),a.Mc(2),a.lc(3,"date"),a.ac(),a.bc(4,"td"),a.Mc(5),a.lc(6,"number"),a.ac(),a.bc(7,"td"),a.Mc(8),a.lc(9,"number"),a.ac(),a.ac()),2&t){const t=e.$implicit;a.Jb(2),a.Nc(a.nc(3,3,t.Date,"DD/MM/YYYY")),a.Jb(3),a.Oc("",a.mc(6,6,t.Revenues)," VND"),a.Jb(3),a.Oc("",a.mc(9,8,t.Benefit)," VND")}}function ge(t,e){if(1&t&&(a.bc(0,"table",17),a.bc(1,"tr"),a.bc(2,"th"),a.Mc(3,"Ng\xe0y"),a.ac(),a.bc(4,"th"),a.Mc(5,"Doanh thu"),a.ac(),a.bc(6,"th"),a.Mc(7,"L\u1ee3i nhu\u1eadn"),a.ac(),a.ac(),a.Kc(8,fe,10,10,"tr",18),a.ac()),2&t){const t=a.kc();a.Jb(8),a.qc("ngForOf",t.tableData)}}let ye=(()=>{class t{constructor(t){this._dataService=t,this.fromDate="",this.toDate="",this.lineChartData=[{data:[],label:"L\u1ee3i nhu\u1eadn"},{data:[],label:"Doanh thu"}],this.lineChartLabels=[],this.lineChartOptions={responsive:!0},this.lineChartColors=[{backgroundColor:"rgba(148,159,177,0.2)",borderColor:"rgba(148,159,177,1)",pointBackgroundColor:"rgba(148,159,177,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(77,83,96,0.2)",borderColor:"rgba(77,83,96,1)",pointBackgroundColor:"rgba(77,83,96,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(148,159,177,0.2)",borderColor:"rgba(148,159,177,1)",pointBackgroundColor:"rgba(148,159,177,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(148,159,177,0.8)"}],this.lineChartLegend=!0,this.lineChartType="line"}chartClicked(t){console.log(t)}chartHovered(t){console.log(t)}ngOnInit(){this.loadRevenues()}refreshChart(){setTimeout(()=>{this.chart&&this.chart.chart&&this.chart.chart.config&&(this.chart.chart.config.data.labels=this.lineChartLabels,this.chart.chart.config.data.datasets=this.lineChartData,this.chart.chart.update())})}loadRevenues(){this._dataService.get("/statistic/getrevenue?fromDate="+this.fromDate+"&toDate="+this.toDate).subscribe(t=>{this.lineChartLabels=[],this.lineChartData=[];var e={data:[],label:"Doanh thu"},r={data:[],label:"L\u1ee3i nhu\u1eadn"};this.tableData=[];for(let o of t)e.data.push(o.Benefit),r.data.push(o.Revenues),this.lineChartLabels.push(moment(o.Date).format("DD/MM/YYYY")),this.tableData=t;this.lineChartData.push(e),this.lineChartData.push(r),this.refreshChart()})}}return t.\u0275fac=function(e){return new(e||t)(a.Vb(pe.a))},t.\u0275cmp=a.Pb({type:t,selectors:[["app-revenue"]],viewQuery:function(t,e){if(1&t&&a.Qc(ue,1),2&t){let t;a.zc(t=a.jc())&&(e.chart=t.first)}},decls:19,vars:2,consts:[[1,"page-title"],[1,"title_left"],[1,"title_right"],[1,"col-md-5","col-sm-5","col-xs-12","form-group","pull-right","top_search"],[1,"input-group"],["type","text","placeholder","Search for...",1,"form-control"],[1,"input-group-btn"],["type","button",1,"btn","btn-default"],[1,"clearfix"],[1,"row"],[1,"col-md-6"],["style","display:block;",4,"ngIf"],[1,"col-md-6",2,"margin-bottom","10px"],["class","table table-responsive table-condensed",4,"ngIf"],[3,"click"],[2,"display","block"],["baseChart","","width","400","height","400",3,"datasets","labels","options","colors","legend","chartType","chartHover","chartClick"],[1,"table","table-responsive","table-condensed"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(a.bc(0,"div",0),a.bc(1,"div",1),a.bc(2,"h3"),a.Mc(3,"Th\u1ed1ng k\xea doanh thu"),a.ac(),a.ac(),a.bc(4,"div",2),a.bc(5,"div",3),a.bc(6,"div",4),a.Wb(7,"input",5),a.bc(8,"span",6),a.bc(9,"button",7),a.Mc(10,"Go!"),a.ac(),a.ac(),a.ac(),a.ac(),a.ac(),a.ac(),a.Wb(11,"div",8),a.bc(12,"div",9),a.bc(13,"div",10),a.Kc(14,be,2,6,"div",11),a.ac(),a.bc(15,"div",12),a.Kc(16,ge,9,1,"table",13),a.bc(17,"button",14),a.ic("click",function(){return e.loadRevenues()}),a.Mc(18,"T\u1ea3i l\u1ea1i s\u1ed1 li\u1ec7u"),a.ac(),a.ac(),a.ac()),2&t&&(a.Jb(14),a.qc("ngIf",e.lineChartData&&e.lineChartLabels),a.Jb(2),a.qc("ngIf",e.lineChartData&&e.lineChartLabels))},directives:[o.m,ue,o.l],pipes:[o.e,o.f],styles:[""]}),t})();const ve=r("tyNb").f.forChild([{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:ye},{path:"revenue",component:ye}]);let je=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Tb({type:t}),t.\u0275inj=a.Sb({imports:[[o.c,ve,de]]}),t})()},"Ju5/":function(t,e,r){"use strict";var o=r("XqMk"),a="object"==typeof self&&self&&self.Object===Object&&self,n=o.a||a||Function("return this")();e.a=n},L3Qv:function(t,e,r){"use strict";e.a=function(){return!1}},WOAq:function(t,e,r){"use strict";(function(t){var o=r("Ju5/"),a=r("L3Qv"),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=n&&"object"==typeof t&&t&&!t.nodeType&&t,i=s&&s.exports===n?o.a.Buffer:void 0;e.a=(i?i.isBuffer:void 0)||a.a}).call(this,r("3UD+")(t))},XqMk:function(t,e,r){"use strict";var o="object"==typeof global&&global&&global.Object===Object&&global;e.a=o},xutz:function(t,e,r){"use strict";(function(t){var o=r("XqMk"),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,n=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=n&&n.exports===a&&o.a.process,i=function(){try{return n&&n.require&&n.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();e.a=i}).call(this,r("3UD+")(t))}}]);