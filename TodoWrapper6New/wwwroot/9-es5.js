!function(){function t(t,a){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,a){if(!t)return;if("string"==typeof t)return e(t,a);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,a)}(t))||a&&t&&"number"==typeof t.length){n&&(t=n);var i=0,c=function(){};return{s:c,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,r=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){r=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(r)throw s}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var a,n=c(t);if(e){var s=c(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return i(this,a)}}function i(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,a){return e&&o(t.prototype,e),a&&o(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"4fRq":function(t,e){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var n=new Uint8Array(16);t.exports=function(){return a(n),n}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},EcEN:function(t,e,a){var n=a("xDdU"),i=a("xk4V"),c=i;c.v1=n,c.v4=i,t.exports=c},I2ZF:function(t,e){for(var a=[],n=0;n<256;++n)a[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0;return[a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]]].join("")}},XOxn:function(t){t.exports=JSON.parse('{"TaskTodoTemplateDetailForm":{"ColumnInfo":{"Code":{"Name":"Code","Caption":"M\xe3 vi\u1ec7c","DataType":"string","Width":100,"AllowEditing":true},"Description":{"Name":"Description","Caption":"N\u1ed9i dung c\xf4ng vi\u1ec7c","DataType":"string","Width":200,"AllowEditing":true},"DetaiSettings":{"Name":"DetaiSettings","Caption":"Thi\u1ebft l\u1eadp chi ti\u1ebft","DataType":"string","Width":300,"AllowEditing":true}}}}')},bAuk:function(t){t.exports=JSON.parse('{"TaskSubscriptionForm":{"ColumnInfo":{"UserName":{"Name":"UserName","Caption":"T\xean ng\u01b0\u1eddi theo d\xf5i","Width":130},"VehicleName":{"Name":"VehicleName","Caption":"Ph\u01b0\u01a1ng ti\u1ec7n v\u1eadn chuy\u1ec3n","Width":130},"SubctiptionType":{"Name":"SubctiptionType","Caption":"Lo\u1ea1i th\xf4ng b\xe1o","Width":100},"Description":{"Name":"Description","Caption":"Di\u1ec5n gi\u1ea3i","Width":130}}}}')},joGx:function(t){t.exports=JSON.parse('{"TaskTodoTemplateForm":{"ColumnInfo":{"Code":{"Name":"Code","Caption":"M\xe3 nh\xf3m vi\u1ec7c","DataType":"string","Width":120,"AllowEditing":true},"CategoryId":{"Name":"CategoryId","Caption":"Ph\xe2n lo\u1ea1i","DataType":"number","Width":100,"AllowEditing":true},"Description":{"Name":"Description","Caption":"Di\u1ec5n gi\u1ea3i","DataType":"string","Width":200,"AllowEditing":true}}}}')},kusE:function(e,i,c){"use strict";c.r(i),c.d(i,"TaskManagerModule",function(){return qn});var o,l=c("ofXK"),d=c("tyNb"),u=c("mrSG"),b=c("fXoL"),m=c("K3ix"),h=c("sYmb"),g=((o=function(){function t(e,a){s(this,t),this.modalService=e,this.modalRefConfirm=a,this.event=new b.q}return r(t,[{key:"ngOnInit",value:function(){}},{key:"confirm",value:function(){this.triggerEvent(!0),this.modalRefConfirm.hide()}},{key:"decline",value:function(){this.triggerEvent(!1),this.modalRefConfirm.hide()}},{key:"triggerEvent",value:function(t){this.event.emit(t)}}]),t}()).\u0275fac=function(t){return new(t||o)(b.Vb(m.b),b.Vb(m.a))},o.\u0275cmp=b.Pb({type:o,selectors:[["app-confirm-popup"]],decls:10,vars:9,consts:[[1,"modal-body","text-center"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,e){1&t&&(b.bc(0,"div",0),b.bc(1,"p"),b.Mc(2),b.lc(3,"translate"),b.ac(),b.bc(4,"button",1),b.ic("click",function(){return e.confirm()}),b.Mc(5),b.lc(6,"translate"),b.ac(),b.bc(7,"button",2),b.ic("click",function(){return e.decline()}),b.Mc(8),b.lc(9,"translate"),b.ac(),b.ac()),2&t&&(b.Jb(2),b.Nc(b.mc(3,3,e.title)),b.Jb(3),b.Nc(b.mc(6,5,"yes")),b.Jb(3),b.Nc(b.mc(9,7,"no")))},pipes:[h.c],styles:[""]}),o),p=c("3zFB"),f=c("3Pt+"),k=c("raoF"),v=c("EcEN"),_=c("Y4+Y"),y=c("GSif"),M=c("9+W7"),T=c("cplz"),C=c("hzby"),I=c("kUHs"),D=c("44PX"),A=c("fB2i"),J=c("lUod"),w=["*"];function S(t,e){1&t&&b.Xb(0)}function N(t,e){if(1&t&&(b.bc(0,"bar",3),b.oc(1),b.ac()),2&t){var a=b.kc();b.qc("type",a.type)("value",a._value)("max",a.max)("animate",a.animate)("striped",a.striped)}}function O(t,e){if(1&t&&(b.bc(0,"bar",3),b.Mc(1),b.ac()),2&t){var a=e.$implicit,n=b.kc(2);b.qc("type",a.type)("value",a.value)("max",a.max)("animate",n.animate)("striped",n.striped),b.Jb(1),b.Nc(a.label)}}function P(t,e){if(1&t&&b.Kc(0,O,2,6,"bar",4),2&t){var a=b.kc();b.qc("ngForOf",a._values)}}var x,E,F,q,L,K,V,R,U,W=((V=function(){function t(e,a){s(this,t),this.el=e,this.renderer=a,this.max=100,this.value=0,this.animate=!1,this.striped=!1,this.type="info",this.percent=100}return r(t,[{key:"isBs3",get:function(){return Object(J.d)()}},{key:"ngOnChanges",value:function(t){var e;(t.value||t.max)&&(this.percent=Number(t.value.currentValue||0)/Number((null===(e=t.max)||void 0===e?void 0:e.currentValue)||this.max||100)*100),t.type&&this.applyTypeClasses()}},{key:"applyTypeClasses",value:function(){if(this._prevType){var t="bg-".concat(this._prevType);this.renderer.removeClass(this.el.nativeElement,"progress-bar-".concat(this._prevType)),this.renderer.removeClass(this.el.nativeElement,t),this._prevType=void 0}if(this.type){var e="bg-".concat(this.type);this.renderer.addClass(this.el.nativeElement,"progress-bar-".concat(this.type)),this.renderer.addClass(this.el.nativeElement,e),this._prevType=this.type}}}]),t}()).\u0275fac=function(t){return new(t||V)(b.Vb(b.o),b.Vb(b.M))},V.\u0275cmp=b.Pb({type:V,selectors:[["bar"]],hostAttrs:["role","progressbar","aria-valuemin","0"],hostVars:15,hostBindings:function(t,e){2&t&&(b.Kb("aria-valuenow",e.value)("aria-valuetext",e.percent?e.percent.toFixed(0)+"%":"")("aria-valuemax",e.max),b.Jc("height","100","%")("width",e.percent,"%"),b.Nb("progress-bar",!0)("progress-bar-animated",!e.isBs3&&e.animate)("progress-bar-striped",e.striped)("active",e.isBs3&&e.animate))},inputs:{max:"max",value:"value",animate:"animate",striped:"striped",type:"type"},features:[b.Hb],ngContentSelectors:w,decls:1,vars:0,template:function(t,e){1&t&&(b.pc(),b.oc(0))},encapsulation:2,changeDetection:0}),V),j=((K=function t(){s(this,t),this.animate=!1,this.max=100}).\u0275fac=function(t){return new(t||K)},K.\u0275prov=Object(b.Rb)({factory:function(){return new K},token:K,providedIn:"root"}),K),B=((L=function(){function t(e){s(this,t),this.max=100,this.animate=!1,this.striped=!1,this.isStacked=!1,this._value=0,Object.assign(this,e)}return r(t,[{key:"value",set:function(t){this.isStacked=Array.isArray(t),"number"==typeof t?(this._value=t,this._values=void 0):(this._value=void 0,this._values=t)}}]),t}()).\u0275fac=function(t){return new(t||L)(b.Vb(j))},L.\u0275cmp=b.Pb({type:L,selectors:[["progressbar"]],hostVars:3,hostBindings:function(t,e){2&t&&(b.Kb("max",e.max),b.Nb("progress",!0))},inputs:{max:"max",animate:"animate",striped:"striped",value:"value",type:"type"},ngContentSelectors:w,decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["NotStacked",""],["Stacked",""],[3,"type","value","max","animate","striped"],[3,"type","value","max","animate","striped",4,"ngFor","ngForOf"]],template:function(t,e){if(1&t&&(b.pc(),b.Kc(0,S,1,0,"ng-container",0),b.Kc(1,N,2,5,"ng-template",null,1,b.Lc),b.Kc(3,P,1,1,"ng-template",null,2,b.Lc)),2&t){var a=b.Ac(2),n=b.Ac(4);b.qc("ngIf",!e.isStacked)("ngIfThen",a)("ngIfElse",n)}},directives:[l.m,W,l.l],styles:["[_nghost-%COMP%] {\n      width: 100%;\n      display: flex;\n    }"],changeDetection:0}),L),$=((q=function(){function t(){s(this,t)}return r(t,null,[{key:"forRoot",value:function(){return{ngModule:t,providers:[]}}}]),t}()).\u0275fac=function(t){return new(t||q)},q.\u0275mod=b.Tb({type:q}),q.\u0275inj=b.Sb({imports:[[l.c]]}),q),G=((F=function(){function t(e){s(this,t),this.translate=e}return r(t,[{key:"transform",value:function(t){return 1==t?this.translate.instant("task_manager_status_created"):2==t?this.translate.instant("task_manager_status_process"):4==t?this.translate.instant("task_manager_status_completed"):1024==t?this.translate.instant("task_manager_status_finished"):void 0}}]),t}()).\u0275fac=function(t){return new(t||F)(b.Vb(h.d))},F.\u0275pipe=b.Ub({name:"statusPipe",type:F,pure:!0}),F),z=((E=function(){function t(e){s(this,t),this.translate=e}return r(t,[{key:"transform",value:function(t){return this.translate.instant(1==t?"task_manager_task_priority_low":2==t?"task_manager_task_priority_medium":"task_manager_task_priority_high")}}]),t}()).\u0275fac=function(t){return new(t||E)(b.Vb(h.d))},E.\u0275pipe=b.Ub({name:"priorityPipe",type:E,pure:!0}),E),H=((x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e=n(i);function i(){return s(this,i),e.apply(this,arguments)}return r(i,[{key:"transform",value:function(t,e){if(t){var a=(t=new Date(t)).toLocaleTimeString(),n=t.getMonth()+1;return t.getDate()+" th\xe1ng "+n+" l\xfac "+a}}}]),i}(l.e)).\u0275fac=function(t){return Q(t||x)},x.\u0275pipe=b.Ub({name:"datetimePipeEvent",type:x,pure:!0}),x),Q=b.dc(H),Y=((U=function(){function t(){s(this,t)}return r(t,[{key:"transform",value:function(t,e){var a=[];for(var n in t)n!==e&&a.push({key:n,obj:t[n]});return a}}]),t}()).\u0275fac=function(t){return new(t||U)},U.\u0275pipe=b.Ub({name:"jsonToArray",type:U,pure:!0}),U),X=((R=function(){function t(e){s(this,t),this.translate=e}return r(t,[{key:"transform",value:function(t){return this.translate.instant(1==t?"OnScreen":2==t?"SMS":4==t?"Email":"None")}}]),t}()).\u0275fac=function(t){return new(t||R)(b.Vb(h.d))},R.\u0275pipe=b.Ub({name:"subctiptionTypePipe",type:R,pure:!0}),R);function Z(t,e){1&t&&(b.bc(0,"h4",56),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"task_manager_create_new_task")))}function tt(t,e){1&t&&(b.bc(0,"h4",56),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"task_manager_update_task")))}function et(t,e){1&t&&(b.bc(0,"small",57),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function at(t,e){1&t&&(b.bc(0,"small",57),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function nt(t,e){if(1&t&&(b.bc(0,"option",58),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.qc("value",a.Id),b.Jb(1),b.Nc(a.Name)}}function it(t,e){1&t&&(b.bc(0,"small",57),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function ct(t,e){if(1&t&&(b.bc(0,"option",58),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.qc("value",a.Id),b.Jb(1),b.Nc(a.UserName)}}var st=function(t){return{hidden:t}};function ot(t,e){if(1&t){var a=b.cc();b.bc(0,"div",60),b.ic("mouseover",function(){b.Ec(a);var t=b.kc().$implicit;return b.kc().isActionTodo=t.Id})("mouseout",function(){return b.Ec(a),b.kc(2).isActionTodo=void 0}),b.bc(1,"input",61),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc(2).todoCode=t}),b.ac(),b.bc(2,"input",62),b.ic("change",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().FinishTaskToDo(t,e)}),b.ac(),b.bc(3,"span"),b.Mc(4),b.ac(),b.bc(5,"span",63),b.bc(6,"a",64),b.ic("click",function(){b.Ec(a);var t=b.kc().$implicit;return b.kc().onChangeItemTodo(t.Id,t.Description,t.Code)}),b.Wb(7,"i",65),b.ac(),b.bc(8,"a",64),b.ic("click",function(){b.Ec(a);var t=b.kc().$implicit;return b.kc().onDeleteItemTodo(t)}),b.Wb(9,"i",66),b.ac(),b.ac(),b.ac()}if(2&t){var n=b.kc().$implicit,i=b.kc();b.Jb(1),b.qc("ngModel",i.todoCode),b.Jb(1),b.qc("checked",n.Finished)("disabled",0==n.Id),b.Jb(2),b.Oc(" ",n.Description,""),b.Jb(1),b.qc("ngClass",b.uc(5,st,i.isActionTodo!==n.Id))}}function rt(t,e){if(1&t&&(b.bc(0,"div"),b.Kc(1,ot,10,7,"div",59),b.ac()),2&t){var a=e.$implicit,n=b.kc();b.Jb(1),b.qc("ngIf",0==a.Id||n.editTodoId!=a.Id)}}function lt(t,e){if(1&t){var a=b.cc();b.bc(0,"button",67),b.ic("click",function(){b.Ec(a);var t=b.kc();return t.isToDoItem=!t.isToDoItem}),b.Mc(1),b.lc(2,"translate"),b.ac()}2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"button_cell_add")))}function dt(t,e){1&t&&(b.bc(0,"small",57),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function ut(t,e){if(1&t){var a=b.cc();b.bc(0,"div",68),b.bc(1,"div"),b.bc(2,"input",69),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc().descriptionTaskToDo=t}),b.ac(),b.Kc(3,dt,3,3,"small",11),b.ac(),b.bc(4,"button",47),b.ic("click",function(){b.Ec(a);var t=b.kc();return t.onSaveTaskToDo(t.editTodoId)}),b.Mc(5),b.lc(6,"translate"),b.ac(),b.bc(7,"a",70),b.ic("click",function(){return b.Ec(a),b.kc().onCloseInputTodoItem()}),b.Wb(8,"i",66),b.ac(),b.ac()}if(2&t){var n=b.kc();b.Jb(2),b.qc("ngModel",n.descriptionTaskToDo),b.Jb(1),b.qc("ngIf",n.requiredItemTodo),b.Jb(2),b.Nc(b.mc(6,3,"button_cell_save"))}}function bt(t,e){if(1&t&&(b.bc(0,"option",58),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.qc("value",a.Id),b.Jb(1),b.Oc(" ",a.Description,"")}}function mt(t,e){1&t&&(b.bc(0,"small",57),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function ht(t,e){if(1&t&&(b.bc(0,"th"),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.Jb(1),b.Oc(" ",a.obj.Caption," ")}}function gt(t,e){if(1&t&&(b.bc(0,"span"),b.Mc(1),b.ac()),2&t){var a=b.kc().$implicit,n=b.kc().$implicit;b.Jb(1),b.Nc(n[a.key])}}function pt(t,e){if(1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"date"),b.ac()),2&t){var a=b.kc().$implicit,n=b.kc().$implicit;b.Jb(1),b.Nc(b.nc(2,1,n[a.key],"dd/MM/yyyy"))}}function ft(t,e){if(1&t){var a=b.cc();b.bc(0,"input",75),b.ic("ngModelChange",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().$implicit[e.key]=t}),b.ac()}if(2&t){var n=b.kc().$implicit,i=b.kc().$implicit;b.qc("ngModel",i[n.key])}}var kt=function(){return{dateInputFormat:"DD-MM-YYYY",adaptivePosition:!0}};function vt(t,e){if(1&t){var a=b.cc();b.bc(0,"input",76),b.ic("ngModelChange",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().$implicit[e.key]=t}),b.ac()}if(2&t){var n=b.kc().$implicit,i=b.kc().$implicit;b.qc("ngModel",i[n.key])("bsConfig",b.tc(2,kt))}}function _t(t,e){if(1&t){var a=b.cc();b.bc(0,"input",77),b.ic("ngModelChange",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().$implicit[e.key]=t}),b.ac()}if(2&t){var n=b.kc().$implicit,i=b.kc().$implicit;b.qc("ngModel",i[n.key])}}function yt(t,e){if(1&t&&(b.bc(0,"option",58),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.qc("value",a.Id),b.Jb(1),b.Oc(" ",a.Code," ")}}function Mt(t,e){if(1&t){var a=b.cc();b.bc(0,"span"),b.bc(1,"select",78),b.ic("ngModelChange",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().$implicit[e.key]=t})("change",function(t){b.Ec(a);var e=b.kc(2).$implicit;return b.kc().setSelectedContact(t.target.value,e.Id)}),b.Kc(2,yt,2,2,"option",16),b.ac(),b.ac()}if(2&t){var n=b.kc().$implicit,i=b.kc().$implicit,c=b.kc();b.Jb(1),b.qc("ngModel",i[n.key]),b.Jb(1),b.qc("ngForOf",c.listContact)}}function Tt(t,e){if(1&t&&(b.bc(0,"td"),b.Kc(1,gt,2,1,"span",54),b.Kc(2,pt,3,4,"span",54),b.Kc(3,ft,1,1,"input",72),b.Kc(4,vt,1,3,"input",73),b.Kc(5,_t,1,1,"input",74),b.Kc(6,Mt,3,2,"span",54),b.ac()),2&t){var a=e.$implicit;b.Jb(1),b.qc("ngIf","date"!=a.obj.Type&&!a.obj.Editable),b.Jb(1),b.qc("ngIf","date"==a.obj.Type&&!a.obj.Editable),b.Jb(1),b.qc("ngIf","string"==a.obj.Type&&a.obj.Editable),b.Jb(1),b.qc("ngIf","date"==a.obj.Type&&a.obj.Editable),b.Jb(1),b.qc("ngIf","number"==a.obj.Type&&a.obj.Editable),b.Jb(1),b.qc("ngIf","select"==a.obj.Type&&a.obj.Editable)}}function Ct(t,e){if(1&t&&(b.bc(0,"tr",71),b.bc(1,"td"),b.Mc(2),b.ac(),b.Kc(3,Tt,7,6,"td",41),b.lc(4,"jsonToArray"),b.ac()),2&t){var a=e.index,n=b.kc();b.Jb(2),b.Nc(a+1),b.Jb(1),b.qc("ngForOf",b.nc(4,2,n.taskItemColumn,"CustomsCode"))}}function It(t,e){1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"button_add")))}function Dt(t,e){1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"button_update")))}var At,Jt,wt,St,Nt,Ot,Pt,xt,Et=function(){return{withTimepicker:!0,dateInputFormat:"DD-MM-YYYY",adaptivePosition:!0}},Ft=((At=function(){function e(t,a,n,i,c,o,r,l){s(this,e),this.bsModalRef=t,this.modalService=a,this.notificationService=n,this.datePipe=i,this._authenService=c,this.formBuilder=o,this.formErrors=r,this.dataService=l,this.list=[],this.errors={},this.loading=!1,this.initTiny={base_url:"/tinymce",height:250,language:"vi_VN",language_url:"./assets/tinymce/langs/vi_VN.js",plugins:"autosave autolink code codesample colorpicker emoticons fullscreen hr preview table textcolor wordcount",toolbar:"undo redo forecolor cut copy paste fontselect styleselect bold italic link preview code alignleft aligncenter alignright alignjustify"},this.taskItem={},this.event=new b.q,this.bsValue=new Date,this.hasTodo=!1,this.requiredItemTodo=!1,this.isToDoItem=!1,this.taskToDoTemplateList=[],this.listTaskToDo=[],this.listTaskItem=[],this.extenalTaskItems=[],this.maxProgressbar=0,this.progressing=0,this.userList=[],this.projectList=[],this.taskItemColumn=k.TaskForm.ColumnInfoTaskItem,this.taskItemAirColumn=[],this.taskItemSeaColumn=[],this.hasTaskItem=!1,this.Customer={},this.listContact=[],this.initForm(0)}return r(e,[{key:"ngOnInit",value:function(){var t=this._authenService.getLoggedInUser();this.loadDropdownControlData(),this.getUserIdLogin(t.userName),this.id=this.id?this.id:this.taskItem.Id,this.id?(this.hasTaskItem=!0,this.getTask(this.id),this.getTodoByTask(this.id),this.getItemByTask(this.id)):(this.initForm(1),this.importExternalTaskItems())}},{key:"getUserIdLogin",value:function(t){var e=this;if(t){var a=[];a.push("@UserName",t),this.dataService.post("/commands",{CommandText:"uspUser___FindUserName",CommandType:1025,Parameters:a}).subscribe(function(t){t.Data&&(e.userLoginId=t.Data[0].Id)})}}},{key:"getListUser",value:function(){var t=this,e=[];e.push("@ActivatedOnly",1),this.dataService.post("/commands",{CommandText:"uspUser___Fill",CommandType:1025,Parameters:e}).subscribe(function(e){e.Data&&(t.userList=e.Data)})}},{key:"getListProject",value:function(){var t=this;this.dataService.get("/projects").subscribe(function(e){e&&(t.projectList=e)})}},{key:"loadDropdownControlData",value:function(){this.getListUser(),this.getListProject(),this.getListToDoTemplate(),this.getListContact()}},{key:"getTask",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var a,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return(a=[]).push("@TaskId",t),n={CommandText:"uspTask___GetById",CommandType:1025,Parameters:a},e.next=6,this.dataService.post("/commands",n).toPromise().then(function(t){t.Data&&(i.taskItem=t.Data[0],i.fillFormData(i.taskItem))});case 6:case"end":return e.stop()}},e,this)}))}},{key:"getTodoByTask",value:function(t){var e=this;t&&this.dataService.get("/taskTodos/bytaskId/"+t+"?sort=CreatedOn ASC").subscribe(function(t){e.listTaskToDo=t,e.maxProgressbar=e.listTaskToDo.length,e.progressing=e.listTaskToDo.filter(function(t){return t.Finished}).length})}},{key:"getItemByTask",value:function(e){var a=this;if(e){var n=[];n.push("@TaskId",e),this.dataService.post("/commands",{CommandText:"uspTaskItem___ListByTaskId",CommandType:1025,Parameters:n}).toPromise().then(function(e){if(e.Data){a.listTaskItem=e.Data;var n=[],i=Object.assign(Object.assign(Object.assign({},a.taskItemColumn),a.taskItemSeaColumn),a.taskItemAirColumn);for(var c in i)"date"===i[c].type&&i[c].edit&&n.push(i[c].Name);var s,o=t(a.listTaskItem);try{for(o.s();!(s=o.n()).done;){var r,l=s.value,d=t(n);try{for(d.s();!(r=d.n()).done;){var u=r.value;l[u]=new Date(l[u])}}catch(b){d.e(b)}finally{d.f()}a.ConverCustomer(l.CustomerId,l.Id)}}catch(b){o.e(b)}finally{o.f()}}})}}},{key:"ConverCustomer",value:function(t,e){var a=this;if(t){var n=this.listTaskItem.find(function(t){return t.Id===e});this.dataService.get("/Contacts/"+t).subscribe(function(t){t&&(a.Customer=t,n.CustomsCode=a.Customer.Code,n.CustomerName=a.Customer.Name)})}}},{key:"showCreateTaskModel",value:function(){var t=null;this.bsModalRef=this.modalService.show(e,{initialState:{extenalTaskItems:t},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(function(e){e&&"Submit"==e.data&&(t=t.filter(function(t){return t.checked}))})}},{key:"importExternalTaskItems",value:function(){this.extenalTaskItems.length>0&&(this.listTaskItem=this.extenalTaskItems,this.hasTaskItem=!0)}},{key:"initForm",value:function(t){var e=this,a=0,n=0,i=0,c=0,s=0,o=0,r=0,l=0,d=new Date;t&&(o=this.userLoginId,n=1,c=1,s=1,r=1,l=0,i=1,this.taskToDoTemplateList.length>0&&(a=this.taskToDoTemplateList[0])),this.itemForm=this.formBuilder.group({Id:[""],GId:[""],Code:[""],ProjectId:[0,[f.u.required]],TaskDate:[new Date,[f.u.required]],TaskDateTime:[d],Title:["",[f.u.required]],TypeId:[r],OwnerId:[o],CategoryId:[n],Priority:[c],Status:[s],Finished:[l],ActualDate:[d],ActualDateTime:[d],DueDate:[d],DueDateTime:[d],TargetDate:[d],TargetDateTime:[d],EstimatedDuration:[i],Description:[""],JsonData:[""],AssignedTo:[o],TemplateId:[a]}),Object.keys(this.itemForm.controls).forEach(function(t){e.errors[t]=""}),this.itemForm.valueChanges.subscribe(function(t){e.errors=e.formErrors.validateForm(e.itemForm,e.errors,!0)})}},{key:"triggerEvent",value:function(t){this.event.emit({data:t})}},{key:"onSubmit",value:function(t){var e=this;if(this.loading=!0,this.formErrors.markFormGroupTouched(this.itemForm),this.itemForm.valid){var a=this.formatFormData(t);a.Description=this.descriptionTask,a.Status<=1&&(a.Status=2),a.HasDetails=3,this.id?(this.listTaskItem.length>0&&(a.HasDetails=3),a.ChangedBy=this.userLoginId,a.TaskItems=this.listTaskItem,a.TaskTodos=this.listTaskToDo):(a.GId=Object(v.v4)(),a.CreatedBy=this.userLoginId,a.OwnerId=this.userLoginId,this.listTaskItem.length>0&&this.listTaskItem.forEach(function(t){t.GId=Object(v.v4)(),t.CreatedBy=e.userLoginId,t.Id=null,t.TaskId=null}),a.TaskItems=this.listTaskItem,a.TaskTodos=this.listTaskToDo),this.dataService.post("/tasks/saveHierarchy",a).subscribe(function(t){e.id?(e.UpdateTaskAssigned(a),e.notificationService.printSuccessMessage(p.a.UPDATED_OK_MSG)):e.notificationService.printSuccessMessage(p.a.CREATED_OK_MSG),e.triggerEvent("Submit"),e.bsModalRef.hide()},function(t){return e.dataService.handleError(t)})}else this.loading=!1,this.errors=this.formErrors.validateForm(this.itemForm,this.errors,!1)}},{key:"UpdateTaskAssigned",value:function(t){var e=[];e.push("@TaskId",t.Id,"@AssignedTo",t.AssignedTo,"@Priority",t.Priority,"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___AssignTo",CommandType:1025,Parameters:e}).subscribe(function(t){})}},{key:"onActualDateTimeChanged",value:function(t){console.log(t)}},{key:"onDueDateTimeChanged",value:function(t){console.log(t)}},{key:"formatFormData",value:function(t){var e={};return t&&Object.keys(this.itemForm.controls).forEach(function(a){if(t[a])if("TaskDate"===a||"DueDate"===a||"TargetDate"===a||"ActualDate"===a){var n=t[a+"Time"];if(n){var i=n.getHours(),c=n.getMinutes(),s=n.getSeconds(),o=n.getMilliseconds(),r=t[a];r.setHours(0,0,0,0),r.setHours(i,c,s,o),r.setTime(r.getTime()-6e4*r.getTimezoneOffset()),e[a]=r}else{var l=t[a];l.setTime(l.getTime()-6e4*l.getTimezoneOffset()),e[a]=l}}else e[a]=t[a];else e[a]=null}),e}},{key:"onClose",value:function(){this.triggerEvent("Close"),this.bsModalRef.hide()}},{key:"fillFormData",value:function(t){var e=this;t&&(Object.keys(this.itemForm.controls).forEach(function(a){"TaskDate"===a||"DueDate"===a||"TargetDate"===a||"ActualDate"===a?(e.itemForm.controls[a].setValue(t[a]?new Date(t[a]):""),e.itemForm.controls[a+"Time"].setValue(t[a]?new Date(t[a]):"")):e.itemForm.controls[a].setValue(t[a]?t[a]:"")}),this.descriptionTask=t.Description,this.categoryId=t.CategoryId)}},{key:"onCloseInputTodoItem",value:function(){this.descriptionTaskToDo="",this.isToDoItem=!1,this.editTodoId=void 0,this.editTodoIndex=void 0,this.requiredItemTodo=!1}},{key:"onChangeItemTodo",value:function(t,e,a){var n=this.listTaskToDo.find(function(n){return n.Id===t&&n.Code===a&&n.Description===e});this.editTodoIndex=this.listTaskToDo.indexOf(n),this.editTodoId=t,this.isToDoItem=!0,this.descriptionTaskToDo=e,this.todoCode=a}},{key:"onDeleteItemTodo",value:function(t){var e=this;if(t.Id)this.dataService.delete("/taskTodos/"+t.Id).subscribe(function(a){var n=e.listTaskToDo.find(function(e){return e.Id===t.Id}),i=e.listTaskToDo.indexOf(n);e.listTaskToDo.splice(i,1),e.maxProgressbar=e.listTaskToDo.length,e.progressing=e.listTaskToDo.filter(function(t){return t.Finished}).length});else{var a=this.listTaskToDo.find(function(e){return e.Id===t.Id&&e.Description===t.Description}),n=this.listTaskToDo.indexOf(a);this.listTaskToDo.splice(n,1),this.maxProgressbar=this.listTaskToDo.length,this.progressing=this.listTaskToDo.filter(function(t){return t.Finished}).length}}},{key:"onSaveTaskToDo",value:function(t){var e,a=this;this.descriptionTaskToDo?(""===this.todoCode&&(this.todoCode=Object(v.v4)()),e=t?{taskId:this.id,Id:this.editTodoId,code:this.todoCode,description:this.descriptionTaskToDo,changedBy:this.userLoginId}:{taskId:this.id,code:this.todoCode,description:this.descriptionTaskToDo,createdBy:this.userLoginId},t?this.dataService.post("/taskTodos",e).subscribe(function(e){t?a.listTaskToDo.find(function(e){return e.Id===t}).Description=a.descriptionTaskToDo:a.listTaskToDo.push(e)}):this.editTodoIndex>=0?this.listTaskToDo[this.editTodoIndex].Description=this.descriptionTaskToDo:this.addNewTodoTemplate(),this.maxProgressbar=this.listTaskToDo.length,this.descriptionTaskToDo="",this.todoCode="",this.isToDoItem=!1,this.editTodoId=void 0,this.editTodoIndex=-1):this.requiredItemTodo=!0}},{key:"getListToDoTemplate",value:function(){var t=this;this.dataService.get("/TaskTodoTemplates?Sort=Code").subscribe(function(e){e&&(t.taskToDoTemplateList=e)})}},{key:"setSelectedToDoTemplate",value:function(t){this.selectedToDoTemplate=t}},{key:"setSelectedContact",value:function(t,e){this.ConverCustomer(t,e)}},{key:"addNewTodoTemplate",value:function(){""===this.todoCode&&(this.todoCode=Object(v.v4)()),this.listTaskToDo.push({Id:0,TaskId:this.id,Code:this.todoCode,Description:this.descriptionTaskToDo,Status:0,Finished:0}),this.maxProgressbar=this.listTaskToDo.length,this.descriptionTaskToDo="",this.todoCode="",this.isToDoItem=!1,this.editTodoId=void 0,this.editTodoIndex=-1}},{key:"addToDoItemFromTemplate",value:function(t){var e=this;this.dataService.get("/TaskTodoTemplateDetails/Paged?filter=TemplateId="+t+"&Sort=Code").subscribe(function(t){t.Data.forEach(function(t){""===t.Code&&(t.Code=Object(v.v4)()),e.listTaskToDo.find(function(e){return 0!==e.DetailId&&e.DetailId===t.Id||(null===e.DetailId||0===e.DetailId)&&e.Code===t.Code})||e.listTaskToDo.push({Id:0,TaskId:e.id,DetailId:t.Id,Code:t.Code,DetailType:t.DetailType,Description:t.Description,Status:0,Finished:0})}),e.maxProgressbar=e.listTaskToDo.length,e.descriptionTaskToDo="",e.todoCode="",e.isToDoItem=!1,e.editTodoId=void 0,e.editTodoIndex=-1})}},{key:"FinishTaskToDo",value:function(t,e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function a(){var n,i,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.target.checked){a.next=7;break}return n={CommandText:"uspTaskTodo___UpdateFinished",CommandType:1025,Parameters:["@Id",e.Id,"@Finished",1,"@ChangedBy",this.userLoginId,"@DetailValue",e.DetailValue]},a.next=4,this.dataService.post("/commands",n).subscribe(function(t){t.Data?(e.ChangedOn=t.Data[0].ChangedOn,e.ChangedByName=t.Data[0].ChangedByName):(e.ChangedOn=new Date,e.ChangedByName=""),e.Finished=!0});case 4:this.progressing=this.progressing+1,a.next=13;break;case 7:return(i=[]).push("@Id",e.Id,"@Finished",0,"@ChangedBy",this.userLoginId,"@DetailValue",null),c={CommandText:"uspTaskTodo___UpdateFinished",CommandType:1025,Parameters:i},a.next=12,this.dataService.post("/commands",c).subscribe(function(t){e.Finished=!1});case 12:this.progressing=this.progressing-1;case 13:if(a.t0=this.maxProgressbar>0,!a.t0){a.next=18;break}return this.taskItem.Status<4&&this.progressing==this.maxProgressbar?this.taskItem.Status=4:this.taskItem.Status>=4&&this.progressing<=this.maxProgressbar&&(this.taskItem.Status=2),a.next=18,this.UpdateTaskStatus();case 18:case"end":return a.stop()}},a,this)}))}},{key:"UpdateTaskStatus",value:function(){if(!(this.maxProgressbar<=0)){var t=2;this.progressing==this.maxProgressbar&&(t=4);var e=[];e.push("@TaskId",this.taskItem.Id,"@Status",t,"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___UpdateStatus",CommandType:1025,Parameters:e}).subscribe(function(t){})}}},{key:"getListContact",value:function(){var t=this;this.dataService.get("/Contacts?Sort=Code").subscribe(function(e){e&&(t.listContact=e)})}}]),e}()).\u0275fac=function(t){return new(t||At)(b.Vb(m.a),b.Vb(m.b),b.Vb(_.a),b.Vb(l.e),b.Vb(y.a),b.Vb(f.c),b.Vb(M.a),b.Vb(T.a))},At.\u0275cmp=b.Pb({type:At,selectors:[["app-task-item"]],decls:219,vars:143,consts:[[1,"modal-header"],["class","modal-title pull-left",4,"ngIf"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],["autocomplete","off",1,"form-horizontal","form-label-left","input_mask",3,"formGroup","ngSubmit"],["type","number","formControlName","Id",1,"hidden"],[1,"row"],[1,"col-md-3","col-sm-3","col-xs-12"],[1,"form-group"],["type","text","formControlName","TaskDate","bsDatepicker","",1,"form-control",3,"bsConfig"],["class","text-danger",4,"ngIf"],[1,"col-md-9","col-sm-9","col-xs-12"],["type","text","required","","minlength","3","name","title","formControlName","Title",1,"form-control"],["name","projectId","formControlName","ProjectId",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2","col-sm-2","col-xs-12"],["name","TypeId","formControlName","TypeId",1,"form-control"],["value","1"],["value","2"],["value","4"],["name","categoryId","formControlName","CategoryId",1,"form-control",3,"ngModel","ngModelChange"],["name","priority","formControlName","Priority",1,"form-control"],["name","assignedTo","formControlName","AssignedTo",1,"form-control"],[1,"col-md-4","col-sm-4","col-xs-12"],["type","text","formControlName","DueDate","bsDatepicker","",1,"form-control",3,"bsConfig"],["formControlName","DueDateTime",3,"ngModelChange"],["type","text","formControlName","ActualDate","bsDatepicker","",1,"form-control",3,"bsConfig"],["formControlName","ActualDateTime",3,"ngModelChange"],["name","status","formControlName","Status",1,"form-control"],[1,"col-md-1","col-sm-1","col-xs-12"],["type","checkbox","id","finished","name","finished","formControlName","Finished",1,"form-control"],["id","task-description",3,"heading"],[3,"init","ngModel","ngModelChange"],["id","task-todo",3,"heading"],[1,"task-todo"],["aria-hidden","true",1,"fa","fa-list"],[1,"mb-2","progressbar-panel"],[3,"value","max","striped","animate"],[1,"list-task-todo"],[4,"ngFor","ngForOf"],[1,"col-md-5","col-sm-5","col-xs-12"],["class","task-todo-action btn btn-secondary",3,"click",4,"ngIf"],["class","input-task-todo",4,"ngIf"],["name","templateId",1,"form-control",3,"change"],["value","",3,"selected"],[1,"btn","btn-primary","task-todo-action",3,"click"],["id","task-detail",3,"heading","active"],[1,"table-responsive","table-task-item"],[1,"table","table-bordered"],["class","select-task",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","button-submit",3,"click"],[4,"ngIf"],["type","button",1,"btn","btn-default",3,"click"],[1,"modal-title","pull-left"],[1,"text-danger"],[3,"value"],["class","todo-item",3,"mouseover","mouseout",4,"ngIf"],[1,"todo-item",3,"mouseover","mouseout"],["type","hidden",3,"ngModel","ngModelChange"],["type","checkbox",1,"check-finish",3,"checked","disabled","change"],[1,"task-todo-action-item",3,"ngClass"],[1,"task-todo-item",3,"click"],["aria-hidden","true",1,"fa","fa-edit"],["aria-hidden","true",1,"fa","fa-close"],[1,"task-todo-action","btn","btn-secondary",3,"click"],[1,"input-task-todo"],["type","text","name","todo-title","required","",1,"form-control","todo-title",3,"ngModel","ngModelChange"],[1,"task-todo-action-close",3,"click"],[1,"select-task"],["type","text",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","bsDatepicker","",3,"ngModel","bsConfig","ngModelChange",4,"ngIf"],["type","number",3,"ngModel","ngModelChange",4,"ngIf"],["type","text",3,"ngModel","ngModelChange"],["type","text","bsDatepicker","",3,"ngModel","bsConfig","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange","change"]],template:function(t,e){1&t&&(b.bc(0,"div",0),b.Kc(1,Z,3,3,"h4",1),b.Kc(2,tt,3,3,"h4",1),b.bc(3,"button",2),b.ic("click",function(){return e.onClose()}),b.bc(4,"span",3),b.Mc(5,"\xd7"),b.ac(),b.ac(),b.ac(),b.bc(6,"div",4),b.bc(7,"form",5),b.ic("ngSubmit",function(){return e.onSubmit(e.itemForm.value)}),b.Wb(8,"input",6),b.bc(9,"div",7),b.bc(10,"div",8),b.bc(11,"div",9),b.bc(12,"p"),b.bc(13,"strong"),b.Mc(14),b.lc(15,"translate"),b.ac(),b.ac(),b.bc(16,"div"),b.Wb(17,"input",10),b.Kc(18,et,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.bc(19,"div",12),b.bc(20,"div",9),b.bc(21,"p"),b.bc(22,"strong"),b.Mc(23),b.lc(24,"translate"),b.ac(),b.ac(),b.bc(25,"div"),b.Wb(26,"input",13),b.Kc(27,at,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(28,"div",7),b.bc(29,"div",8),b.bc(30,"div",9),b.bc(31,"p"),b.bc(32,"strong"),b.Mc(33),b.lc(34,"translate"),b.ac(),b.ac(),b.bc(35,"div"),b.bc(36,"select",14),b.bc(37,"option",15),b.Mc(38),b.lc(39,"translate"),b.ac(),b.Kc(40,nt,2,2,"option",16),b.ac(),b.Kc(41,it,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.bc(42,"div",17),b.bc(43,"div",9),b.bc(44,"p"),b.bc(45,"strong"),b.Mc(46),b.lc(47,"translate"),b.ac(),b.ac(),b.bc(48,"div"),b.bc(49,"select",18),b.bc(50,"option",15),b.Mc(51),b.lc(52,"translate"),b.ac(),b.bc(53,"option",19),b.Mc(54),b.lc(55,"translate"),b.ac(),b.bc(56,"option",20),b.Mc(57),b.lc(58,"translate"),b.ac(),b.bc(59,"option",21),b.Mc(60),b.lc(61,"translate"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(62,"div",17),b.bc(63,"div",9),b.bc(64,"p"),b.bc(65,"strong"),b.Mc(66),b.lc(67,"translate"),b.ac(),b.ac(),b.bc(68,"div"),b.bc(69,"select",22),b.ic("ngModelChange",function(t){return e.categoryId=t}),b.bc(70,"option",15),b.Mc(71),b.lc(72,"translate"),b.ac(),b.bc(73,"option",19),b.Mc(74),b.lc(75,"translate"),b.ac(),b.bc(76,"option",20),b.Mc(77),b.lc(78,"translate"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(79,"div",17),b.bc(80,"div",9),b.bc(81,"p"),b.bc(82,"strong"),b.Mc(83),b.lc(84,"translate"),b.ac(),b.ac(),b.bc(85,"div"),b.bc(86,"select",23),b.bc(87,"option",15),b.Mc(88),b.lc(89,"translate"),b.ac(),b.bc(90,"option",19),b.Mc(91),b.lc(92,"translate"),b.ac(),b.bc(93,"option",20),b.Mc(94),b.lc(95,"translate"),b.ac(),b.bc(96,"option",21),b.Mc(97),b.lc(98,"translate"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(99,"div",8),b.bc(100,"p"),b.bc(101,"strong"),b.Mc(102),b.lc(103,"translate"),b.ac(),b.ac(),b.bc(104,"div"),b.bc(105,"select",24),b.bc(106,"option",15),b.Mc(107),b.lc(108,"translate"),b.ac(),b.Kc(109,ct,2,2,"option",16),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(110,"div",7),b.Wb(111,"div",25),b.Wb(112,"div",25),b.Wb(113,"div",25),b.ac(),b.bc(114,"div",7),b.bc(115,"div",8),b.bc(116,"div",9),b.bc(117,"p"),b.bc(118,"strong"),b.Mc(119),b.lc(120,"translate"),b.ac(),b.ac(),b.bc(121,"div"),b.Wb(122,"input",26),b.bc(123,"timepicker",27),b.ic("ngModelChange",function(t){return e.onDueDateTimeChanged(t)}),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(124,"div",25),b.bc(125,"div",9),b.bc(126,"p"),b.bc(127,"strong"),b.Mc(128),b.lc(129,"translate"),b.ac(),b.ac(),b.bc(130,"div"),b.Wb(131,"input",28),b.bc(132,"timepicker",29),b.ic("ngModelChange",function(t){return e.onActualDateTimeChanged(t)}),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(133,"div",17),b.bc(134,"div",9),b.bc(135,"p"),b.bc(136,"strong"),b.Mc(137),b.lc(138,"translate"),b.ac(),b.ac(),b.bc(139,"div"),b.bc(140,"select",30),b.bc(141,"option",15),b.Mc(142),b.lc(143,"translate"),b.ac(),b.bc(144,"option",19),b.Mc(145),b.lc(146,"translate"),b.ac(),b.bc(147,"option",20),b.Mc(148),b.lc(149,"translate"),b.ac(),b.bc(150,"option",21),b.Mc(151),b.lc(152,"translate"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(153,"div",31),b.bc(154,"div",9),b.bc(155,"p"),b.bc(156,"strong"),b.Mc(157),b.lc(158,"translate"),b.ac(),b.ac(),b.bc(159,"div"),b.Wb(160,"input",32),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(161,"div"),b.bc(162,"tabset"),b.bc(163,"tab",33),b.lc(164,"translate"),b.bc(165,"div",9),b.bc(166,"div"),b.bc(167,"editor",34),b.ic("ngModelChange",function(t){return e.descriptionTask=t}),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(168,"tab",35),b.lc(169,"translate"),b.bc(170,"div",36),b.bc(171,"span"),b.Wb(172,"i",37),b.bc(173,"strong"),b.Mc(174),b.lc(175,"translate"),b.ac(),b.ac(),b.bc(176,"div",38),b.Wb(177,"progressbar",39),b.ac(),b.bc(178,"div",40),b.Kc(179,rt,2,1,"div",41),b.ac(),b.bc(180,"div",7),b.bc(181,"div",42),b.bc(182,"div"),b.Kc(183,lt,3,3,"button",43),b.ac(),b.Kc(184,ut,9,5,"div",44),b.ac(),b.bc(185,"div",25),b.bc(186,"div",9),b.bc(187,"div"),b.bc(188,"select",45),b.ic("change",function(t){return e.setSelectedToDoTemplate(t.target.value)}),b.bc(189,"option",46),b.Mc(190),b.lc(191,"translate"),b.ac(),b.Kc(192,bt,2,2,"option",16),b.ac(),b.Kc(193,mt,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.bc(194,"div",8),b.bc(195,"div",9),b.bc(196,"button",47),b.ic("click",function(){return e.addToDoItemFromTemplate(e.selectedToDoTemplate)}),b.Mc(197),b.lc(198,"translate"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(199,"tab",48),b.lc(200,"translate"),b.bc(201,"div",49),b.bc(202,"table",50),b.bc(203,"thead"),b.bc(204,"tr"),b.bc(205,"th"),b.Mc(206),b.lc(207,"translate"),b.ac(),b.Kc(208,ht,2,1,"th",41),b.lc(209,"jsonToArray"),b.ac(),b.ac(),b.bc(210,"tbody"),b.Kc(211,Ct,5,5,"tr",51),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(212,"div",52),b.bc(213,"button",53),b.ic("click",function(){return e.onSubmit(e.itemForm.value)}),b.Kc(214,It,3,3,"span",54),b.Kc(215,Dt,3,3,"span",54),b.ac(),b.bc(216,"button",55),b.ic("click",function(){return e.onClose()}),b.Mc(217),b.lc(218,"translate"),b.ac(),b.ac()),2&t&&(b.Jb(1),b.qc("ngIf",!e.id),b.Jb(1),b.qc("ngIf",e.id),b.Jb(5),b.qc("formGroup",e.itemForm),b.Jb(7),b.Nc(b.mc(15,65,"task_manager_task_date")),b.Jb(3),b.qc("bsConfig",b.tc(140,kt)),b.Jb(1),b.qc("ngIf",e.errors.TaskDate),b.Jb(5),b.Nc(b.mc(24,67,"task_manager_task_title")),b.Jb(4),b.qc("ngIf",e.errors.Title),b.Jb(6),b.Nc(b.mc(34,69,"task_manager_task_project")),b.Jb(5),b.Oc("--",b.mc(39,71,"select_one"),"--"),b.Jb(2),b.qc("ngForOf",e.projectList),b.Jb(1),b.qc("ngIf",e.errors.ProjectId),b.Jb(5),b.Nc(b.mc(47,73,"task_manager_task_type")),b.Jb(5),b.Oc("--",b.mc(52,75,"select_one"),"--"),b.Jb(3),b.Nc(b.mc(55,77,"task_manager_task_type_mission")),b.Jb(3),b.Nc(b.mc(58,79,"task_manager_task_type_question")),b.Jb(3),b.Nc(b.mc(61,81,"task_manager_task_type_request")),b.Jb(6),b.Nc(b.mc(67,83,"task_manager_task_category")),b.Jb(3),b.qc("ngModel",e.categoryId),b.Jb(2),b.Oc("--",b.mc(72,85,"select_one"),"--"),b.Jb(3),b.Nc(b.mc(75,87,"task_manager_task_category_air")),b.Jb(3),b.Nc(b.mc(78,89,"task_manager_task_category_sea")),b.Jb(6),b.Nc(b.mc(84,91,"task_manager_task_priority")),b.Jb(5),b.Oc("--",b.mc(89,93,"select_one"),"--"),b.Jb(3),b.Nc(b.mc(92,95,"task_manager_task_priority_low")),b.Jb(3),b.Nc(b.mc(95,97,"task_manager_task_priority_medium")),b.Jb(3),b.Nc(b.mc(98,99,"task_manager_task_priority_high")),b.Jb(5),b.Nc(b.mc(103,101,"task_manager_task_assigned")),b.Jb(5),b.Oc("--",b.mc(108,103,"select_one"),"--"),b.Jb(2),b.qc("ngForOf",e.userList),b.Jb(10),b.Nc(b.mc(120,105,"task_manager_task_due_date")),b.Jb(3),b.qc("bsConfig",b.tc(141,Et)),b.Jb(6),b.Nc(b.mc(129,107,"task_manager_task_actual_date")),b.Jb(3),b.qc("bsConfig",b.tc(142,Et)),b.Jb(6),b.Nc(b.mc(138,109,"task_manager_task_status")),b.Jb(5),b.Oc("--",b.mc(143,111,"select_one"),"--"),b.Jb(3),b.Nc(b.mc(146,113,"task_manager_task_status_open")),b.Jb(3),b.Nc(b.mc(149,115,"task_manager_task_status_inprogress")),b.Jb(3),b.Nc(b.mc(152,117,"task_manager_task_status_complete")),b.Jb(6),b.Nc(b.mc(158,119,"task_manager_task_finished")),b.Jb(6),b.rc("heading",b.mc(164,121,"task_manager_task_description")),b.Jb(4),b.qc("init",e.initTiny)("ngModel",e.descriptionTask),b.Jb(1),b.rc("heading",b.mc(169,123,"task_manager_action_task_todo")),b.Jb(6),b.Oc(" ",b.mc(175,125,"task_manager_action_task_todo"),""),b.Jb(3),b.qc("value",e.progressing)("max",e.maxProgressbar)("striped",!0)("animate",!0),b.Jb(2),b.qc("ngForOf",e.listTaskToDo),b.Jb(4),b.qc("ngIf",!e.isToDoItem),b.Jb(1),b.qc("ngIf",e.isToDoItem),b.Jb(5),b.qc("selected",!0),b.Jb(1),b.Oc("--",b.mc(191,127,"select_one"),"--"),b.Jb(2),b.qc("ngForOf",e.taskToDoTemplateList),b.Jb(1),b.qc("ngIf",e.errors.TemplateId),b.Jb(4),b.Nc(b.mc(198,129,"task_manager_action_add_todo_items_from_template")),b.Jb(2),b.rc("heading",b.mc(200,131,"task_manager_task_detail")),b.qc("active",e.hasTaskItem),b.Jb(7),b.Nc(b.mc(207,133,"task_manager_task_number")),b.Jb(2),b.qc("ngForOf",b.nc(209,135,e.taskItemColumn,"CustomsCode")),b.Jb(3),b.qc("ngForOf",e.listTaskItem),b.Jb(3),b.qc("ngIf",!e.id),b.Jb(1),b.qc("ngIf",e.id),b.Jb(2),b.Nc(b.mc(218,138,"button_close")))},directives:[l.m,f.w,f.l,f.f,f.p,f.b,f.k,f.e,C.b,C.a,f.s,f.h,f.t,f.o,f.v,l.l,I.a,f.a,D.c,D.a,A.a,f.n,B,l.k],pipes:[h.c,Y,l.e],styles:[".check-affects[_ngcontent-%COMP%]{padding-top:30px}.button-submit[_ngcontent-%COMP%]{margin-bottom:0}.task-todo-action-delete[_ngcontent-%COMP%]{float:right;font-size:12px}.task-todo-action[_ngcontent-%COMP%]{font-size:12px}.progress[_ngcontent-%COMP%]{height:10px}.todo-title[_ngcontent-%COMP%]{width:100%;margin-bottom:5px;margin-top:5px}.list-task-todo[_ngcontent-%COMP%]{line-height:2.5}.task-todo[_ngcontent-%COMP%]{margin-top:15px}.progressbar-panel[_ngcontent-%COMP%]{margin-top:10px}.table-task-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{white-space:nowrap}"]}),At),qt=c("bAuk"),Lt=c("25+x"),Kt=c("pLZG"),Vt=c("3XJ7"),Rt=c("R0Ic"),Ut=c("WyaX"),Wt=function(t){return{dropdown:t}},jt=["*"],Bt=((wt=function t(){s(this,t),this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1}).\u0275fac=function(t){return new(t||wt)},wt.\u0275prov=Object(b.Rb)({factory:function(){return new wt},token:wt,providedIn:"root"}),wt),$t=((Jt=function t(){var e=this;s(this,t),this.direction="down",this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.isOpenChange=new b.q,this.isDisabledChange=new b.q,this.toggleClick=new b.q,this.dropdownMenu=new Promise(function(t){e.resolveDropdownMenu=t})}).\u0275fac=function(t){return new(t||Jt)},Jt.\u0275prov=b.Rb({token:Jt,factory:Jt.\u0275fac}),Jt),Gt=[Object(Rt.h)({height:0,overflow:"hidden"}),Object(Rt.e)("220ms cubic-bezier(0, 0, 0.2, 1)",Object(Rt.h)({height:"*",overflow:"hidden"}))],zt=((xt=function(){function t(e,a,n,i,c){var o=this;s(this,t),this._state=e,this.cd=a,this._renderer=n,this._element=i,this.isOpen=!1,this._factoryDropDownAnimation=c.build(Gt),this._subscription=e.isOpenChange.subscribe(function(t){o.isOpen=t;var e=o._element.nativeElement.querySelector(".dropdown-menu");o._renderer.addClass(o._element.nativeElement.querySelector("div"),"open"),e&&!Object(J.d)()&&(o._renderer.addClass(e,"show"),e.classList.contains("dropdown-menu-right")&&(o._renderer.setStyle(e,"left","auto"),o._renderer.setStyle(e,"right","0")),"up"===o.direction&&(o._renderer.setStyle(e,"top","auto"),o._renderer.setStyle(e,"transform","translateY(-101%)"))),e&&o._state.isAnimated&&o._factoryDropDownAnimation.create(e).play(),o.cd.markForCheck(),o.cd.detectChanges()})}return r(t,[{key:"direction",get:function(){return this._state.direction}},{key:"_contains",value:function(t){return this._element.nativeElement.contains(t)}},{key:"ngOnDestroy",value:function(){this._subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||xt)(b.Vb($t),b.Vb(b.h),b.Vb(b.M),b.Vb(b.o),b.Vb(Rt.b))},xt.\u0275cmp=b.Pb({type:xt,selectors:[["bs-dropdown-container"]],hostAttrs:[2,"display","block","position","absolute","z-index","1040"],ngContentSelectors:jt,decls:2,vars:9,consts:[[3,"ngClass"]],template:function(t,e){1&t&&(b.pc(),b.bc(0,"div",0),b.oc(1),b.ac()),2&t&&(b.Nb("dropup","up"===e.direction)("show",e.isOpen)("open",e.isOpen),b.qc("ngClass",b.uc(7,Wt,"down"===e.direction)))},directives:[l.k],encapsulation:2,changeDetection:0}),xt),Ht=((Pt=function(){function e(t,a,n,i,c,o,r){s(this,e),this._elementRef=t,this._renderer=a,this._viewContainerRef=n,this._cis=i,this._state=c,this._config=o,this.dropup=!1,this._isInlineOpen=!1,this._isDisabled=!1,this._subscriptions=[],this._isInited=!1,this._state.autoClose=this._config.autoClose,this._state.insideClick=this._config.insideClick,this._state.isAnimated=this._config.isAnimated,this._factoryDropDownAnimation=r.build(Gt),this._dropdown=this._cis.createLoader(this._elementRef,this._viewContainerRef,this._renderer).provide({provide:$t,useValue:this._state}),this.onShown=this._dropdown.onShown,this.onHidden=this._dropdown.onHidden,this.isOpenChange=this._state.isOpenChange}return r(e,[{key:"autoClose",get:function(){return this._state.autoClose},set:function(t){this._state.autoClose=t}},{key:"isAnimated",get:function(){return this._state.isAnimated},set:function(t){this._state.isAnimated=t}},{key:"insideClick",get:function(){return this._state.insideClick},set:function(t){this._state.insideClick=t}},{key:"isDisabled",get:function(){return this._isDisabled},set:function(t){this._isDisabled=t,this._state.isDisabledChange.emit(t),t&&this.hide()}},{key:"isOpen",get:function(){return this._showInline?this._isInlineOpen:this._dropdown.isShown},set:function(t){t?this.show():this.hide()}},{key:"isBs4",get:function(){return!Object(J.d)()}},{key:"_showInline",get:function(){return!this.container}},{key:"ngOnInit",value:function(){var t=this;this._isInited||(this._isInited=!0,this._dropdown.listen({outsideClick:!1,triggers:this.triggers,show:function(){return t.show()}}),this._subscriptions.push(this._state.toggleClick.subscribe(function(e){return t.toggle(e)})),this._subscriptions.push(this._state.isDisabledChange.pipe(Object(Kt.a)(function(t){return t})).subscribe(function(){return t.hide()})))}},{key:"show",value:function(){var t=this;if(!this.isOpen&&!this.isDisabled)return this._showInline?(this._inlinedMenu||this._state.dropdownMenu.then(function(e){t._dropdown.attachInline(e.viewContainer,e.templateRef),t._inlinedMenu=t._dropdown._inlineViewRef,t.addBs4Polyfills(),t._inlinedMenu&&t._renderer.addClass(t._inlinedMenu.rootNodes[0].parentNode,"open"),t.playAnimation()}).catch(),this.addBs4Polyfills(),this._isInlineOpen=!0,this.onShown.emit(!0),this._state.isOpenChange.emit(!0),void this.playAnimation()):void this._state.dropdownMenu.then(function(e){var a=t.dropup||void 0!==t.dropup&&t.dropup;t._state.direction=a?"up":"down";var n=t.placement||(a?"top start":"bottom start");t._dropdown.attach(zt).to(t.container).position({attachment:n}).show({content:e.templateRef,placement:n}),t._state.isOpenChange.emit(!0)}).catch()}},{key:"hide",value:function(){this.isOpen&&(this._showInline?(this.removeShowClass(),this.removeDropupStyles(),this._isInlineOpen=!1,this.onHidden.emit(!0)):this._dropdown.hide(),this._state.isOpenChange.emit(!1))}},{key:"toggle",value:function(t){return this.isOpen||!t?this.hide():this.show()}},{key:"_contains",value:function(t){return this._elementRef.nativeElement.contains(t.target)||this._dropdown.instance&&this._dropdown.instance._contains(t.target)}},{key:"ngOnDestroy",value:function(){var e,a=t(this._subscriptions);try{for(a.s();!(e=a.n()).done;)e.value.unsubscribe()}catch(n){a.e(n)}finally{a.f()}this._dropdown.dispose()}},{key:"addBs4Polyfills",value:function(){Object(J.d)()||(this.addShowClass(),this.checkRightAlignment(),this.addDropupStyles())}},{key:"playAnimation",value:function(){var t=this;this._state.isAnimated&&this._inlinedMenu&&setTimeout(function(){t._inlinedMenu&&t._factoryDropDownAnimation.create(t._inlinedMenu.rootNodes[0]).play()})}},{key:"addShowClass",value:function(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.addClass(this._inlinedMenu.rootNodes[0],"show")}},{key:"removeShowClass",value:function(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.removeClass(this._inlinedMenu.rootNodes[0],"show")}},{key:"checkRightAlignment",value:function(){if(this._inlinedMenu&&this._inlinedMenu.rootNodes[0]){var t=this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-right");this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"left",t?"auto":"0"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"right",t?"0":"auto")}}},{key:"addDropupStyles",value:function(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"top",this.dropup?"auto":"100%"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"transform",this.dropup?"translateY(-101%)":"translateY(0)"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"bottom","auto"))}},{key:"removeDropupStyles",value:function(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"top"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"transform"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"bottom"))}}]),e}()).\u0275fac=function(t){return new(t||Pt)(b.Vb(b.o),b.Vb(b.M),b.Vb(b.Y),b.Vb(Vt.a),b.Vb($t),b.Vb(Bt),b.Vb(Rt.b))},Pt.\u0275dir=b.Qb({type:Pt,selectors:[["","bsDropdown",""],["","dropdown",""]],hostVars:6,hostBindings:function(t,e){2&t&&b.Nb("dropup",e.dropup)("open",e.isOpen)("show",e.isOpen&&e.isBs4)},inputs:{dropup:"dropup",autoClose:"autoClose",isAnimated:"isAnimated",insideClick:"insideClick",isDisabled:"isDisabled",isOpen:"isOpen",placement:"placement",triggers:"triggers",container:"container"},outputs:{onShown:"onShown",onHidden:"onHidden",isOpenChange:"isOpenChange"},exportAs:["bs-dropdown"],features:[b.Ib([$t])]}),Pt),Qt=((Ot=function t(e,a,n){s(this,t),e.resolveDropdownMenu({templateRef:n,viewContainer:a})}).\u0275fac=function(t){return new(t||Ot)(b.Vb($t),b.Vb(b.Y),b.Vb(b.T))},Ot.\u0275dir=b.Qb({type:Ot,selectors:[["","bsDropdownMenu",""],["","dropdownMenu",""]],exportAs:["bs-dropdown-menu"]}),Ot),Yt=((Nt=function(){function e(t,a,n,i,c){var o=this;s(this,e),this._changeDetectorRef=t,this._dropdown=a,this._element=n,this._renderer=i,this._state=c,this.isOpen=!1,this._subscriptions=[],this._subscriptions.push(this._state.isOpenChange.subscribe(function(t){o.isOpen=t,t?(o._documentClickListener=o._renderer.listen("document","click",function(t){!o._state.autoClose||2===t.button||o._element.nativeElement.contains(t.target)||o._state.insideClick&&o._dropdown._contains(t)||(o._state.toggleClick.emit(!1),o._changeDetectorRef.detectChanges())}),o._escKeyUpListener=o._renderer.listen(o._element.nativeElement,"keyup.esc",function(){o._state.autoClose&&(o._state.toggleClick.emit(!1),o._changeDetectorRef.detectChanges())})):(o._documentClickListener&&o._documentClickListener(),o._escKeyUpListener&&o._escKeyUpListener())})),this._subscriptions.push(this._state.isDisabledChange.subscribe(function(t){return o.isDisabled=t||void 0}))}return r(e,[{key:"onClick",value:function(t){t.stopPropagation(),this.isDisabled||this._state.toggleClick.emit(!0)}},{key:"ngOnDestroy",value:function(){this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener();var e,a=t(this._subscriptions);try{for(a.s();!(e=a.n()).done;)e.value.unsubscribe()}catch(n){a.e(n)}finally{a.f()}}}]),e}()).\u0275fac=function(t){return new(t||Nt)(b.Vb(b.h),b.Vb(Ht),b.Vb(b.o),b.Vb(b.M),b.Vb($t))},Nt.\u0275dir=b.Qb({type:Nt,selectors:[["","bsDropdownToggle",""],["","dropdownToggle",""]],hostVars:3,hostBindings:function(t,e){1&t&&b.ic("click",function(t){return e.onClick(t)}),2&t&&b.Kb("aria-haspopup",!0)("aria-expanded",e.isOpen)("disabled",e.isDisabled)},exportAs:["bs-dropdown-toggle"]}),Nt),Xt=((St=function(){function t(){s(this,t)}return r(t,null,[{key:"forRoot",value:function(){return{ngModule:t,providers:[Vt.a,Ut.a,$t]}}}]),t}()).\u0275fac=function(t){return new(t||St)},St.\u0275mod=b.Tb({type:St}),St.\u0275inj=b.Sb({imports:[[l.c]]}),St);function Zt(t,e){if(1&t){var a=b.cc();b.bc(0,"li"),b.bc(1,"a",55),b.ic("click",function(){b.Ec(a);var t=e.$implicit,n=b.kc(3).$implicit;return b.kc().onChangeTodoDetailValue(n,t)}),b.Mc(2),b.ac(),b.ac()}if(2&t){var n=e.$implicit;b.Jb(2),b.Nc(n)}}function te(t,e){if(1&t&&(b.bc(0,"ul",54),b.Kc(1,Zt,3,1,"li",18),b.ac()),2&t){var a=b.kc(2).$implicit;b.Jb(1),b.qc("ngForOf",a.DetailList)}}var ee=function(t){return{hidden:t}};function ae(t,e){if(1&t){var a=b.cc();b.bc(0,"div",43),b.ic("mouseover",function(){b.Ec(a);var t=b.kc().$implicit;return b.kc().isActionTodo=t.Id})("mouseout",function(){return b.Ec(a),b.kc(2).isActionTodo=void 0}),b.bc(1,"input",44),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc(2).todoCode=t}),b.ac(),b.bc(2,"input",45),b.ic("change",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().FinishTaskToDo(t,e)}),b.ac(),b.bc(3,"span"),b.Mc(4),b.ac(),b.bc(5,"span",46),b.bc(6,"span",47),b.bc(7,"a",48),b.ic("click",function(){return!1}),b.Wb(8,"i",49),b.Mc(9),b.ac(),b.Kc(10,te,2,1,"ul",50),b.ac(),b.ac(),b.bc(11,"span",51),b.Mc(12," \xa0"),b.Wb(13,"i",52),b.Mc(14),b.lc(15,"titlecase"),b.Wb(16,"i",53),b.Mc(17),b.lc(18,"date"),b.ac(),b.ac()}if(2&t){var n=b.kc().$implicit,i=b.kc();b.Jb(1),b.qc("ngModel",i.todoCode),b.Jb(1),b.qc("checked",n.Finished)("disabled",i.isItemDisabled(n)),b.Jb(2),b.Oc(" ",n.Description,""),b.Jb(1),b.qc("ngClass",b.uc(15,ee,!i.hasDetail(n))),b.Jb(1),b.qc("isDisabled",n.Finished&&(null==n?null:n.ChangedByName)!=i.userInfo.userName),b.Jb(3),b.Oc(" ",n.DetailValue,""),b.Jb(2),b.qc("hidden",!n.Finished),b.Jb(3),b.Oc(" ",b.mc(15,10,null==n?null:n.ChangedByName)," \xa0"),b.Jb(3),b.Oc(" ",b.nc(18,12,null==n?null:n.ChangedOn,"dd/MM/yyyy HH:mm a")," ")}}function ne(t,e){if(1&t&&(b.bc(0,"div"),b.Kc(1,ae,19,17,"div",42),b.ac()),2&t){var a=e.$implicit,n=b.kc();b.Jb(1),b.qc("ngIf",n.editTodoId!=a.Id)}}function ie(t,e){if(1&t&&(b.bc(0,"th"),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.Jb(1),b.Oc(" ",a.obj.Caption," ")}}function ce(t,e){if(1&t&&(b.bc(0,"span"),b.Mc(1),b.ac()),2&t){var a=b.kc().$implicit,n=b.kc().$implicit;b.Jb(1),b.Nc(n[a.key])}}function se(t,e){if(1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"date"),b.ac()),2&t){var a=b.kc().$implicit,n=b.kc().$implicit;b.Jb(1),b.Nc(b.nc(2,1,n[a.key],"dd/MM/yyyy"))}}function oe(t,e){if(1&t&&(b.bc(0,"td"),b.Kc(1,ce,2,1,"span",57),b.Kc(2,se,3,4,"span",57),b.ac()),2&t){var a=e.$implicit;b.Jb(1),b.qc("ngIf","date"!=a.obj.Type),b.Jb(1),b.qc("ngIf","date"==a.obj.Type)}}function re(t,e){if(1&t&&(b.bc(0,"tr",56),b.bc(1,"td"),b.Mc(2),b.ac(),b.Kc(3,oe,3,2,"td",18),b.lc(4,"jsonToArray"),b.ac()),2&t){var a=e.index,n=b.kc();b.Jb(2),b.Nc(a+1),b.Jb(1),b.qc("ngForOf",b.nc(4,2,n.taskItemColumn,"CustomerId"))}}function le(t,e){1&t&&(b.bc(0,"div",58),b.bc(1,"div",59),b.bc(2,"strong"),b.Mc(3),b.lc(4,"translate"),b.ac(),b.Mc(5),b.lc(6,"translate"),b.ac(),b.ac()),2&t&&(b.Jb(3),b.Oc("",b.mc(4,2,"dialog_alert_title"),"!"),b.Jb(2),b.Oc(" ",b.mc(6,4,"task_manager_task_notice_list_empty")," "))}function de(t,e){if(1&t&&(b.bc(0,"th"),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.Jb(1),b.Oc(" ",a.obj.Caption," ")}}function ue(t,e){if(1&t&&(b.bc(0,"span"),b.Mc(1),b.ac()),2&t){var a=b.kc().$implicit,n=b.kc().$implicit;b.Jb(1),b.Nc(n[a.key])}}function be(t,e){if(1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"subctiptionTypePipe"),b.ac()),2&t){var a=b.kc().$implicit,n=b.kc().$implicit;b.Jb(1),b.Nc(b.mc(2,1,n[a.key]))}}function me(t,e){if(1&t&&(b.bc(0,"td"),b.Kc(1,ue,2,1,"span",57),b.Kc(2,be,3,3,"span",57),b.ac()),2&t){var a=e.$implicit;b.Jb(1),b.qc("ngIf","SubctiptionType"!=a.obj.Name),b.Jb(1),b.qc("ngIf","SubctiptionType"==a.obj.Name)}}function he(t,e){if(1&t){var a=b.cc();b.bc(0,"a",62),b.ic("click",function(){b.Ec(a);var t=b.kc().$implicit;return b.kc().deleteTaskSubscriptionItem(t)}),b.Wb(1,"i",63),b.ac()}}function ge(t,e){if(1&t&&(b.bc(0,"tr",56),b.bc(1,"td"),b.Mc(2),b.ac(),b.Kc(3,me,3,2,"td",18),b.lc(4,"jsonToArray"),b.bc(5,"td",60),b.Kc(6,he,2,0,"a",61),b.Mc(7,"\xa0 "),b.ac(),b.ac()),2&t){var a=e.$implicit,n=e.index,i=b.kc();b.Jb(2),b.Nc(n+1),b.Jb(1),b.qc("ngForOf",b.mc(4,3,i.taskSubscriptionsColumn)),b.Jb(3),b.qc("ngIf",0!=a.Id&&i.authService.hasPermission("/main/task","Edit"))}}function pe(t,e){if(1&t&&b.Wb(0,"img",75),2&t){var a=b.kc().$implicit;b.qc("src",a.url,b.Gc)}}function fe(t,e){1&t&&b.Wb(0,"img",76)}function ke(t,e){if(1&t){var a=b.cc();b.bc(0,"div",68),b.bc(1,"div",69),b.bc(2,"button",70),b.ic("click",function(){b.Ec(a);var t=e.$implicit;return b.kc(2).onRemoveFileAttach(t.name,"task")}),b.lc(3,"translate"),b.Mc(4,"x"),b.ac(),b.bc(5,"a",71),b.Kc(6,pe,1,1,"img",72),b.Wb(7,"br"),b.Kc(8,fe,1,0,"img",73),b.ac(),b.ac(),b.bc(9,"div",74),b.Wb(10,"i"),b.Mc(11,"\xa0"),b.bc(12,"a",71),b.bc(13,"span"),b.Mc(14),b.ac(),b.Wb(15,"br"),b.ac(),b.bc(16,"button",70),b.ic("click",function(){b.Ec(a);var t=e.$implicit;return b.kc(2).onRemoveFileAttach(t.name,"task")}),b.lc(17,"translate"),b.Mc(18,"x"),b.ac(),b.bc(19,"div"),b.bc(20,"strong"),b.Mc(21),b.ac(),b.Mc(22),b.lc(23,"translate"),b.ac(),b.bc(24,"small"),b.Mc(25),b.lc(26,"datetimePipeEvent"),b.ac(),b.Wb(27,"br"),b.ac(),b.ac()}if(2&t){var n=e.$implicit;b.Jb(2),b.rc("title",b.mc(3,13,"button_delete")),b.Jb(3),b.rc("href",n.url,b.Gc),b.Jb(1),b.qc("ngIf","png"==n.ext||"jpg"==n.ext||"jpeg"==n.ext||"bmp"==n.ext),b.Jb(2),b.qc("ngIf",!("png"==n.ext||"jpg"==n.ext||"jpeg"==n.ext||"bmp"==n.ext)),b.Jb(2),b.Lb(n.fileIcon),b.Jb(2),b.rc("href",n.url,b.Gc),b.Jb(2),b.Nc(n.name),b.Jb(2),b.rc("title",b.mc(17,15,"button_delete")),b.Jb(5),b.Oc("",n.createdName," "),b.Jb(1),b.Nc(b.mc(23,17,"task_manager_task_action_upload_title")),b.Jb(3),b.Nc(b.mc(26,19,n.createdOn))}}function ve(t,e){if(1&t&&(b.bc(0,"div",64),b.bc(1,"div",65),b.Wb(2,"i",66),b.bc(3,"strong"),b.Mc(4),b.lc(5,"translate"),b.ac(),b.ac(),b.Wb(6,"br"),b.Kc(7,ke,28,21,"div",67),b.ac()),2&t){var a=b.kc();b.Jb(4),b.Oc(" ",b.mc(5,2,"task_manager_task_attach_list"),""),b.Jb(3),b.qc("ngForOf",a.attachUrls)}}function _e(t,e){1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"task_manager_task_todo_event_type_1")))}function ye(t,e){1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"translate"),b.Wb(3,"strong"),b.ac()),2&t&&(b.Jb(1),b.Oc("",b.mc(2,1,"task_manager_task_todo_event_type_2")," "))}function Me(t,e){1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"task_manager_task_todo_event_type_4")))}function Te(t,e){1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"task_manager_task_todo_event_type_8")))}function Ce(t,e){1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"task_manager_task_todo_event_type_1024")))}function Ie(t,e){if(1&t&&(b.bc(0,"strong"),b.Mc(1),b.ac()),2&t){var a=b.kc().$implicit;b.Jb(1),b.Oc(" ",a.AssignedName,"")}}function De(t,e){if(1&t&&(b.bc(0,"div",69),b.bc(1,"a",71),b.Wb(2,"img",75),b.Wb(3,"br"),b.ac(),b.ac()),2&t){var a=b.kc().$implicit;b.Jb(1),b.rc("href",a.url,b.Gc),b.Jb(1),b.qc("src",a.url,b.Gc)}}function Ae(t,e){if(1&t&&(b.bc(0,"div",68),b.Kc(1,De,4,2,"div",86),b.bc(2,"div",74),b.Wb(3,"i"),b.Mc(4,"\xa0"),b.bc(5,"a",71),b.bc(6,"span"),b.Mc(7),b.ac(),b.Wb(8,"br"),b.ac(),b.bc(9,"div"),b.bc(10,"strong"),b.Mc(11),b.ac(),b.Mc(12),b.lc(13,"translate"),b.bc(14,"small"),b.Mc(15),b.lc(16,"datetimePipeEvent"),b.ac(),b.ac(),b.Wb(17,"br"),b.ac(),b.ac()),2&t){var a=e.$implicit,n=b.kc(4);b.Jb(1),b.qc("ngIf","png"==n.getFileExtension(a.name)||"jpg"==n.getFileExtension(a.name)||"jpeg"==n.getFileExtension(a.name)||"bmp"==n.getFileExtension(a.name)),b.Jb(2),b.Lb(n.getFileExtensionIcon(a.name)),b.Jb(2),b.rc("href",a.url,b.Gc),b.Jb(2),b.Nc(a.name),b.Jb(4),b.Oc("",a.createdName," "),b.Jb(1),b.Oc("",b.mc(13,9,"task_manager_task_action_upload_title")," "),b.Jb(3),b.Nc(b.mc(16,11,a.createdOn))}}function Je(t,e){if(1&t&&(b.bc(0,"div",85),b.Kc(1,Ae,18,13,"div",67),b.Wb(2,"hr"),b.ac()),2&t){var a=b.kc().$implicit;b.Jb(1),b.qc("ngForOf",a.JsonData.files)}}function we(t,e){if(1&t&&(b.bc(0,"div",82),b.bc(1,"div",78),b.bc(2,"div"),b.bc(3,"strong"),b.Mc(4),b.ac(),b.Kc(5,_e,3,3,"span",57),b.Kc(6,ye,4,3,"span",57),b.Kc(7,Me,3,3,"span",57),b.Kc(8,Te,3,3,"span",57),b.Kc(9,Ce,3,3,"span",57),b.Kc(10,Ie,2,1,"strong",57),b.ac(),b.bc(11,"small"),b.Mc(12),b.lc(13,"datetimePipeEvent"),b.ac(),b.ac(),b.Kc(14,Je,3,1,"div",83),b.Wb(15,"div",84),b.ac()),2&t){var a=e.$implicit;b.Jb(4),b.Oc("",a.CreatedByName," "),b.Jb(1),b.qc("ngIf",1==a.EventTypeId),b.Jb(1),b.qc("ngIf",2==a.EventTypeId),b.Jb(1),b.qc("ngIf",4==a.EventTypeId),b.Jb(1),b.qc("ngIf",8==a.EventTypeId),b.Jb(1),b.qc("ngIf",a.EventTypeId>=1024),b.Jb(1),b.qc("ngIf",!a.EventTypeId||a.EventTypeId<=0||2==a.EventTypeId||a.EventTypeId>8),b.Jb(2),b.Nc(b.mc(13,10,a.CreatedOn)),b.Jb(2),b.qc("ngIf",a.JsonData&&a.JsonData.files.length>0),b.Jb(1),b.qc("innerHtml",a.Description,b.Fc)}}function Se(t,e){if(1&t&&(b.bc(0,"div",77),b.bc(1,"div",78),b.Wb(2,"i",79),b.bc(3,"strong"),b.Mc(4),b.lc(5,"translate"),b.ac(),b.ac(),b.bc(6,"div",80),b.Kc(7,we,16,12,"div",81),b.ac(),b.ac()),2&t){var a=b.kc();b.Jb(4),b.Oc(" ",b.mc(5,2,"task_manager_task_activity_log"),""),b.Jb(3),b.qc("ngForOf",a.eventByTask)}}function Ne(t,e){if(1&t){var a=b.cc();b.bc(0,"button",33),b.ic("click",function(){return b.Ec(a),b.kc().onEditTask()}),b.Wb(1,"i",87),b.Mc(2),b.lc(3,"translate"),b.ac()}2&t&&(b.Jb(2),b.Oc(" ",b.mc(3,1,"button_edit"),""))}function Oe(t,e){if(1&t){var a=b.cc();b.bc(0,"button",33),b.ic("click",function(){b.Ec(a);var t=b.kc(),e=b.Ac(159);return t.onAssignTo(e)}),b.Wb(1,"i",52),b.Mc(2),b.lc(3,"translate"),b.ac()}2&t&&(b.Jb(2),b.Oc(" ",b.mc(3,1,"task_manager_task_button_assign_to"),""))}function Pe(t,e){if(1&t&&(b.bc(0,"option",102),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.qc("value",a.Id),b.Jb(1),b.Nc(a.UserName)}}function xe(t,e){1&t&&(b.bc(0,"small",103),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function Ee(t,e){if(1&t){var a=b.cc();b.bc(0,"div",96),b.bc(1,"label",97),b.Mc(2),b.lc(3,"translate"),b.ac(),b.bc(4,"div",98),b.bc(5,"select",99),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc(2).assignedTo=t}),b.bc(6,"option",100),b.Mc(7),b.lc(8,"translate"),b.ac(),b.Kc(9,Pe,2,2,"option",101),b.ac(),b.Kc(10,xe,3,3,"small",91),b.ac(),b.ac()}if(2&t){var n=b.kc(2);b.Jb(2),b.Nc(b.mc(3,5,"task_manager_task_assigned")),b.Jb(3),b.qc("ngModel",n.assignedTo),b.Jb(2),b.Oc("--",b.mc(8,7,"select_one"),"--"),b.Jb(2),b.qc("ngForOf",n.userList),b.Jb(1),b.qc("ngIf",n.requiredAssign)}}function Fe(t,e){if(1&t){var a=b.cc();b.bc(0,"div",96),b.bc(1,"label",97),b.Mc(2),b.lc(3,"translate"),b.ac(),b.bc(4,"div",98),b.bc(5,"select",104),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc(2).priority=t}),b.bc(6,"option",100),b.Mc(7),b.lc(8,"translate"),b.ac(),b.bc(9,"option",105),b.Mc(10),b.lc(11,"translate"),b.ac(),b.bc(12,"option",106),b.Mc(13),b.lc(14,"translate"),b.ac(),b.bc(15,"option",107),b.Mc(16),b.lc(17,"translate"),b.ac(),b.ac(),b.ac(),b.ac()}if(2&t){var n=b.kc(2);b.Jb(2),b.Nc(b.mc(3,6,"task_manager_task_priority")),b.Jb(3),b.qc("ngModel",n.priority),b.Jb(2),b.Oc("--",b.mc(8,8,"select_one"),"--"),b.Jb(3),b.Nc(b.mc(11,10,"task_manager_task_priority_low")),b.Jb(3),b.Nc(b.mc(14,12,"task_manager_task_priority_medium")),b.Jb(3),b.Nc(b.mc(17,14,"task_manager_task_priority_high"))}}function qe(t,e){if(1&t){var a=b.cc();b.bc(0,"div",96),b.bc(1,"label",97),b.Mc(2),b.lc(3,"translate"),b.ac(),b.bc(4,"div",98),b.bc(5,"select",108),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc(2).taskItem.Status=t}),b.bc(6,"option",100),b.Mc(7),b.lc(8,"translate"),b.ac(),b.bc(9,"option",105),b.Mc(10),b.lc(11,"translate"),b.ac(),b.bc(12,"option",106),b.Mc(13),b.lc(14,"translate"),b.ac(),b.bc(15,"option",107),b.Mc(16),b.lc(17,"translate"),b.ac(),b.ac(),b.ac(),b.ac()}if(2&t){var n=b.kc(2);b.Jb(2),b.Nc(b.mc(3,6,"task_manager_task_status")),b.Jb(3),b.qc("ngModel",n.taskItem.Status),b.Jb(2),b.Oc("--",b.mc(8,8,"select_one"),"--"),b.Jb(3),b.Nc(b.mc(11,10,"task_manager_task_status_open")),b.Jb(3),b.Nc(b.mc(14,12,"task_manager_task_status_inprogress")),b.Jb(3),b.Nc(b.mc(17,14,"task_manager_task_status_complete"))}}function Le(t,e){1&t&&(b.bc(0,"small",103),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function Ke(t,e){1&t&&b.Wb(0,"img",109),2&t&&b.qc("src",e.$implicit,b.Gc)}function Ve(t,e){if(1&t){var a=b.cc();b.bc(0,"div",0),b.bc(1,"h4",1),b.Mc(2),b.lc(3,"translate"),b.ac(),b.bc(4,"button",2),b.ic("click",function(){return b.Ec(a),b.kc().modalRef.hide()}),b.bc(5,"span",3),b.Mc(6,"\xd7"),b.ac(),b.ac(),b.ac(),b.bc(7,"div",4),b.Kc(8,Ee,11,9,"div",88),b.Kc(9,Fe,18,16,"div",88),b.Kc(10,qe,18,16,"div",88),b.bc(11,"div",89),b.bc(12,"p"),b.bc(13,"strong"),b.Mc(14),b.lc(15,"translate"),b.ac(),b.ac(),b.bc(16,"editor",90),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc().description=t}),b.ac(),b.Kc(17,Le,3,3,"small",91),b.ac(),b.bc(18,"div",89),b.bc(19,"p"),b.bc(20,"strong"),b.Mc(21),b.lc(22,"translate"),b.ac(),b.ac(),b.bc(23,"input",92),b.ic("change",function(t){return b.Ec(a),b.kc().onAttachTaskEvent(t)}),b.ac(),b.ac(),b.bc(24,"div",93),b.Kc(25,Ke,1,1,"img",94),b.Wb(26,"br"),b.ac(),b.ac(),b.bc(27,"div",39),b.bc(28,"button",95),b.ic("click",function(){return b.Ec(a),b.kc().SubmitEvent()}),b.bc(29,"span"),b.Mc(30),b.lc(31,"translate"),b.lc(32,"translate"),b.ac(),b.ac(),b.bc(33,"button",38),b.ic("click",function(){return b.Ec(a),b.kc().modalRef.hide()}),b.Mc(34),b.lc(35,"translate"),b.ac(),b.ac()}if(2&t){var n=b.kc();b.Jb(2),b.Nc(b.mc(3,13,n.titleActionForm)),b.Jb(6),b.qc("ngIf",n.eventType===n.eventTypes.reAssign),b.Jb(1),b.qc("ngIf",n.eventType===n.eventTypes.reAssign),b.Jb(1),b.qc("ngIf",n.eventType===n.eventTypes.changeStatus||n.eventType===n.eventTypes.complete||n.eventType===n.eventTypes.finish),b.Jb(4),b.Nc(b.mc(15,15,"task_manager_task_detail_comment")),b.Jb(2),b.qc("init",n.initTiny)("ngModel",n.description),b.Jb(1),b.qc("ngIf",n.requiredComment),b.Jb(4),b.Nc(b.mc(22,17,"button_attach")),b.Jb(4),b.qc("ngForOf",n.attachEventTemplateUrls),b.Jb(5),b.Pc("",b.mc(31,19,"button_submit")," ",b.mc(32,21,n.titleActionForm),""),b.Jb(4),b.Nc(b.mc(35,23,"button_close"))}}function Re(t,e){if(1&t&&(b.bc(0,"option",102),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.qc("value",a.Id),b.Jb(1),b.Nc(a.UserName)}}function Ue(t,e){1&t&&(b.bc(0,"small",103),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function We(t,e){if(1&t&&(b.bc(0,"option",102),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.qc("value",a.Id),b.Jb(1),b.Nc(a.Name)}}function je(t,e){1&t&&(b.bc(0,"small",103),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function Be(t,e){if(1&t){var a=b.cc();b.bc(0,"div",0),b.bc(1,"h4",1),b.Mc(2),b.lc(3,"translate"),b.ac(),b.bc(4,"button",2),b.ic("click",function(){return b.Ec(a),b.kc().modalRef.hide()}),b.bc(5,"span",3),b.Mc(6,"\xd7"),b.ac(),b.ac(),b.ac(),b.bc(7,"div",4),b.bc(8,"div",96),b.bc(9,"label",97),b.Mc(10),b.lc(11,"translate"),b.ac(),b.bc(12,"div",98),b.bc(13,"select",99),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc().assignedTo=t}),b.bc(14,"option",100),b.Mc(15),b.lc(16,"translate"),b.ac(),b.Kc(17,Re,2,2,"option",101),b.ac(),b.Kc(18,Ue,3,3,"small",91),b.ac(),b.ac(),b.bc(19,"div",96),b.bc(20,"label",97),b.Mc(21),b.lc(22,"translate"),b.ac(),b.bc(23,"div",98),b.bc(24,"select",104),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc().priority=t}),b.bc(25,"option",100),b.Mc(26),b.lc(27,"translate"),b.ac(),b.bc(28,"option",110),b.Mc(29),b.lc(30,"translate"),b.ac(),b.bc(31,"option",105),b.Mc(32),b.lc(33,"translate"),b.ac(),b.bc(34,"option",106),b.Mc(35),b.lc(36,"translate"),b.ac(),b.bc(37,"option",107),b.Mc(38),b.lc(39,"translate"),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(40,"div",96),b.bc(41,"label",97),b.Mc(42),b.lc(43,"translate"),b.ac(),b.bc(44,"div",98),b.bc(45,"select",111),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc().vehicleId=t}),b.bc(46,"option",110),b.Mc(47),b.lc(48,"translate"),b.ac(),b.Kc(49,We,2,2,"option",101),b.ac(),b.Kc(50,je,3,3,"small",91),b.ac(),b.ac(),b.ac(),b.bc(51,"div",39),b.bc(52,"button",95),b.ic("click",function(){return b.Ec(a),b.kc().SaveTaskSubscription()}),b.bc(53,"span"),b.Mc(54),b.lc(55,"translate"),b.ac(),b.ac(),b.bc(56,"button",38),b.ic("click",function(){return b.Ec(a),b.kc().modalRef.hide()}),b.Mc(57),b.lc(58,"translate"),b.ac(),b.ac()}if(2&t){var n=b.kc();b.Jb(2),b.Nc(b.mc(3,20,n.titleActionForm)),b.Jb(8),b.Nc(b.mc(11,22,"task_manager_task_assigned")),b.Jb(3),b.qc("ngModel",n.assignedTo),b.Jb(2),b.Oc("--",b.mc(16,24,"select_one"),"--"),b.Jb(2),b.qc("ngForOf",n.userList),b.Jb(1),b.qc("ngIf",n.requiredAssign),b.Jb(3),b.Nc(b.mc(22,26,"task_manager_TaskSubscription__SubctiptionType")),b.Jb(3),b.qc("ngModel",n.priority),b.Jb(2),b.Oc("--",b.mc(27,28,"select_one"),"--"),b.Jb(3),b.Nc(b.mc(30,30,"task_manager_TaskSubscription__SubctiptionType_None")),b.Jb(3),b.Nc(b.mc(33,32,"task_manager_TaskSubscription__SubctiptionType_OnScreen")),b.Jb(3),b.Nc(b.mc(36,34,"task_manager_TaskSubscription__SubctiptionType_Email")),b.Jb(3),b.Nc(b.mc(39,36,"task_manager_TaskSubscription__SubctiptionType_SMS")),b.Jb(4),b.Nc(b.mc(43,38,"task_manager_TaskSubscription__Vehicle")),b.Jb(3),b.qc("ngModel",n.vehicleId),b.Jb(2),b.Oc("--",b.mc(48,40,"select_one"),"--"),b.Jb(2),b.qc("ngForOf",n.vehicleList),b.Jb(1),b.qc("ngIf",n.requiredComment),b.Jb(4),b.Nc(b.mc(55,42,n.titleActionForm)),b.Jb(3),b.Nc(b.mc(58,44,"button_close"))}}var $e,Ge=(($e=function(){function e(t,a,n,i,c,o,r){s(this,e),this.authService=t,this.bsModalRef=a,this.modalService=n,this.translate=i,this.dataService=c,this.uploadService=o,this.notificationService=r,this.initTiny={base_url:"/tinymce",height:250,language:"vi_VN",language_url:"./assets/tinymce/langs/vi_VN.js",plugins:"autosave autolink code codesample colorpicker emoticons fullscreen hr preview table textcolor wordcount",toolbar:"undo redo forecolor cut copy paste fontselect styleselect link preview"},this.taskItem={},this.eventTypes={comment:1,reAssign:2,changeStatus:4,complete:8,finish:1024},this.eventStatus={open:1,progress:2,complete:4},this.eventByTask=[],this.hasTodo=!1,this.isToDoItem=!1,this.listTaskToDo=[],this.listTaskItem=[],this.maxProgressbar=0,this.progressing=0,this.iconList=[{type:"docx",icon:"fa fa-file-word-o"},{type:"doc",icon:"fa fa-file-word-o"},{type:"pptx",icon:"fa fa-file-powerpoint-o"},{type:"ppt",icon:"fa fa-file-powerpoint-o"},{type:"xlsx",icon:"fa fa-file-excel-o"},{type:"xls",icon:"fa fa-file-excel-o"},{type:"pdf",icon:"fa fa-file-pdf-o"},{type:"bmp",icon:"fa fa-file-image-o"},{type:"jpg",icon:"fa fa-file-image-o"},{type:"jpeg",icon:"fa fa-file-image-o"},{type:"png",icon:"fa fa-file-image-o"},{type:"zip",icon:"fa fa-file-archive-o"},{type:"rar",icon:"fa fa-file-archive-o"},{type:"txt",icon:"fa fa-file-text-o"}],this.event=new b.q,this.requiredItemTodo=!1,this.requiredComment=!1,this.requiredAssign=!1,this.taskItemColumn=k.TaskForm.ColumnInfoTaskItem,this.taskItemAirColumn=k.TaskForm.ColumnInfoTaskItemAir,this.taskItemSeaColumn=k.TaskForm.ColumnInfoTaskItemSea,this.attachUrls=[],this.attachEventUrls=[],this.attachEventTemplateUrls=[],this.taskEventFileUpload=[],this.taskSubscriptionsColumn=qt.TaskSubscriptionForm.ColumnInfo,this.listTaskSubscription=[]}return r(e,[{key:"ngOnInit",value:function(){this.userInfo=this.authService.getLoggedInUser(),this.getUserIdLogin(this.userInfo.userName),this.getListUser(),this.loadVehicle(),this.getTodotemplateDetails(),this.getTask(this.taskId)}},{key:"getRootFile",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.dataService.getRootFile("/files/getRoot?app=TaskManager",null).toPromise().then(function(t){e.rootFile=t});case 2:case"end":return t.stop()}},t,this)}))}},{key:"getUserIdLogin",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var a,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return(a=[]).push("@UserName",t),n={CommandText:"uspUser___FindUserName",CommandType:1025,Parameters:a},e.next=6,this.dataService.post("/commands",n).toPromise().then(function(t){t.Data&&(i.userLoginId=t.Data[0].Id)});case 6:case"end":return e.stop()}},e,this)}))}},{key:"getListUser",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,a,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=[]).push("@ActivatedOnly",1),a={CommandText:"uspUser___Fill",CommandType:1025,Parameters:e},t.next=5,this.dataService.post("/commands",a).toPromise().then(function(t){t.Data&&(n.userList=t.Data)});case 5:case"end":return t.stop()}},t,this)}))}},{key:"getListVehicle",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,a,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=[]).push("@ActivatedOnly",1),a={CommandText:"uspUser___Fill",CommandType:1025,Parameters:e},t.next=5,this.dataService.post("/commands",a).toPromise().then(function(t){t.Data&&(n.userList=t.Data)});case 5:case"end":return t.stop()}},t,this)}))}},{key:"getTask",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var a,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.next=3,this.getRootFile();case 3:return(a=[]).push("@TaskId",this.taskId),n={CommandText:"uspTask___GetById",CommandType:1025,Parameters:a},e.next=8,this.dataService.post("/commands",n).toPromise().then(function(e){e.Data&&(i.taskItem=e.Data[0],i.jsonData=i.taskItem.JsonData,i.onShowAttachFile(JSON.parse(i.jsonData)),i.getEventByTask(t),i.getTodoByTask(t),i.getItemByTask(t),i.getTaskSubscriptionByTask(t))});case 8:e.next=11;break;case 10:this.importExternalTaskItems();case 11:case"end":return e.stop()}},e,this)}))}},{key:"onShowAttachFile",value:function(e){if(e){var a,n=t(e.files);try{for(n.s();!(a=n.n()).done;){var i=a.value;i.url=this.rootFile+"/Task/"+this.taskItem.GId+"___"+i.name;var c=this.userList.find(function(t){return t.Id===i.createdBy});i.createdName=c.UserName,i.ext=this.getFileExtension(i.name),i.fileIcon=this.getFileExtensionIcon(i.name)}}catch(s){n.e(s)}finally{n.f()}this.attachUrls=e.files}}},{key:"getFileExtension",value:function(t){var e=t.split(".").pop(),a=this.iconList.filter(function(t){if(t.type===e)return!0});return a.length>0?a[0].type:""}},{key:"getFileExtensionIcon",value:function(t){var e=t.split(".").pop(),a=this.iconList.filter(function(t){if(t.type===e)return!0});return a.length>0?a[0].icon:"fa fa-file-text-o"}},{key:"getEventByTask",value:function(e){var a=this;if(e){var n=[];n.push("@TaskId",this.taskId),this.dataService.post("/commands",{CommandText:"uspTaskEvent___GetByTaskId",CommandType:1025,Parameters:n}).subscribe(function(e){if(e.Data){var n,i=t((a.eventByTask=e.Data,a.eventByTask));try{for(i.s();!(n=i.n()).done;){var c=n.value;c.JsonData=a.onShowFileAttachTaskEvent(JSON.parse(c.JsonData),c.GId)}}catch(s){i.e(s)}finally{i.f()}}})}}},{key:"onShowFileAttachTaskEvent",value:function(e,a){if(e){var n,i=t(e.files);try{for(i.s();!(n=i.n()).done;){var c=n.value;c.url=this.rootFile+"/TaskEvent/"+a+"___"+c.name;var s=this.userList.find(function(t){return t.Id===c.createdBy});c.createdName=s.UserName,c.ext=this.getFileExtension(c.name),c.fileIcon=this.getFileExtensionIcon(c.name)}}catch(o){i.e(o)}finally{i.f()}return e}}},{key:"getTodoByTask",value:function(t){var e=this;if(t){var a=[];a.push("@TaskId",this.taskId),this.dataService.post("/commands",{CommandText:"uspTaskTodo___ListByTaskId",CommandType:1025,Parameters:a}).subscribe(function(t){t.Data&&(e.listTaskToDo=t.Data,e.maxProgressbar=e.listTaskToDo.length,e.progressing=e.listTaskToDo.filter(function(t){return t.Finished}).length,e.listTaskToDo.forEach(function(t){e.checkTodoDetail(t),t.DetailList=""!==t.DetaiSettings?JSON.parse(t.DetaiSettings):[]}))})}}},{key:"getItemByTask",value:function(t){var e=this;if(t){var a=[];a.push("@TaskId",t),this.dataService.post("/commands",{CommandText:"uspTaskItem___ListByTaskId",CommandType:1025,Parameters:a}).toPromise().then(function(t){e.listTaskItem=t.Data})}}},{key:"importExternalTaskItems",value:function(){var t=this;null!==this.extenalTaskItems&&this.extenalTaskItems.forEach(function(e){t.listTaskItem.push(e)})}},{key:"onEditTask",value:function(){var t=this;this.bsModalRef.hide();var a=this.taskItem;a.Id=this.taskId;var n=this.taskId;this.bsModalRef=this.modalService.show(Ft,{initialState:{taskItem:a},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(function(a){t.bsModalRef=t.modalService.show(e,{initialState:{taskId:n},class:"modal-lg"}),t.bsModalRef.content.event.subscribe(function(e){t.triggerEvent("Close")})})}},{key:"onComment",value:function(t){this.requiredComment=!1,this.titleActionForm="task_manager_action_comment",this.eventType=this.eventTypes.comment,(!this.taskItem.Status||this.taskItem.Status<this.eventStatus.open)&&(this.taskItem.Status=this.eventStatus.open),this.description="",this.attachEventTemplateUrls=[],this.modalRef=this.modalService.show(t)}},{key:"onAssignTo",value:function(t){this.requiredAssign=!1,this.requiredComment=!1,this.titleActionForm="task_manager_action_assign_to",this.assignedTo=this.taskItem.AssignedTo,this.priority=this.taskItem.Priority,this.eventType=this.eventTypes.reAssign,(!this.taskItem.Status||this.taskItem.Status<this.eventStatus.progress)&&(this.taskItem.Status=this.eventStatus.progress),this.description="",this.modalRef=this.modalService.show(t)}},{key:"onTaskSubscription",value:function(t){this.requiredAssign=!1,this.requiredComment=!1,this.titleActionForm="task_manager_TaskSubscription",this.assignedTo=this.taskItem.AssignedTo,this.priority=this.taskItem.Priority,this.vehicleId=this.taskItem.VehicleId,this.eventType=this.eventTypes.reAssign,this.description="",this.modalRef=this.modalService.show(t)}},{key:"onChangeStatus",value:function(t){this.requiredComment=!1,this.titleActionForm="task_manager_task_button_status",this.description="",this.eventType=this.eventTypes.changeStatus,this.modalRef=this.modalService.show(t)}},{key:"onFinishTask",value:function(t){this.requiredComment=!1,this.titleActionForm="task_manager_task_button_close",this.description="",(!this.taskItem.Status||this.taskItem.Status<this.eventStatus.complete)&&(this.taskItem.Status=this.eventStatus.complete),this.eventType=this.eventTypes.finish,this.modalRef=this.modalService.show(t)}},{key:"onAddTaskTodo",value:function(){}},{key:"onDeleteTaskToDo",value:function(){}},{key:"SubmitEvent",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var a,n,i,c,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.taskItem.EventTypeId=this.eventType,this.taskItem.Priority=this.priority,this.taskItem.Description=this.description,this.taskItem.AssignedTo=this.assignedTo,a={TaskId:this.taskItem.Id,GId:Object(v.v4)(),EventTypeId:this.taskItem.EventTypeId,Priority:this.taskItem.Priority,Status:this.taskItem.Status,JsonData:null,Description:this.taskItem.Description,EventDate:new Date,AssignedTo:this.taskItem.AssignedTo,CreatedBy:this.userLoginId},n=t(this.taskEventFileUpload),e.prev=3,n.s();case 5:if((i=n.n()).done){e.next=11;break}return c=i.value,e.next=9,this.uploadService.postWithFile("/files/upload?app=TaskManager&category=TaskEvent&id="+a.GId,null,c).then(function(t){a.JsonData=JSON.stringify(s.taskEventFiles)});case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:if(this.eventType===this.eventTypes.comment&&!this.description){e.next=38;break}if(this.eventType!==this.eventTypes.reAssign){e.next=25;break}if(this.assignedTo){e.next=23;break}return e.abrupt("return",void(this.requiredAssign=!0));case 23:return e.next=25,this.UpdateTaskAssigned();case 25:if(e.t1=this.eventType!==this.eventTypes.changeStatus&&this.eventType!==this.eventTypes.complete&&this.eventType!==this.eventTypes.finish,e.t1){e.next=29;break}return e.next=29,this.UpdateTaskStatus();case 29:if(e.t2=this.eventType===this.eventTypes.finish,!e.t2){e.next=33;break}return e.next=33,this.UpdateTaskFinished();case 33:this.dataService.post("/taskevents",a).subscribe(function(t){s.getEventByTask(s.taskId),s.assignedTo&&s.PushTaskNotification(t.Id,s.assignedTo),s.notificationService.printSuccessMessage(p.a.UPDATED_OK_MSG)},function(t){return s.dataService.handleError(t)}),this.modalRef.hide(),this.getTask(this.taskId),e.next=39;break;case 38:this.requiredComment=!0;case 39:case"end":return e.stop()}},e,this,[[3,13,16,19]])}))}},{key:"UpdateTaskAssigned",value:function(){var t=[];t.push("@TaskId",this.taskId,"@AssignedTo",this.assignedTo,"@Priority",this.priority,"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___AssignTo",CommandType:1025,Parameters:t}).subscribe(function(t){})}},{key:"UpdateTaskStatus",value:function(){var t=this,e=[];e.push("@TaskId",this.taskId,"@Status",this.taskItem.Status,"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___UpdateStatus",CommandType:1025,Parameters:e}).subscribe(function(e){t.taskItem.ActualDate=e.Data?e.Data[0].ActualDate:new Date})}},{key:"UpdateTaskFinished",value:function(){var t=this;this.taskItem.Finished=1;var e=[];e.push("@TaskId",this.taskId,"@Finished",this.taskItem.Finished,"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___UpdateFinished",CommandType:1025,Parameters:e}).subscribe(function(e){t.taskItem.ActualDate=e.Data?e.Data[0].ActualDate:new Date})}},{key:"PushTaskNotification",value:function(t,e){this.dataService.post("/taskEventNotifications",{taskId:this.taskId,eventId:t,subscriberId:e,isNew:1,isRead:0}).subscribe()}},{key:"UpdateTaskToDo",value:function(t){var e,a=this;this.descriptionTaskToDo?(e=t?{taskId:this.taskId,Id:this.editTodoId,code:this.todoCode,description:this.descriptionTaskToDo,changedBy:this.userLoginId}:{taskId:this.taskId,code:Object(v.v4)(),description:this.descriptionTaskToDo,createdBy:this.userLoginId},this.dataService.post("/taskTodos",e).subscribe(function(e){t?a.listTaskToDo.find(function(e){return e.Id===t}).Description=a.descriptionTaskToDo:a.listTaskToDo.push(e),a.maxProgressbar=a.listTaskToDo.length,a.descriptionTaskToDo="",a.todoCode="",a.isToDoItem=!1,a.editTodoId=void 0})):this.requiredItemTodo=!0}},{key:"FinishTaskToDo",value:function(t,e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function a(){var n,i,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.target.checked){a.next=7;break}return n={CommandText:"uspTaskTodo___UpdateFinished",CommandType:1025,Parameters:["@Id",e.Id,"@Finished",1,"@ChangedBy",this.userLoginId,"@DetailValue",e.DetailValue]},a.next=4,this.dataService.post("/commands",n).subscribe(function(t){t.Data?(e.ChangedOn=t.Data[0].ChangedOn,e.ChangedByName=t.Data[0].ChangedByName):(e.ChangedOn=new Date,e.ChangedByName=""),e.Finished=!0});case 4:this.progressing=this.progressing+1,a.next=13;break;case 7:return(i=[]).push("@Id",e.Id,"@Finished",0,"@ChangedBy",this.userLoginId,"@DetailValue",null),c={CommandText:"uspTaskTodo___UpdateFinished",CommandType:1025,Parameters:i},a.next=12,this.dataService.post("/commands",c).subscribe(function(t){e.Finished=!1});case 12:this.progressing=this.progressing-1;case 13:if(a.t0=this.maxProgressbar>0,!a.t0){a.next=18;break}return this.taskItem.Status<4&&this.progressing==this.maxProgressbar?this.taskItem.Status=4:this.taskItem.Status>=4&&this.progressing<=this.maxProgressbar&&(this.taskItem.Status=2),a.next=18,this.UpdateTaskStatus();case 18:case"end":return a.stop()}},a,this)}))}},{key:"onCloseInputTodoItem",value:function(){this.descriptionTaskToDo="",this.isToDoItem=!1,this.editTodoId=void 0,this.requiredItemTodo=!1}},{key:"onChangeItemTodo",value:function(t,e,a){t&&(this.editTodoId=t,this.isToDoItem=!0,this.descriptionTaskToDo=e,this.todoCode=a)}},{key:"onDeleteItemTodo",value:function(t){var e=this;t&&this.dataService.delete("/taskTodos/"+t).subscribe(function(a){var n=e.listTaskToDo.find(function(e){return e.Id===t}),i=e.listTaskToDo.indexOf(n);e.listTaskToDo.splice(i,1),e.maxProgressbar=e.listTaskToDo.length,e.progressing=e.listTaskToDo.filter(function(t){return t.Finished}).length})}},{key:"triggerEvent",value:function(t){this.event.emit({data:t})}},{key:"onCloseTaskDetail",value:function(){this.triggerEvent("Close"),this.bsModalRef.hide()}},{key:"onAttachTask",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function a(){var n,i,c,s,o,r=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.target.files){a.next=21;break}n=t((this.jsonData=JSON.parse(this.taskItem.JsonData),null===this.jsonData&&(this.jsonData={files:[]}),e.target.files)),a.prev=2,n.s();case 4:if((i=n.n()).done){a.next=11;break}return c=i.value,s={name:null,createdOn:null,createdBy:null},a.next=9,this.uploadService.postWithFile("/files/upload?app=TaskManager&category=Task&id="+this.taskItem.GId,null,c).then(function(t){s.name=c.name,s.createdOn=new Date,s.createdBy=r.userLoginId,r.jsonData.files.push(s),r.taskItem.JsonData=JSON.stringify(r.jsonData)});case 9:a.next=4;break;case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(2),n.e(a.t0);case 16:return a.prev=16,n.f(),a.finish(16);case 19:(o=[]).push("@TaskId",this.taskId,"@JsonData",JSON.stringify(this.jsonData),"@ChangedBy",this.userLoginId),this.dataService.post("/commands",{CommandText:"uspTask___AttachFile",CommandType:1025,Parameters:o}).subscribe(function(t){r.onShowAttachFile(r.jsonData)});case 21:case"end":return a.stop()}},a,this,[[2,13,16,19]])}))}},{key:"onAttachTaskEvent",value:function(e){var a=this;if(e.target.files){this.taskEventFileUpload=e.target.files;var n,i=[],c=t(e.target.files);try{for(c.s();!(n=c.n()).done;){var s=n.value,o={name:null,createdOn:null,createdBy:null};o.name=s.name,o.createdOn=new Date,o.createdBy=this.userLoginId,i.push(o)}}catch(u){c.e(u)}finally{c.f()}this.taskEventFiles={files:i};for(var r=e.target.files.length,l=0;l<r;l++){var d=new FileReader;d.onload=function(t){a.attachEventTemplateUrls.push(t.target.result)},d.readAsDataURL(e.target.files[l])}}}},{key:"onRemoveFileAttach",value:function(t,e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function a(){var n=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.notificationService.printConfirmationDialog(p.a.CONFIRM_DELETE_FILE,function(){return n.dataService.deleteFile("/files/delete?app=TaskManager&category="+e+"&id="+n.taskItem.GId+"&name="+t).subscribe(function(e){n.RemoveItemInJsonData(t)},function(t){return n.dataService.handleError(t)})});case 1:case"end":return a.stop()}},a,this)}))}},{key:"RemoveItemInJsonData",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var a,n,i,c=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""==t){e.next=10;break}if(this.jsonData=JSON.parse(this.taskItem.JsonData),!((a=this.jsonData.files.indexOf(this.jsonData.files.find(function(e){return e.name===t})))>=0)){e.next=10;break}return this.jsonData.files.splice(a,1),(n=[]).push("@TaskId",this.taskId,"@JsonData",JSON.stringify(this.jsonData),"@ChangedBy",this.userLoginId),i={CommandText:"uspTask___AttachFile",CommandType:1025,Parameters:n},e.next=10,this.dataService.post("/commands",i).subscribe(function(t){c.taskItem.JsonData=JSON.stringify(c.jsonData),c.onShowAttachFile(c.jsonData),c.notificationService.printSuccessMessage(p.a.DELETED_OK_MSG)});case 10:case"end":return e.stop()}},e,this)}))}},{key:"loadVehicle",value:function(){var t=this;this.dataService.get("/Vehicles").subscribe(function(e){t.vehicleList=e})}},{key:"SaveTaskSubscription",value:function(){var t=this,e=[];e.push("@TaskId",this.taskId),e.push("@UserId",this.assignedTo),e.push("@VehicleId",this.vehicleId),e.push("@AssignedBy",this.userLoginId),e.push("@SubctiptionType",this.priority),this.dataService.post("/commands",{CommandText:"uspTaskSubscription___Save",CommandType:1025,Parameters:e}).subscribe(function(e){t.getTaskSubscriptionByTask(t.taskId),t.notificationService.printSuccessMessage(p.a.CREATED_OK_MSG),t.triggerEvent("Close"),t.modalRef.hide()},function(e){return t.dataService.handleError(e)})}},{key:"getTaskSubscriptionByTask",value:function(t){var e=this;if(t){var a=[];a.push("@TaskId",this.taskId),this.dataService.post("/commands",{CommandText:"uspTaskSubscription___GetByTaskId",CommandType:1025,Parameters:a}).subscribe(function(t){t.Data&&(e.listTaskSubscription=t.Data,e.ConverDetail())})}}},{key:"ConverDetail",value:function(){var e,a=this,n=t(this.listTaskSubscription);try{var i=function(){var t=e.value;c=a.userList.find(function(e){return e.Id===t.UserId}),t.UserCode=c.FullName,t.UserName=c.UserName,t.VehicleId&&a.dataService.get("/Vehicles/"+t.VehicleId).subscribe(function(e){e&&(t.VehicleCode=e.Code,t.VehicleName=e.Name)})};for(n.s();!(e=n.n()).done;){var c;i()}}catch(s){n.e(s)}finally{n.f()}}},{key:"deleteTaskSubscriptionItem",value:function(t){var e=this,a=t.Id;this.notificationService.printConfirmationDialog(p.a.CONFIRM_DELETE_MSG,function(){return e.dataService.delete("/TaskSubscriptions/"+a).subscribe(function(t){e.notificationService.printSuccessMessage(p.a.DELETED_OK_MSG),e.getTaskSubscriptionByTask(e.taskId)},function(t){return e.dataService.handleError(t)})})}},{key:"getTodotemplateDetails",value:function(){var t;return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var a,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=[]).push("@CategoryId",null===(t=this.taskItem)||void 0===t?void 0:t.CategoryId),n={CommandText:"uspGetTodoTemplateDetails",CommandType:1025,Parameters:a},e.next=5,this.dataService.post("/commands",n).toPromise().then(function(t){t.Data&&(i.todotemplateDetails=t.Data)});case 5:case"end":return e.stop()}},e,this)}))}},{key:"checkTodoDetail",value:function(t){var e=this.todotemplateDetails.find(function(e){return e.Description===t.Description});e&&(e.DetailType=null,t.DetailList=""!==e.DetaiSettings?JSON.parse(e.DetaiSettings):[])}},{key:"isItemDisabled",value:function(t){return!(!t.Finished||(null==t?void 0:t.ChangedByName)==this.userInfo.userName)||1==t.DetailType&&null==t.DetailValue}},{key:"hasDetail",value:function(t){return 1==(null==t?void 0:t.DetailType)}},{key:"onChangeTodoDetailValue",value:function(t,e){t.DetailValue=e,t.Finished&&this.dataService.post("/commands",{CommandText:"uspTaskTodo___UpdateFinished",CommandType:1025,Parameters:["@Id",t.Id,"@Finished",1,"@ChangedBy",this.userLoginId,"@DetailValue",t.DetailValue]}).subscribe(function(e){e.Data?(t.ChangedOn=e.Data[0].ChangedOn,t.ChangedByName=e.Data[0].ChangedByName):(t.ChangedOn=new Date,t.ChangedByName="")})}},{key:"onHidden",value:function(){console.log("Dropdown is hidden")}},{key:"onShown",value:function(){console.log("Dropdown is shown")}},{key:"isOpenChange",value:function(){console.log("Dropdown state is changed")}}]),e}()).\u0275fac=function(t){return new(t||$e)(b.Vb(y.a),b.Vb(m.a),b.Vb(m.b),b.Vb(h.d),b.Vb(T.a),b.Vb(Lt.a),b.Vb(_.a))},$e.\u0275cmp=b.Pb({type:$e,selectors:[["app-task-detail"]],decls:162,vars:111,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-md-10","col-xs-12"],[1,"col-md-5","col-xs-12"],[1,"form-input"],[1,"col-md-3","col-xs-12"],[1,"col-md-4","col-xs-12"],[3,"innerHTML"],["id","task-todo",3,"heading"],[1,"task-todo"],["aria-hidden","true",1,"fa","fa-list"],[1,"mb-2","progressbar-panel"],[3,"value","max","striped","animate"],[1,"list-task-todo"],[4,"ngFor","ngForOf"],["id","task-detail",3,"heading"],[1,"table-responsive","table-task-item"],[1,"table","table-bordered"],["class","select-task",4,"ngFor","ngForOf"],["class","col-md-12",4,"ngIf"],[3,"heading"],["class","panel-attach",4,"ngIf"],["class","panel panel-info activity-log",4,"ngIf"],[1,"col-md-2","col-xs-12","action-task-detail"],[1,"tile-action"],["class","btn btn-secondary",3,"click",4,"ngIf"],["for","file-input",1,"btn","btn-secondary"],["aria-hidden","true",1,"fa","fa-paperclip"],["id","file-input","type","file","capture","camera","multiple","",2,"visibility","hidden","position","absolute",3,"change"],[1,"btn","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-link"],["aria-hidden","true",1,"fa","fa-comments"],["aria-hidden","true",1,"fa","fa-list-ol"],["aria-hidden","true",1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-default",3,"click"],[1,"modal-footer"],["templateComment",""],["templateTaskSubscription",""],["class","todo-item",3,"mouseover","mouseout",4,"ngIf"],[1,"todo-item",3,"mouseover","mouseout"],["type","hidden",3,"ngModel","ngModelChange"],["type","checkbox",1,"check-finish",3,"checked","disabled","change"],[1,"task-todo-action-item",3,"ngClass"],["dropdown","",1,"btn-group",3,"isDisabled"],["href","","id","basic-link","dropdownToggle","","aria-controls","basic-link-dropdown",3,"click"],["aria-hidden","true",1,"fa","fa-bars"],["id","basic-link-dropdown","class","dropdown-menu","role","menu","aria-labelledby","basic-link",4,"dropdownMenu"],[3,"hidden"],["aria-hidden","true",1,"fa","fa-user"],["aria-hidden","true",1,"fa","fa-clock-o"],["id","basic-link-dropdown","role","menu","aria-labelledby","basic-link",1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink","click"],[1,"select-task"],[4,"ngIf"],[1,"col-md-12"],[1,"alert","alert-info"],[1,"text-center","action-task"],["data-toggle","tooltip","data-placement","top","class","action-delete-task",3,"click",4,"ngIf"],["data-toggle","tooltip","data-placement","top",1,"action-delete-task",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"panel-attach"],[1,"attach-header"],[1,"fa","fa-paperclip"],["class","attach-content",4,"ngFor","ngForOf"],[1,"attach-content"],[1,"file-display"],["data-toggle","tooltip",1,"action-remove-task-attach",3,"title","click"],["target","_blank",3,"href"],["class","attach-logo",3,"src",4,"ngIf"],["class","attach-logo","src","http://27.72.62.141:8888/tasks/assets/images/download_drive.png",4,"ngIf"],[1,"file-detail"],[1,"attach-logo",3,"src"],["src","http://27.72.62.141:8888/tasks/assets/images/download_drive.png",1,"attach-logo"],[1,"panel","panel-info","activity-log"],[1,"panel-heading"],[1,"fa","fa-history"],[1,"panel-body","log-content"],["class","panel panel-default",4,"ngFor","ngForOf"],[1,"panel","panel-default"],["class","file-task-event",4,"ngIf"],[1,"panel-body",3,"innerHtml"],[1,"file-task-event"],["class","file-display",4,"ngIf"],["aria-hidden","true",1,"fa","fa-edit"],["class","row form-group",4,"ngIf"],[1,"form-group"],[3,"init","ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["id","file-input","type","file","multiple","","capture","camera",3,"change"],[1,"task-attach-image"],["height","150","width","200","style","background-color: #eeee;",3,"src",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","button-submit",3,"click"],[1,"row","form-group"],[1,"control-label","col-md-3","col-sm-3","col-xs-12"],[1,"col-md-9","col-sm-9","col-xs-12"],["name","assignedTo",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger"],["name","priority",1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","4"],["name","status",1,"form-control",3,"ngModel","ngModelChange"],["height","150","width","200",2,"background-color","#eeee",3,"src"],["value","0"],["name","vehicle",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){var a=b.cc();b.bc(0,"div",0),b.bc(1,"h4",1),b.bc(2,"strong"),b.Mc(3),b.ac(),b.ac(),b.bc(4,"button",2),b.ic("click",function(){return e.onCloseTaskDetail()}),b.bc(5,"span",3),b.Mc(6,"\xd7"),b.ac(),b.ac(),b.ac(),b.bc(7,"div",4),b.bc(8,"div",5),b.bc(9,"div",6),b.bc(10,"div",5),b.bc(11,"div",7),b.bc(12,"div",8),b.bc(13,"span"),b.bc(14,"strong"),b.Mc(15),b.lc(16,"translate"),b.ac(),b.ac(),b.bc(17,"span"),b.Mc(18),b.ac(),b.ac(),b.bc(19,"div",8),b.bc(20,"span"),b.bc(21,"strong"),b.Mc(22),b.lc(23,"translate"),b.ac(),b.ac(),b.bc(24,"span"),b.Mc(25),b.ac(),b.ac(),b.bc(26,"div",8),b.bc(27,"span"),b.bc(28,"strong"),b.Mc(29),b.lc(30,"translate"),b.ac(),b.ac(),b.bc(31,"span"),b.Mc(32),b.lc(33,"priorityPipe"),b.ac(),b.ac(),b.ac(),b.bc(34,"div",9),b.bc(35,"div",8),b.bc(36,"span"),b.bc(37,"strong"),b.Mc(38),b.lc(39,"translate"),b.ac(),b.ac(),b.bc(40,"span"),b.Mc(41),b.lc(42,"statusPipe"),b.ac(),b.ac(),b.bc(43,"div",8),b.bc(44,"span"),b.bc(45,"strong"),b.Mc(46),b.lc(47,"translate"),b.ac(),b.ac(),b.bc(48,"span"),b.Mc(49),b.lc(50,"date"),b.ac(),b.ac(),b.bc(51,"div",8),b.bc(52,"span"),b.bc(53,"strong"),b.Mc(54),b.lc(55,"translate"),b.ac(),b.ac(),b.bc(56,"span"),b.Mc(57),b.lc(58,"date"),b.ac(),b.ac(),b.ac(),b.bc(59,"div",10),b.bc(60,"div",8),b.bc(61,"span"),b.bc(62,"strong"),b.Mc(63),b.lc(64,"translate"),b.ac(),b.ac(),b.bc(65,"span"),b.Mc(66),b.lc(67,"date"),b.ac(),b.ac(),b.bc(68,"div",8),b.bc(69,"span"),b.bc(70,"strong"),b.Mc(71),b.lc(72,"translate"),b.ac(),b.ac(),b.bc(73,"span"),b.Mc(74),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(75,"div",8),b.bc(76,"span"),b.bc(77,"strong"),b.Mc(78),b.lc(79,"translate"),b.ac(),b.ac(),b.Wb(80,"p",11),b.ac(),b.bc(81,"tabset"),b.bc(82,"tab",12),b.lc(83,"translate"),b.bc(84,"div",13),b.bc(85,"span"),b.Wb(86,"i",14),b.bc(87,"strong"),b.Mc(88),b.lc(89,"translate"),b.ac(),b.ac(),b.bc(90,"div",15),b.Wb(91,"progressbar",16),b.ac(),b.bc(92,"div",17),b.Kc(93,ne,2,1,"div",18),b.ac(),b.ac(),b.ac(),b.bc(94,"tab",19),b.lc(95,"translate"),b.bc(96,"div",20),b.bc(97,"table",21),b.bc(98,"thead"),b.bc(99,"tr"),b.bc(100,"th"),b.Mc(101),b.lc(102,"translate"),b.ac(),b.Kc(103,ie,2,1,"th",18),b.lc(104,"jsonToArray"),b.ac(),b.ac(),b.bc(105,"tbody"),b.Kc(106,re,5,5,"tr",22),b.ac(),b.ac(),b.Kc(107,le,7,6,"div",23),b.ac(),b.ac(),b.bc(108,"tab",24),b.lc(109,"translate"),b.bc(110,"div",20),b.bc(111,"table",21),b.bc(112,"thead"),b.bc(113,"tr"),b.bc(114,"th"),b.Mc(115),b.lc(116,"translate"),b.ac(),b.Kc(117,de,2,1,"th",18),b.lc(118,"jsonToArray"),b.ac(),b.ac(),b.bc(119,"tbody"),b.Kc(120,ge,8,5,"tr",22),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.Kc(121,ve,8,4,"div",25),b.Kc(122,Se,8,4,"div",26),b.ac(),b.bc(123,"div",27),b.bc(124,"span",28),b.bc(125,"strong"),b.Mc(126),b.lc(127,"translate"),b.ac(),b.ac(),b.Kc(128,Ne,4,3,"button",29),b.bc(129,"label",30),b.Wb(130,"i",31),b.Mc(131),b.lc(132,"translate"),b.bc(133,"input",32),b.ic("change",function(t){return e.onAttachTask(t)}),b.ac(),b.ac(),b.Kc(134,Oe,4,3,"button",29),b.bc(135,"button",33),b.ic("click",function(){b.Ec(a);var t=b.Ac(161);return e.onTaskSubscription(t)}),b.Wb(136,"i",34),b.Mc(137),b.lc(138,"translate"),b.ac(),b.bc(139,"button",33),b.ic("click",function(){b.Ec(a);var t=b.Ac(159);return e.onComment(t)}),b.Wb(140,"i",35),b.Mc(141),b.lc(142,"translate"),b.ac(),b.bc(143,"button",33),b.ic("click",function(){b.Ec(a);var t=b.Ac(159);return e.onChangeStatus(t)}),b.Wb(144,"i",36),b.Mc(145),b.lc(146,"translate"),b.ac(),b.bc(147,"button",33),b.ic("click",function(){b.Ec(a);var t=b.Ac(159);return e.onFinishTask(t)}),b.Wb(148,"i",37),b.Mc(149),b.lc(150,"translate"),b.ac(),b.bc(151,"button",38),b.ic("click",function(){return e.onCloseTaskDetail()}),b.Mc(152),b.lc(153,"translate"),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(154,"div",39),b.bc(155,"button",38),b.ic("click",function(){return e.onCloseTaskDetail()}),b.Mc(156),b.lc(157,"translate"),b.ac(),b.ac(),b.Kc(158,Ve,36,25,"ng-template",null,40,b.Lc),b.Kc(160,Be,59,46,"ng-template",null,41,b.Lc)}2&t&&(b.Jb(3),b.Nc(null==e.taskItem?null:e.taskItem.Title),b.Jb(12),b.Oc("",b.mc(16,47,"task_manager_task_owner"),": "),b.Jb(3),b.Nc(null==e.taskItem?null:e.taskItem.OwnerName),b.Jb(4),b.Oc("",b.mc(23,49,"task_manager_task_assigned_to"),": "),b.Jb(3),b.Nc(null==e.taskItem?null:e.taskItem.AssignedName),b.Jb(4),b.Oc("",b.mc(30,51,"task_manager_task_priority"),": "),b.Jb(3),b.Nc(b.mc(33,53,null==e.taskItem?null:e.taskItem.Priority)),b.Jb(6),b.Oc("",b.mc(39,55,"task_manager_task_status"),": "),b.Jb(3),b.Nc(b.mc(42,57,null==e.taskItem?null:e.taskItem.Status)),b.Jb(5),b.Oc("",b.mc(47,59,"task_manager_task_due_date"),": "),b.Jb(3),b.Nc(b.nc(50,61,null==e.taskItem?null:e.taskItem.DueDate,"dd/MM/yyyy HH:mm")),b.Jb(5),b.Oc("",b.mc(55,64,"task_manager_task_actual_date"),": "),b.Jb(3),b.Nc(b.nc(58,66,null==e.taskItem?null:e.taskItem.ActualDate,"dd/MM/yyyy HH:mm")),b.Jb(6),b.Oc("",b.mc(64,69,"task_manager_task_updated_on"),": "),b.Jb(3),b.Nc(b.nc(67,71,null==e.taskItem?null:e.taskItem.ChangedOn,"dd/MM/yyyy HH:mm")),b.Jb(5),b.Oc("",b.mc(72,74,"task_manager_task_updated_by"),": "),b.Jb(3),b.Nc(null==e.taskItem?null:e.taskItem.ChangedByName),b.Jb(4),b.Nc(b.mc(79,76,"task_manager_task_description")),b.Jb(2),b.qc("innerHTML",null==e.taskItem?null:e.taskItem.Description,b.Fc),b.Jb(2),b.rc("heading",b.mc(83,78,"task_manager_action_task_todo")),b.Jb(6),b.Oc(" ",b.mc(89,80,"task_manager_action_task_todo"),""),b.Jb(3),b.qc("value",e.progressing)("max",e.maxProgressbar)("striped",!0)("animate",!0),b.Jb(2),b.qc("ngForOf",e.listTaskToDo),b.Jb(1),b.rc("heading",b.mc(95,82,"task_manager_task_detail")),b.Jb(7),b.Nc(b.mc(102,84,"task_manager_task_number")),b.Jb(2),b.qc("ngForOf",b.nc(104,86,e.taskItemColumn,"CustomerId")),b.Jb(3),b.qc("ngForOf",e.listTaskItem),b.Jb(1),b.qc("ngIf",e.listTaskItem&&0==e.listTaskItem.length),b.Jb(1),b.rc("heading",b.mc(109,89,"task_manager_TaskSubscription_list")),b.Jb(7),b.Nc(b.mc(116,91,"task_manager_task_number")),b.Jb(2),b.qc("ngForOf",b.mc(118,93,e.taskSubscriptionsColumn)),b.Jb(3),b.qc("ngForOf",e.listTaskSubscription),b.Jb(1),b.qc("ngIf",e.attachUrls.length>0),b.Jb(1),b.qc("ngIf",e.eventByTask.length>0),b.Jb(4),b.Nc(b.mc(127,95,"title_action")),b.Jb(2),b.qc("ngIf",e.authService.hasPermission("/main/task","Edit")),b.Jb(3),b.Oc(" ",b.mc(132,97,"button_attach")," "),b.Jb(3),b.qc("ngIf",e.authService.hasPermission("/main/task","Assign")),b.Jb(3),b.Oc("",b.mc(138,99,"task_manager_TaskSubscription")," "),b.Jb(4),b.Oc(" ",b.mc(142,101,"task_manager_task_button_comment"),""),b.Jb(4),b.Oc(" ",b.mc(146,103,"task_manager_task_button_status"),""),b.Jb(4),b.Oc(" ",b.mc(150,105,"task_manager_task_button_finish"),""),b.Jb(3),b.Nc(b.mc(153,107,"button_close")),b.Jb(4),b.Nc(b.mc(157,109,"button_close")))},directives:[D.c,D.a,B,l.l,l.m,f.b,f.k,f.n,l.k,Ht,Yt,Qt,d.e,A.a,f.t,f.o,f.v],pipes:[h.c,z,G,l.e,Y,l.t,X,H],styles:[".action-task-detail[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .action-task-detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;text-align:left}.action-task-detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#efefef}.activity-log[_ngcontent-%COMP%]{margin-top:50px}.tile-action[_ngcontent-%COMP%]{text-transform:uppercase;margin-bottom:10px}.log-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block}.content-item[_ngcontent-%COMP%]{padding-bottom:10px}.contextmenu[_ngcontent-%COMP%]{position:absolute;border:1px solid grey;padding:10px;background-color:#fff}.task-todo-action-delete[_ngcontent-%COMP%]{float:right;font-size:12px}.task-todo-action[_ngcontent-%COMP%]{font-size:12px}.progress[_ngcontent-%COMP%]{height:10px}.todo-title[_ngcontent-%COMP%]{width:100%;margin-bottom:5px;margin-top:5px}.list-task-todo[_ngcontent-%COMP%]{line-height:2.5}.task-todo[_ngcontent-%COMP%]{margin-top:15px}.todo-item[_ngcontent-%COMP%]{cursor:pointer}.task-todo-action-item[_ngcontent-%COMP%]{padding-left:10px}.remove-hidden[_ngcontent-%COMP%]{display:block}.task-todo-item[_ngcontent-%COMP%]{margin-right:5px}.progressbar-panel[_ngcontent-%COMP%]{margin-top:10px}.table-task-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{white-space:nowrap}.panel-attach[_ngcontent-%COMP%]{margin-top:20px}.attach-header[_ngcontent-%COMP%]{font-size:18px}.attach-content[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;margin-bottom:10px}.file-display[_ngcontent-%COMP%]{width:200px;height:150px;background-color:hsla(0,0%,93.3%,.9333333333333333);position:relative}.file-display[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.action-remove-task-attach[_ngcontent-%COMP%]{display:none;position:absolute;top:0;right:-5px}.file-display[_ngcontent-%COMP%]:hover   .action-remove-task-attach[_ngcontent-%COMP%]{display:block}.file-task-event[_ngcontent-%COMP%]   .attach-content[_ngcontent-%COMP%]{margin-top:5px;margin-left:5px}.task-attach-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px;margin-bottom:10px;-o-object-fit:contain;object-fit:contain}"]}),$e),ze=c("qeeY"),He=c("Lm2G");function Qe(t,e){if(1&t){var a=b.cc();b.bc(0,"button",37),b.ic("click",function(){return b.Ec(a),b.kc().gotoAlcTaskItemList()}),b.Wb(1,"i",38),b.Mc(2),b.lc(3,"translate"),b.ac()}2&t&&(b.Jb(2),b.Oc(" ",b.mc(3,1,"task_manager_create_new_task_from_alc_item"),""))}function Ye(t,e){if(1&t){var a=b.cc();b.bc(0,"button",39),b.ic("click",function(){return b.Ec(a),b.kc().openAddItemComponent()}),b.Wb(1,"span",40),b.Mc(2),b.lc(3,"translate"),b.ac()}2&t&&(b.Jb(2),b.Oc(" ",b.mc(3,1,"task_manager_create_new_task"),""))}function Xe(t,e){if(1&t&&(b.bc(0,"option",41),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.qc("value",a.Id),b.Jb(1),b.Nc(a.UserName)}}function Ze(t,e){1&t&&(b.bc(0,"div"),b.Wb(1,"img",42),b.Mc(2," \xa0"),b.bc(3,"span"),b.Mc(4,"\u0110ang t\u1ea3i d\u1eef li\u1ec7u"),b.ac(),b.ac())}function ta(t,e){if(1&t){var a=b.cc();b.bc(0,"a",49),b.ic("click",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().onEditTask(e.Id,t)}),b.lc(1,"translate"),b.Wb(2,"i",50),b.ac()}2&t&&b.rc("title",b.mc(1,1,"task_manager_task_edit"))}function ea(t,e){if(1&t){var a=b.cc();b.bc(0,"a",51),b.ic("click",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().onDeleteTask(e.Id,t)}),b.lc(1,"translate"),b.Wb(2,"i",52),b.ac()}2&t&&b.rc("title",b.mc(1,1,"task_manager_task_delete"))}function aa(t,e){if(1&t){var a=b.cc();b.bc(0,"tr",43),b.ic("click",function(){b.Ec(a);var t=e.$implicit;return b.kc().onSelectTask(t.Id)}),b.bc(1,"td"),b.Mc(2),b.ac(),b.bc(3,"td"),b.Mc(4),b.ac(),b.bc(5,"td"),b.Mc(6),b.lc(7,"date"),b.ac(),b.bc(8,"td"),b.Mc(9),b.lc(10,"date"),b.ac(),b.bc(11,"td"),b.Mc(12),b.lc(13,"date"),b.ac(),b.bc(14,"td"),b.Mc(15),b.lc(16,"statusPipe"),b.ac(),b.bc(17,"td",44),b.Wb(18,"input",45),b.ac(),b.bc(19,"td",46),b.Kc(20,ta,3,3,"a",47),b.Mc(21,"\xa0 "),b.Kc(22,ea,3,3,"a",48),b.ac(),b.ac()}if(2&t){var n=e.$implicit,i=e.index,c=b.kc();b.Jb(2),b.Nc(c.tabMyAssignedParams.pageNumber>1?i+1+(c.tabMyAssignedParams.pageNumber-1)*c.tabMyAssignedParams.pageSize:i+1),b.Jb(2),b.Nc(n.Title),b.Jb(2),b.Nc(b.nc(7,9,n.TaskDate,"dd/MM/yyyy")),b.Jb(3),b.Nc(b.nc(10,12,n.DueDate,"dd/MM/yyyy HH:mm")),b.Jb(3),b.Nc(b.nc(13,15,n.ActualDate,"dd/MM/yyyy HH:mm")),b.Jb(3),b.Nc(b.mc(16,18,n.Status)),b.Jb(3),b.qc("checked",n.Finished),b.Jb(2),b.qc("ngIf",c.authService.hasPermission("/main/task","Edit")),b.Jb(2),b.qc("ngIf",c.authService.hasPermission("/main/task","Delete"))}}function na(t,e){1&t&&(b.bc(0,"div",53),b.bc(1,"div",54),b.bc(2,"strong"),b.Mc(3),b.lc(4,"translate"),b.ac(),b.Mc(5),b.lc(6,"translate"),b.ac(),b.ac()),2&t&&(b.Jb(3),b.Oc("",b.mc(4,2,"dialog_alert_title"),"!"),b.Jb(2),b.Oc(" ",b.mc(6,4,"task_manager_task_notice_list_empty")," "))}function ia(t,e){if(1&t){var a=b.cc();b.bc(0,"div",53),b.bc(1,"div",55),b.bc(2,"pagination",56),b.ic("pageChanged",function(t){b.Ec(a);var e=b.kc();return e.pageChanged(t,e.tab)})("ngModelChange",function(t){return b.Ec(a),b.kc().tabMyAssignedParams.pageNumber=t}),b.ac(),b.ac(),b.bc(3,"div",57),b.bc(4,"div",58),b.bc(5,"label",11),b.Mc(6),b.lc(7,"translate"),b.ac(),b.bc(8,"select",59),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc().tabMyAssignedParams.pageSize=t})("change",function(){b.Ec(a);var t=b.kc();return t.onChangePageSize(t.tab)}),b.bc(9,"option",60),b.Mc(10,"10"),b.ac(),b.bc(11,"option",61),b.Mc(12,"20"),b.ac(),b.bc(13,"option",62),b.Mc(14,"50"),b.ac(),b.bc(15,"option",63),b.Mc(16,"100"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac()}if(2&t){var n=b.kc();b.Jb(2),b.qc("boundaryLinks",!0)("itemsPerPage",n.tabMyAssignedParams.pageSize)("totalItems",n.tabMyAssignedParams.totalRow)("ngModel",n.tabMyAssignedParams.pageNumber),b.Jb(4),b.Oc("",b.mc(7,6,"show_row")," \xa0"),b.Jb(2),b.qc("ngModel",n.tabMyAssignedParams.pageSize)}}function ca(t,e){if(1&t&&(b.bc(0,"option",41),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.qc("value",a.Id),b.Jb(1),b.Nc(a.UserName)}}function sa(t,e){1&t&&(b.bc(0,"div"),b.Wb(1,"img",42),b.Mc(2," \xa0"),b.bc(3,"span"),b.Mc(4,"\u0110ang t\u1ea3i d\u1eef li\u1ec7u"),b.ac(),b.ac())}function oa(t,e){if(1&t){var a=b.cc();b.bc(0,"a",49),b.ic("click",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().onEditTask(e.Id,t)}),b.lc(1,"translate"),b.Wb(2,"i",50),b.ac()}2&t&&b.rc("title",b.mc(1,1,"task_manager_task_edit"))}function ra(t,e){if(1&t){var a=b.cc();b.bc(0,"a",51),b.ic("click",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().onDeleteTask(e.Id,t)}),b.lc(1,"translate"),b.Wb(2,"i",52),b.ac()}2&t&&b.rc("title",b.mc(1,1,"task_manager_task_delete"))}function la(t,e){if(1&t){var a=b.cc();b.bc(0,"tr",43),b.ic("click",function(){b.Ec(a);var t=e.$implicit;return b.kc().onSelectTask(t.Id)}),b.bc(1,"td"),b.Mc(2),b.ac(),b.bc(3,"td"),b.Mc(4),b.ac(),b.bc(5,"td"),b.Mc(6),b.lc(7,"date"),b.ac(),b.bc(8,"td"),b.Mc(9),b.ac(),b.bc(10,"td"),b.Mc(11),b.ac(),b.bc(12,"td"),b.Mc(13),b.lc(14,"date"),b.ac(),b.bc(15,"td"),b.Mc(16),b.lc(17,"date"),b.ac(),b.bc(18,"td"),b.Mc(19),b.lc(20,"statusPipe"),b.ac(),b.bc(21,"td",44),b.Wb(22,"input",45),b.ac(),b.bc(23,"td",46),b.Kc(24,oa,3,3,"a",47),b.Mc(25,"\xa0 "),b.Kc(26,ra,3,3,"a",48),b.ac(),b.ac()}if(2&t){var n=e.$implicit,i=e.index,c=b.kc();b.Jb(2),b.Nc(c.tabMyFollowedParams.pageNumber>1?i+1+(c.tabMyFollowedParams.pageNumber-1)*c.tabMyFollowedParams.pageSize:i+1),b.Jb(2),b.Nc(n.Title),b.Jb(2),b.Nc(b.nc(7,11,n.TaskDate,"dd/MM/yyyy")),b.Jb(3),b.Nc(n.OwnerName),b.Jb(2),b.Nc(n.AssignedName),b.Jb(2),b.Nc(b.nc(14,14,n.DueDate,"dd/MM/yyyy HH:mm")),b.Jb(3),b.Nc(b.nc(17,17,n.ActualDate,"dd/MM/yyyy HH:mm")),b.Jb(3),b.Nc(b.mc(20,20,n.Status)),b.Jb(3),b.qc("checked",n.Finished),b.Jb(2),b.qc("ngIf",c.authService.hasPermission("/main/task","Edit")),b.Jb(2),b.qc("ngIf",c.authService.hasPermission("/main/task","Delete"))}}function da(t,e){1&t&&(b.bc(0,"div",53),b.bc(1,"div",54),b.bc(2,"strong"),b.Mc(3),b.lc(4,"translate"),b.ac(),b.Mc(5),b.lc(6,"translate"),b.ac(),b.ac()),2&t&&(b.Jb(3),b.Oc("",b.mc(4,2,"dialog_alert_title"),"!"),b.Jb(2),b.Oc(" ",b.mc(6,4,"task_manager_task_notice_list_empty")," "))}function ua(t,e){if(1&t){var a=b.cc();b.bc(0,"div",53),b.bc(1,"div",55),b.bc(2,"pagination",56),b.ic("pageChanged",function(t){b.Ec(a);var e=b.kc();return e.pageChanged(t,e.tab)})("ngModelChange",function(t){return b.Ec(a),b.kc().tabMyFollowedParams.pageNumber=t}),b.ac(),b.ac(),b.bc(3,"div",57),b.bc(4,"div",58),b.bc(5,"label",11),b.Mc(6),b.lc(7,"translate"),b.ac(),b.bc(8,"select",59),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc().tabMyFollowedParams.pageSize=t})("change",function(){b.Ec(a);var t=b.kc();return t.onChangePageSize(t.tab)}),b.bc(9,"option",60),b.Mc(10,"10"),b.ac(),b.bc(11,"option",61),b.Mc(12,"20"),b.ac(),b.bc(13,"option",62),b.Mc(14,"50"),b.ac(),b.bc(15,"option",63),b.Mc(16,"100"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac()}if(2&t){var n=b.kc();b.Jb(2),b.qc("boundaryLinks",!0)("itemsPerPage",n.tabMyFollowedParams.pageSize)("totalItems",n.tabMyFollowedParams.totalRow)("ngModel",n.tabMyFollowedParams.pageNumber),b.Jb(4),b.Oc("",b.mc(7,6,"show_row")," \xa0"),b.Jb(2),b.qc("ngModel",n.tabMyFollowedParams.pageSize)}}function ba(t,e){if(1&t&&(b.bc(0,"option",41),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.qc("value",a.Id),b.Jb(1),b.Nc(a.UserName)}}function ma(t,e){1&t&&(b.bc(0,"div"),b.Wb(1,"img",42),b.Mc(2," \xa0"),b.bc(3,"span"),b.Mc(4,"\u0110ang t\u1ea3i d\u1eef li\u1ec7u"),b.ac(),b.ac())}function ha(t,e){if(1&t){var a=b.cc();b.bc(0,"a",49),b.ic("click",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().onEditTask(e.Id,t)}),b.lc(1,"translate"),b.Wb(2,"i",50),b.ac()}2&t&&b.rc("title",b.mc(1,1,"task_manager_task_edit"))}function ga(t,e){if(1&t){var a=b.cc();b.bc(0,"a",51),b.ic("click",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().onDeleteTask(e.Id,t)}),b.lc(1,"translate"),b.Wb(2,"i",52),b.ac()}2&t&&b.rc("title",b.mc(1,1,"task_manager_task_delete"))}function pa(t,e){if(1&t){var a=b.cc();b.bc(0,"tr",43),b.ic("click",function(){b.Ec(a);var t=e.$implicit;return b.kc().onSelectTask(t.Id)}),b.bc(1,"td"),b.Mc(2),b.ac(),b.bc(3,"td"),b.Mc(4),b.ac(),b.bc(5,"td"),b.Mc(6),b.lc(7,"date"),b.ac(),b.bc(8,"td"),b.Mc(9),b.ac(),b.bc(10,"td"),b.Mc(11),b.ac(),b.bc(12,"td"),b.Mc(13),b.lc(14,"date"),b.ac(),b.bc(15,"td"),b.Mc(16),b.lc(17,"date"),b.ac(),b.bc(18,"td",46),b.Kc(19,ha,3,3,"a",47),b.Mc(20,"\xa0 "),b.Kc(21,ga,3,3,"a",48),b.ac(),b.ac()}if(2&t){var n=e.$implicit,i=e.index,c=b.kc();b.Jb(2),b.Nc(c.tabUnAssignedParams.pageNumber>1?i+1+(c.tabUnAssignedParams.pageNumber-1)*c.tabUnAssignedParams.pageSize:i+1),b.Jb(2),b.Nc(n.Title),b.Jb(2),b.Nc(b.nc(7,9,n.TaskDate,"dd/MM/yyyy")),b.Jb(3),b.Nc(n.OwnerName),b.Jb(2),b.Nc(n.AssignedName),b.Jb(2),b.Nc(b.nc(14,12,n.DueDate,"dd/MM/yyyy HH:mm")),b.Jb(3),b.Nc(b.nc(17,15,n.ActualDate,"dd/MM/yyyy HH:mm")),b.Jb(3),b.qc("ngIf",c.authService.hasPermission("/main/task","Edit")),b.Jb(2),b.qc("ngIf",c.authService.hasPermission("/main/task","Delete"))}}function fa(t,e){1&t&&(b.bc(0,"div",53),b.bc(1,"div",54),b.bc(2,"strong"),b.Mc(3),b.lc(4,"translate"),b.ac(),b.Mc(5),b.lc(6,"translate"),b.ac(),b.ac()),2&t&&(b.Jb(3),b.Oc("",b.mc(4,2,"dialog_alert_title"),"!"),b.Jb(2),b.Oc(" ",b.mc(6,4,"task_manager_task_notice_list_empty")," "))}function ka(t,e){if(1&t){var a=b.cc();b.bc(0,"div",53),b.bc(1,"div",55),b.bc(2,"pagination",56),b.ic("pageChanged",function(t){b.Ec(a);var e=b.kc();return e.pageChanged(t,e.tab)})("ngModelChange",function(t){return b.Ec(a),b.kc().tabUnAssignedParams.pageNumber=t}),b.ac(),b.ac(),b.bc(3,"div",57),b.bc(4,"div",58),b.bc(5,"label",11),b.Mc(6),b.lc(7,"translate"),b.ac(),b.bc(8,"select",59),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc().tabUnAssignedParams.pageSize=t})("change",function(){b.Ec(a);var t=b.kc();return t.onChangePageSize(t.tab)}),b.bc(9,"option",60),b.Mc(10,"10"),b.ac(),b.bc(11,"option",61),b.Mc(12,"20"),b.ac(),b.bc(13,"option",62),b.Mc(14,"50"),b.ac(),b.bc(15,"option",63),b.Mc(16,"100"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac()}if(2&t){var n=b.kc();b.Jb(2),b.qc("boundaryLinks",!0)("itemsPerPage",n.tabUnAssignedParams.pageSize)("totalItems",n.tabUnAssignedParams.totalRow)("ngModel",n.tabUnAssignedParams.pageNumber),b.Jb(4),b.Oc("",b.mc(7,6,"show_row")," \xa0"),b.Jb(2),b.qc("ngModel",n.tabUnAssignedParams.pageSize)}}var va,_a=function(t){return{rangeInputFormat:"DD/MM/YYYY",ranges:t}},ya=((va=function(){function t(e,a,n,i){s(this,t),this.modalService=e,this.authService=a,this.dataService=n,this.utilityService=i,this.taskList=[],this.taskListUnassigned=[],this.taskListMyAssigned=[],this.taskListOpen=[],this.taskListMyFollowed=[],this.loading=!1,this.tabUnAssignedParams={totalRow:0,keyword:"",fromDate:new Date,toDate:new Date,status:0,ownerId:0,pageNumber:1,pageSize:10,sort:"",direction:""},this.tabMyAssignedParams={totalRow:0,keyword:"",fromDate:new Date,toDate:new Date,status:0,ownerId:0,assignedTo:0,pageNumber:1,pageSize:10,sort:"",direction:""},this.tabMyFollowedParams={totalRow:0,keyword:"",fromDate:new Date,toDate:new Date,status:0,ownerId:0,assignedTo:0,pageNumber:1,pageSize:10,sort:"",direction:""},this.tabOpenParams={totalRow:0,keyword:"",fromDate:new Date,toDate:new Date,status:0,ownerId:0,assignedTo:0,pageNumber:1,pageSize:10,sort:"",direction:""},this.tab="tab-my-assigned",this.dateRangeConfig=[{value:[new Date,new Date],label:"H\xf4m nay"},{value:[new Date((new Date).setDate((new Date).getDate()-7)),new Date],label:"7 ng\xe0y tr\u01b0\u1edbc"},{value:[new Date((new Date).setDate((new Date).getDate()-30)),new Date],label:"30 ng\xe0y tr\u01b0\u1edbc"},{value:[new Date((new Date).setDate(1)),new Date],label:"T\u1eeb \u0111\u1ea7u th\xe1ng"},{value:[new Date((new Date).getFullYear(),0,1),new Date],label:"T\u1eeb \u0111\u1ea7u n\u0103m"}]}return r(t,[{key:"ngOnInit",value:function(){var t=this.authService.getLoggedInUser();this.getUserIdLogin(t.userName),this.getListUser(),this.dateRangeTabMyAssigned=[this.tabMyAssignedParams.fromDate,this.tabMyAssignedParams.toDate],this.dateRangeTabMyFollowed=[this.tabMyFollowedParams.fromDate,this.tabMyFollowedParams.toDate],this.dateRangeTabOpen=[this.tabOpenParams.fromDate,this.tabOpenParams.toDate],this.dateRangeTabUnAssigned=[this.tabUnAssignedParams.fromDate,this.tabUnAssignedParams.toDate]}},{key:"getListUser",value:function(){var t=this,e=[];e.push("@ActivatedOnly",1),this.dataService.post("/commands",{CommandText:"uspUser___Fill",CommandType:1025,Parameters:e}).subscribe(function(e){e.Data&&(t.userList=e.Data)})}},{key:"getUserIdLogin",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var a,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return(a=[]).push("@UserName",t),n={CommandText:"uspUser___FindUserName",CommandType:1025,Parameters:a},e.next=6,this.dataService.post("/commands",n).subscribe(function(t){t.Data&&(i.userLoginId=t.Data[0].Id)});case 6:case"end":return e.stop()}},e,this)}))}},{key:"getListTaskOpen",value:function(){var t=this;this.loading=!0;var e=[];e.push("@KeyWord",this.tabOpenParams.keyword,"@TaskDateFrom",this.tabOpenParams.fromDate,"@TaskDateTo",this.tabOpenParams.toDate,"@Status",-1,"@OwnerId",this.tabOpenParams.ownerId,"@AssignedTo",this.tabOpenParams.assignedTo,"@PageNumber",this.tabOpenParams.pageNumber,"@PageSize",this.tabOpenParams.pageSize,"@Sort","TaskDate","@Direction","DESC"),this.dataService.post("/commands/paged",{CommandText:"uspTask___Search",CommandType:1025,Parameters:e}).subscribe(function(e){t.taskListOpen=e.Data,t.tabOpenParams.totalRow=e.TotalItems,t.loading=!1})}},{key:"getListTaskUnAssigned",value:function(){var t=this;this.loading=!0;var e=[];e.push("@KeyWord",this.tabUnAssignedParams.keyword,"@TaskDateFrom",this.tabUnAssignedParams.fromDate,"@TaskDateTo",this.tabUnAssignedParams.toDate,"@Status",this.tabUnAssignedParams.status,"@OwnerId",this.tabUnAssignedParams.ownerId,"@AssignedTo",-1,"@PageNumber",this.tabUnAssignedParams.pageNumber,"@PageSize",this.tabUnAssignedParams.pageSize,"@Sort","TaskDate","@Direction","DESC"),this.dataService.post("/commands/paged",{CommandText:"uspTask___Search",CommandType:1025,Parameters:e}).subscribe(function(e){t.taskListUnassigned=e.Data,t.tabUnAssignedParams.totalRow=e.TotalItems,t.loading=!1})}},{key:"getListTaskMyAssigned",value:function(){var t=this;this.loading=!0;var e=[];e.push("@KeyWord",this.tabMyAssignedParams.keyword,"@TaskDateFrom",this.tabMyAssignedParams.fromDate,"@TaskDateTo",this.tabMyAssignedParams.toDate,"@Status",this.tabMyAssignedParams.status,"@OwnerId",this.tabMyAssignedParams.ownerId,"@AssignedTo",this.userLoginId,"@PageNumber",this.tabMyAssignedParams.pageNumber,"@PageSize",this.tabMyAssignedParams.pageSize,"@Sort","TaskDate","@Direction","DESC"),this.dataService.post("/commands/paged",{CommandText:"uspTask___Search",CommandType:1025,Parameters:e}).subscribe(function(e){t.taskListMyAssigned=e.Data,t.tabMyAssignedParams.totalRow=e.TotalItems,t.loading=!1})}},{key:"getListTaskMyFollowed",value:function(){var t=this;this.loading=!0;var e=[];e.push("@KeyWord",this.tabMyFollowedParams.keyword,"@TaskDateFrom",this.tabMyFollowedParams.fromDate,"@TaskDateTo",this.tabMyFollowedParams.toDate,"@Status",this.tabMyFollowedParams.status,"@OwnerId",this.userLoginId,"@AssignedTo",this.tabMyFollowedParams.assignedTo,"@PageNumber",this.tabMyFollowedParams.pageNumber,"@PageSize",this.tabMyFollowedParams.pageSize,"@Sort","TaskDate","@Direction","DESC"),this.dataService.post("/commands/paged",{CommandText:"uspTask___Followed",CommandType:1025,Parameters:e}).subscribe(function(e){t.taskListMyFollowed=e.Data,t.tabMyFollowedParams.totalRow=e.TotalItems,t.loading=!1})}},{key:"onValueChange",value:function(t,e){t&&("tab-open"==e?(this.tabOpenParams.fromDate=t[0],this.tabOpenParams.toDate=t[1],this.getListTaskOpen()):"tab-unassigned"==e?(this.tabUnAssignedParams.fromDate=t[0],this.tabUnAssignedParams.toDate=t[1],this.getListTaskUnAssigned()):"tab-my-assigned"==e?(this.tabMyAssignedParams.fromDate=t[0],this.tabMyAssignedParams.toDate=t[1],this.getListTaskMyAssigned()):(this.tabMyFollowedParams.fromDate=t[0],this.tabMyFollowedParams.toDate=t[1],this.getListTaskMyFollowed()))}},{key:"onValueChange2",value:function(t,e){t&&("tab-open"==e?(this.tabOpenParams.toDate=t,this.getListTaskOpen()):"tab-unassigned"==e?(this.tabUnAssignedParams.toDate=t,this.getListTaskUnAssigned()):"tab-my-assigned"==e?(this.tabMyAssignedParams.toDate=t,this.getListTaskMyAssigned()):(this.tabMyFollowedParams.toDate=t,this.getListTaskMyFollowed()))}},{key:"loadData",value:function(){"tab-unassigned"==this.tab?this.getListTaskUnAssigned():"tab-my-assigned"==this.tab?this.getListTaskMyAssigned():"tab-my-followed"==this.tab?this.getListTaskMyFollowed():this.getListTaskOpen()}},{key:"pageChanged",value:function(t,e){"tab-unassigned"==e?(this.tabUnAssignedParams.pageNumber=t.page,this.getListTaskUnAssigned()):"tab-my-assigned"==e?(this.tabMyAssignedParams.pageNumber=t.page,this.getListTaskMyAssigned()):"tab-my-followed"==e?(this.tabMyFollowedParams.pageNumber=t.page,this.getListTaskMyFollowed()):(this.tabOpenParams.pageNumber=t.page,this.getListTaskOpen())}},{key:"onChangePageSize",value:function(t){this.loadData()}},{key:"openAddItemComponent",value:function(){var t=this;this.bsModalRef=this.modalService.show(Ft,{class:"modal-lg"}),this.bsModalRef.content.event.subscribe(function(e){t.loadData()})}},{key:"onSelectTask",value:function(t){var e=this;this.bsModalRef=this.modalService.show(Ge,{initialState:{taskId:t},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(function(t){e.loadData()})}},{key:"onSelectTab",value:function(t){switch(this.tab=t.id,t.id){case"tab-unassigned":this.dateRangeTabUnAssigned=[this.tabUnAssignedParams.fromDate,this.tabUnAssignedParams.toDate];break;case"tab-my-assigned":this.dateRangeTabMyAssigned=[this.tabMyAssignedParams.fromDate,this.tabMyAssignedParams.toDate];break;case"tab-my-followed":this.dateRangeTabMyFollowed=[this.tabMyFollowedParams.fromDate,this.tabMyFollowedParams.toDate];break;default:this.dateRangeTabOpen=[this.tabOpenParams.fromDate,this.tabOpenParams.toDate]}}},{key:"onChangeStatus",value:function(t,e){"tab-unassigned"==e?this.getListTaskUnAssigned():"tab-my-assigned"==e?this.getListTaskMyAssigned():this.getListTaskMyFollowed()}},{key:"onChangeOwner",value:function(t,e){"tab-unassigned"==e?this.getListTaskUnAssigned():"tab-open"==e?this.getListTaskOpen():this.getListTaskMyAssigned()}},{key:"onChangeAssigned",value:function(t,e){"tab-open"==e?this.getListTaskOpen():this.getListTaskMyFollowed()}},{key:"onSearchTask",value:function(t){this.loadData()}},{key:"onEditTask",value:function(t,e){var a=this;e.stopPropagation(),this.bsModalRef=this.modalService.show(Ft,{initialState:{id:t},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(function(t){t&&"Submit"==t.data&&a.loadData()})}},{key:"onDeleteTask",value:function(t,e){var a=this;e.stopPropagation(),this.modalRefConfirm=this.modalService.show(g,{initialState:{title:"task_manager_confirm_delete_task"},class:"modal-sm"}),this.modalRefConfirm.content.event.subscribe(function(e){if(e){var n=[];n.push("@TaskId",t),a.dataService.post("/commands",{CommandText:"uspTask___DeleteHierarchy",CommandType:1025,Parameters:n}).subscribe(function(t){a.loadData()})}})}},{key:"gotoAlcTaskItemList",value:function(){this.utilityService.navigate("/main/task/alcTaskItem")}}]),t}()).\u0275fac=function(t){return new(t||va)(b.Vb(m.b),b.Vb(y.a),b.Vb(T.a),b.Vb(ze.a))},va.\u0275cmp=b.Pb({type:va,selectors:[["app-task-list"]],decls:227,vars:200,consts:[[1,"x_title"],[1,"fa","fa-tasks"],[1,"row"],[1,"col-md-10","col-sm-6","col-xs-12"],["class","btn btn-default task-add-new","type","button",3,"click",4,"ngIf"],[1,"col-md-2","col-sm-6","col-xs-12"],["class","btn btn-primary task-add-new","type","button",3,"click",4,"ngIf"],["id","tab-my-assigned",3,"heading","selectTab"],[1,"row","panel-filter"],[1,"col-md-4","col-sm-6","col-xs-12","form-group"],[1,"col-md-2","col-sm-6","col-xs-12","form-group","label-created-date"],["for",""],[1,"col-md-10","col-sm-6","col-xs-12","form-group"],["type","text","bsDaterangepicker","",1,"form-control",3,"placeholder","bsConfig","bsValue","bsValueChange"],[1,"col-md-2","col-sm-6","col-xs-12","form-group"],["name","status",1,"form-control",3,"ngModel","ngModelChange","change"],["value","0"],["value","1"],["value","2"],["value","4"],["name","owner",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","col-sm-6","col-xs-12","form-group","panel-search"],["type","text","name","filter",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-search"],[1,"table-responsive"],[4,"ngIf"],[1,"table","table-bordered"],[1,"col-title"],["class","select-task",3,"click",4,"ngFor","ngForOf"],["class","col-md-12",4,"ngIf"],["id","tab-my_followed",3,"heading","selectTab"],["name","assignedTo",1,"form-control",3,"ngModel","ngModelChange","change"],["type","text","name","filter",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup.enter"],["id","tab-unassigned",3,"heading","selectTab"],["type","text","name","keyword",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-default","task-add-new",3,"click"],["aria-hidden","true",1,"fa","fa-search-plus"],["type","button",1,"btn","btn-primary","task-add-new",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-plus"],[3,"value"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="],[1,"select-task",3,"click"],[2,"text-align","center","vertical-align","middle"],["type","checkbox","disabled","true",1,"form-check-input",3,"checked"],[1,"text-center","action-task"],["data-toggle","tooltip","data-placement","top",3,"title","click",4,"ngIf"],["data-toggle","tooltip","data-placement","top","class","action-delete-task",3,"title","click",4,"ngIf"],["data-toggle","tooltip","data-placement","top",3,"title","click"],["aria-hidden","true",1,"fa","fa-edit"],["data-toggle","tooltip","data-placement","top",1,"action-delete-task",3,"title","click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"col-md-12"],[1,"alert","alert-info"],[1,"col-md-8"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","itemsPerPage","totalItems","ngModel","pageChanged","ngModelChange"],[1,"col-md-4"],[1,"form-group","view-options"],["name","page-size",1,"form-control",3,"ngModel","ngModelChange","change"],["value","10"],["value","20"],["value","50"],["value","100"]],template:function(t,e){1&t&&(b.bc(0,"div",0),b.bc(1,"h3"),b.Wb(2,"i",1),b.Mc(3),b.lc(4,"translate"),b.ac(),b.ac(),b.Wb(5,"br"),b.bc(6,"div"),b.bc(7,"div",2),b.bc(8,"div",3),b.bc(9,"div"),b.Kc(10,Qe,4,3,"button",4),b.ac(),b.ac(),b.bc(11,"div",5),b.Kc(12,Ye,4,3,"button",6),b.ac(),b.ac(),b.bc(13,"tabset"),b.bc(14,"tab",7),b.ic("selectTab",function(t){return e.onSelectTab(t)}),b.lc(15,"translate"),b.bc(16,"div",8),b.bc(17,"div",9),b.bc(18,"div",10),b.bc(19,"p",11),b.Mc(20),b.lc(21,"translate"),b.ac(),b.ac(),b.bc(22,"div",12),b.bc(23,"input",13),b.ic("bsValueChange",function(t){return e.dateRangeTabMyAssigned=t})("bsValueChange",function(t){return e.onValueChange(t,e.tab)}),b.lc(24,"translate"),b.ac(),b.ac(),b.ac(),b.bc(25,"div",14),b.bc(26,"select",15),b.ic("ngModelChange",function(t){return e.tabMyAssignedParams.status=t})("change",function(t){return e.onChangeStatus(t,e.tab)}),b.bc(27,"option",16),b.Mc(28),b.lc(29,"translate"),b.ac(),b.bc(30,"option",17),b.Mc(31),b.lc(32,"translate"),b.ac(),b.bc(33,"option",18),b.Mc(34),b.lc(35,"translate"),b.ac(),b.bc(36,"option",19),b.Mc(37),b.lc(38,"translate"),b.ac(),b.ac(),b.ac(),b.bc(39,"div",14),b.bc(40,"select",20),b.ic("ngModelChange",function(t){return e.tabMyAssignedParams.ownerId=t})("change",function(t){return e.onChangeOwner(t,e.tab)}),b.bc(41,"option",16),b.Mc(42),b.lc(43,"translate"),b.ac(),b.Kc(44,Xe,2,2,"option",21),b.ac(),b.ac(),b.bc(45,"div",22),b.bc(46,"input",23),b.ic("ngModelChange",function(t){return e.tabMyAssignedParams.keyword=t})("keyup.enter",function(){return e.onSearchTask(e.tab)}),b.lc(47,"translate"),b.ac(),b.bc(48,"button",24),b.ic("click",function(){return e.onSearchTask(e.tab)}),b.Wb(49,"span",25),b.ac(),b.ac(),b.ac(),b.bc(50,"div",26),b.Kc(51,Ze,5,0,"div",27),b.bc(52,"table",28),b.bc(53,"thead"),b.bc(54,"tr"),b.bc(55,"th"),b.Mc(56),b.lc(57,"translate"),b.ac(),b.bc(58,"th",29),b.Mc(59),b.lc(60,"translate"),b.ac(),b.bc(61,"th"),b.Mc(62),b.lc(63,"translate"),b.ac(),b.bc(64,"th"),b.Mc(65),b.lc(66,"translate"),b.ac(),b.bc(67,"th"),b.Mc(68),b.lc(69,"translate"),b.ac(),b.bc(70,"th"),b.Mc(71),b.lc(72,"translate"),b.ac(),b.bc(73,"th"),b.Mc(74),b.lc(75,"translate"),b.ac(),b.bc(76,"th"),b.Mc(77),b.lc(78,"translate"),b.ac(),b.ac(),b.ac(),b.bc(79,"tbody"),b.Kc(80,aa,23,20,"tr",30),b.ac(),b.ac(),b.Kc(81,na,7,6,"div",31),b.Kc(82,ia,17,8,"div",31),b.ac(),b.ac(),b.bc(83,"tab",32),b.ic("selectTab",function(t){return e.onSelectTab(t)}),b.lc(84,"translate"),b.bc(85,"div",8),b.bc(86,"div",9),b.bc(87,"div",10),b.bc(88,"p",11),b.Mc(89),b.lc(90,"translate"),b.ac(),b.ac(),b.bc(91,"div",12),b.bc(92,"input",13),b.ic("bsValueChange",function(t){return e.dateRangeTabMyFollowed=t})("bsValueChange",function(t){return e.onValueChange(t,e.tab)}),b.lc(93,"translate"),b.ac(),b.ac(),b.ac(),b.bc(94,"div",14),b.bc(95,"select",15),b.ic("ngModelChange",function(t){return e.tabMyFollowedParams.status=t})("change",function(t){return e.onChangeStatus(t,e.tab)}),b.bc(96,"option",16),b.Mc(97),b.lc(98,"translate"),b.ac(),b.bc(99,"option",17),b.Mc(100),b.lc(101,"translate"),b.ac(),b.bc(102,"option",18),b.Mc(103),b.lc(104,"translate"),b.ac(),b.bc(105,"option",19),b.Mc(106),b.lc(107,"translate"),b.ac(),b.ac(),b.ac(),b.bc(108,"div",14),b.bc(109,"select",33),b.ic("ngModelChange",function(t){return e.tabMyFollowedParams.assignedTo=t})("change",function(t){return e.onChangeAssigned(t,e.tab)}),b.bc(110,"option",16),b.Mc(111),b.lc(112,"translate"),b.ac(),b.Kc(113,ca,2,2,"option",21),b.ac(),b.ac(),b.bc(114,"div",22),b.bc(115,"input",34),b.ic("ngModelChange",function(t){return e.tabMyFollowedParams.keyword=t})("keyup.enter",function(){return e.onSearchTask(e.tab)}),b.lc(116,"translate"),b.ac(),b.bc(117,"button",24),b.ic("click",function(){return e.onSearchTask(e.tab)}),b.Wb(118,"span",25),b.ac(),b.ac(),b.ac(),b.bc(119,"div",26),b.Kc(120,sa,5,0,"div",27),b.bc(121,"table",28),b.bc(122,"thead"),b.bc(123,"tr"),b.bc(124,"th"),b.Mc(125),b.lc(126,"translate"),b.ac(),b.bc(127,"th",29),b.Mc(128),b.lc(129,"translate"),b.ac(),b.bc(130,"th"),b.Mc(131),b.lc(132,"translate"),b.ac(),b.bc(133,"th"),b.Mc(134),b.lc(135,"translate"),b.ac(),b.bc(136,"th"),b.Mc(137),b.lc(138,"translate"),b.ac(),b.bc(139,"th"),b.Mc(140),b.lc(141,"translate"),b.ac(),b.bc(142,"th"),b.Mc(143),b.lc(144,"translate"),b.ac(),b.bc(145,"th"),b.Mc(146),b.lc(147,"translate"),b.ac(),b.bc(148,"th"),b.Mc(149),b.lc(150,"translate"),b.ac(),b.bc(151,"th"),b.Mc(152),b.lc(153,"translate"),b.ac(),b.ac(),b.ac(),b.bc(154,"tbody"),b.Kc(155,la,27,22,"tr",30),b.ac(),b.ac(),b.Kc(156,da,7,6,"div",31),b.Kc(157,ua,17,8,"div",31),b.ac(),b.ac(),b.bc(158,"tab",35),b.ic("selectTab",function(t){return e.onSelectTab(t)}),b.lc(159,"translate"),b.bc(160,"div",8),b.bc(161,"div",9),b.bc(162,"div",10),b.bc(163,"p",11),b.Mc(164),b.lc(165,"translate"),b.ac(),b.ac(),b.bc(166,"div",12),b.bc(167,"input",13),b.ic("bsValueChange",function(t){return e.dateRangeTabUnAssigned=t})("bsValueChange",function(t){return e.onValueChange(t,e.tab)}),b.lc(168,"translate"),b.ac(),b.ac(),b.ac(),b.bc(169,"div",14),b.bc(170,"select",15),b.ic("ngModelChange",function(t){return e.tabUnAssignedParams.status=t})("change",function(t){return e.onChangeStatus(t,e.tab)}),b.bc(171,"option",16),b.Mc(172),b.lc(173,"translate"),b.ac(),b.bc(174,"option",17),b.Mc(175),b.lc(176,"translate"),b.ac(),b.bc(177,"option",18),b.Mc(178),b.lc(179,"translate"),b.ac(),b.bc(180,"option",19),b.Mc(181),b.lc(182,"translate"),b.ac(),b.ac(),b.ac(),b.bc(183,"div",14),b.bc(184,"select",20),b.ic("ngModelChange",function(t){return e.tabUnAssignedParams.ownerId=t})("change",function(t){return e.onChangeOwner(t,e.tab)}),b.bc(185,"option",16),b.Mc(186),b.lc(187,"translate"),b.ac(),b.Kc(188,ba,2,2,"option",21),b.ac(),b.ac(),b.bc(189,"div",22),b.bc(190,"input",36),b.ic("ngModelChange",function(t){return e.tabUnAssignedParams.keyword=t})("keyup.enter",function(){return e.onSearchTask(e.tab)}),b.lc(191,"translate"),b.ac(),b.bc(192,"button",24),b.ic("click",function(){return e.onSearchTask(e.tab)}),b.Wb(193,"span",25),b.ac(),b.ac(),b.ac(),b.bc(194,"div",26),b.Kc(195,ma,5,0,"div",27),b.bc(196,"table",28),b.bc(197,"thead"),b.bc(198,"tr"),b.bc(199,"th"),b.Mc(200),b.lc(201,"translate"),b.ac(),b.bc(202,"th",29),b.Mc(203),b.lc(204,"translate"),b.ac(),b.bc(205,"th"),b.Mc(206),b.lc(207,"translate"),b.ac(),b.bc(208,"th"),b.Mc(209),b.lc(210,"translate"),b.ac(),b.bc(211,"th"),b.Mc(212),b.lc(213,"translate"),b.ac(),b.bc(214,"th"),b.Mc(215),b.lc(216,"translate"),b.ac(),b.bc(217,"th"),b.Mc(218),b.lc(219,"translate"),b.ac(),b.bc(220,"th"),b.Mc(221),b.lc(222,"translate"),b.ac(),b.ac(),b.ac(),b.bc(223,"tbody"),b.Kc(224,pa,22,18,"tr",30),b.ac(),b.ac(),b.Kc(225,fa,7,6,"div",31),b.Kc(226,ka,17,8,"div",31),b.ac(),b.ac(),b.ac(),b.ac()),2&t&&(b.Jb(3),b.Oc(" ",b.mc(4,86,"task_manager_list_title"),""),b.Jb(7),b.qc("ngIf",e.authService.hasPermission("/main/task","Add")),b.Jb(2),b.qc("ngIf",e.authService.hasPermission("/main/task","Add")),b.Jb(2),b.rc("heading",b.mc(15,88,"task_manager_tab_my_task_assigned_title")),b.Jb(6),b.Nc(b.mc(21,90,"task_manager_task_date")),b.Jb(3),b.rc("placeholder",b.mc(24,92,"task_manager_task_date")),b.qc("bsConfig",b.uc(194,_a,e.dateRangeConfig))("bsValue",e.dateRangeTabMyAssigned),b.Jb(3),b.qc("ngModel",e.tabMyAssignedParams.status),b.Jb(2),b.Nc(b.mc(29,94,"task_manager_task_status")),b.Jb(3),b.Nc(b.mc(32,96,"task_manager_status_created")),b.Jb(3),b.Nc(b.mc(35,98,"task_manager_status_process")),b.Jb(3),b.Nc(b.mc(38,100,"task_manager_status_finish")),b.Jb(3),b.qc("ngModel",e.tabMyAssignedParams.ownerId),b.Jb(2),b.Nc(b.mc(43,102,"task_manager_task_owner")),b.Jb(2),b.qc("ngForOf",e.userList),b.Jb(2),b.rc("placeholder",b.mc(47,104,"filter_title")),b.qc("ngModel",e.tabMyAssignedParams.keyword),b.Jb(5),b.qc("ngIf",e.loading),b.Jb(5),b.Nc(b.mc(57,106,"task_manager_task_number")),b.Jb(3),b.Nc(b.mc(60,108,"task_manager_task_title")),b.Jb(3),b.Nc(b.mc(63,110,"task_manager_task_date")),b.Jb(3),b.Nc(b.mc(66,112,"task_manager_task_due_date")),b.Jb(3),b.Nc(b.mc(69,114,"task_manager_task_actual_date")),b.Jb(3),b.Nc(b.mc(72,116,"task_manager_task_status")),b.Jb(3),b.Nc(b.mc(75,118,"task_manager_task_finished")),b.Jb(3),b.Nc(b.mc(78,120,"title_action")),b.Jb(3),b.qc("ngForOf",e.taskListMyAssigned),b.Jb(1),b.qc("ngIf",e.taskListMyAssigned&&0==e.taskListMyAssigned.length),b.Jb(1),b.qc("ngIf",e.taskListMyAssigned&&e.taskListMyAssigned.length>0),b.Jb(1),b.rc("heading",b.mc(84,122,"task_manager_tab_task_follow_title")),b.Jb(6),b.Nc(b.mc(90,124,"task_manager_task_date")),b.Jb(3),b.rc("placeholder",b.mc(93,126,"task_manager_task_date")),b.qc("bsConfig",b.uc(196,_a,e.dateRangeConfig))("bsValue",e.dateRangeTabMyFollowed),b.Jb(3),b.qc("ngModel",e.tabMyFollowedParams.status),b.Jb(2),b.Nc(b.mc(98,128,"task_manager_task_status")),b.Jb(3),b.Nc(b.mc(101,130,"task_manager_status_created")),b.Jb(3),b.Nc(b.mc(104,132,"task_manager_status_process")),b.Jb(3),b.Nc(b.mc(107,134,"task_manager_status_finish")),b.Jb(3),b.qc("ngModel",e.tabMyFollowedParams.assignedTo),b.Jb(2),b.Nc(b.mc(112,136,"task_manager_task_assigned")),b.Jb(2),b.qc("ngForOf",e.userList),b.Jb(2),b.rc("placeholder",b.mc(116,138,"filter_title")),b.qc("ngModel",e.tabMyFollowedParams.keyword),b.Jb(5),b.qc("ngIf",e.loading),b.Jb(5),b.Nc(b.mc(126,140,"task_manager_task_number")),b.Jb(3),b.Nc(b.mc(129,142,"task_manager_task_title")),b.Jb(3),b.Nc(b.mc(132,144,"task_manager_task_date")),b.Jb(3),b.Nc(b.mc(135,146,"task_manager_task_owner")),b.Jb(3),b.Nc(b.mc(138,148,"task_manager_task_assigned")),b.Jb(3),b.Nc(b.mc(141,150,"task_manager_task_due_date")),b.Jb(3),b.Nc(b.mc(144,152,"task_manager_task_actual_date")),b.Jb(3),b.Nc(b.mc(147,154,"task_manager_task_status")),b.Jb(3),b.Nc(b.mc(150,156,"task_manager_task_finished")),b.Jb(3),b.Nc(b.mc(153,158,"title_action")),b.Jb(3),b.qc("ngForOf",e.taskListMyFollowed),b.Jb(1),b.qc("ngIf",e.taskListMyFollowed&&0==e.taskListMyFollowed.length),b.Jb(1),b.qc("ngIf",e.taskListMyFollowed&&e.taskListMyFollowed.length>0),b.Jb(1),b.rc("heading",b.mc(159,160,"task_manager_tab_task_unassigned_title")),b.Jb(6),b.Nc(b.mc(165,162,"task_manager_task_date")),b.Jb(3),b.rc("placeholder",b.mc(168,164,"task_manager_task_date")),b.qc("bsConfig",b.uc(198,_a,e.dateRangeConfig))("bsValue",e.dateRangeTabUnAssigned),b.Jb(3),b.qc("ngModel",e.tabUnAssignedParams.status),b.Jb(2),b.Nc(b.mc(173,166,"task_manager_task_status")),b.Jb(3),b.Nc(b.mc(176,168,"task_manager_status_created")),b.Jb(3),b.Nc(b.mc(179,170,"task_manager_status_process")),b.Jb(3),b.Nc(b.mc(182,172,"task_manager_status_finish")),b.Jb(3),b.qc("ngModel",e.tabUnAssignedParams.ownerId),b.Jb(2),b.Nc(b.mc(187,174,"task_manager_task_owner")),b.Jb(2),b.qc("ngForOf",e.userList),b.Jb(2),b.rc("placeholder",b.mc(191,176,"filter_title")),b.qc("ngModel",e.tabUnAssignedParams.keyword),b.Jb(5),b.qc("ngIf",e.loading),b.Jb(5),b.Nc(b.mc(201,178,"task_manager_task_number")),b.Jb(3),b.Nc(b.mc(204,180,"task_manager_task_title")),b.Jb(3),b.Nc(b.mc(207,182,"task_manager_task_date")),b.Jb(3),b.Nc(b.mc(210,184,"task_manager_task_owner")),b.Jb(3),b.Nc(b.mc(213,186,"task_manager_task_assigned")),b.Jb(3),b.Nc(b.mc(216,188,"task_manager_task_due_date")),b.Jb(3),b.Nc(b.mc(219,190,"task_manager_task_actual_date")),b.Jb(3),b.Nc(b.mc(222,192,"title_action")),b.Jb(3),b.qc("ngForOf",e.taskListUnassigned),b.Jb(1),b.qc("ngIf",e.taskListUnassigned&&0==e.taskListUnassigned.length),b.Jb(1),b.qc("ngIf",e.taskListUnassigned&&e.taskListUnassigned.length>0))},directives:[l.m,D.c,D.a,C.e,C.d,f.t,f.k,f.n,f.o,f.v,l.l,f.b,He.a],pipes:[h.c,l.e,G],styles:[".panel-filter[_ngcontent-%COMP%]{margin:20px 0}.panel-search[_ngcontent-%COMP%]{display:inline-flex}.panel-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0}.task-add-new[_ngcontent-%COMP%]{float:right}@media (max-width:1200px){.task-add-new[_ngcontent-%COMP%]{float:none}}.view-options[_ngcontent-%COMP%]{text-align:right;margin-top:20px}.view-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:auto;display:inline-block}.select-task[_ngcontent-%COMP%]{cursor:pointer}.select-task[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}.col-title[_ngcontent-%COMP%]{width:35%}.label-created-date[_ngcontent-%COMP%]{padding-top:5px;text-align:right}.action-delete-task[_ngcontent-%COMP%]{margin-right:5px}.action-task[_ngcontent-%COMP%]{font-size:15px}"]}),va),Ma=["modalAddEdit"];function Ta(t,e){if(1&t){var a=b.cc();b.bc(0,"button",31),b.ic("click",function(){return b.Ec(a),b.kc().showCreateTaskModel()}),b.Wb(1,"span",45),b.Mc(2),b.lc(3,"translate"),b.ac()}2&t&&(b.Jb(2),b.Oc(" ",b.mc(3,1,"add_new"),""))}function Ca(t,e){1&t&&(b.bc(0,"div"),b.Wb(1,"img",46),b.Mc(2," \xa0"),b.bc(3,"span"),b.Mc(4,"\u0110ang t\u1ea3i d\u1eef li\u1ec7u"),b.ac(),b.ac())}function Ia(t,e){if(1&t&&(b.bc(0,"th"),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.Jb(1),b.Nc(a.Caption)}}function Da(t,e){if(1&t&&(b.bc(0,"span"),b.Mc(1),b.ac()),2&t){var a=b.kc().$implicit,n=b.kc().$implicit;b.Jb(1),b.Nc(n[a.Name])}}function Aa(t,e){if(1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"date"),b.ac()),2&t){var a=b.kc().$implicit,n=b.kc().$implicit;b.Jb(1),b.Nc(b.nc(2,1,n[a.Name],"dd/MM/yyyy"))}}function Ja(t,e){if(1&t&&(b.bc(0,"td"),b.Kc(1,Da,2,1,"span",38),b.Kc(2,Aa,3,4,"span",38),b.ac()),2&t){var a=e.$implicit;b.Jb(1),b.qc("ngIf","TaskItemDate"!=a.Name&&"JobFileDate"!=a.Name&&"JobItemDate"!=a.Name),b.Jb(1),b.qc("ngIf","TaskItemDate"==a.Name||"JobFileDate"==a.Name||"JobItemDate"==a.Name)}}function wa(t,e){if(1&t){var a=b.cc();b.bc(0,"tr"),b.bc(1,"td",17),b.bc(2,"input",47),b.ic("change",function(t){b.Ec(a);var n=e.$implicit;return b.kc().onCheckedChange(t.target.checked,n)})("ngModelChange",function(t){return e.$implicit.checked=t}),b.ac(),b.ac(),b.Kc(3,Ja,3,2,"td",43),b.ac()}if(2&t){var n=e.$implicit,i=b.kc();b.Jb(2),b.qc("ngModel",n.checked),b.Jb(1),b.qc("ngForOf",i.displayColumns)}}function Sa(t,e){1&t&&(b.bc(0,"div",48),b.bc(1,"div",49),b.bc(2,"strong"),b.Mc(3),b.lc(4,"translate"),b.ac(),b.Mc(5),b.lc(6,"translate"),b.ac(),b.ac()),2&t&&(b.Jb(3),b.Oc("",b.mc(4,2,"dialog_alert_title"),"!"),b.Jb(2),b.Oc(" ",b.mc(6,4,"task_manager_task_notice_list_empty")," "))}function Na(t,e){if(1&t){var a=b.cc();b.bc(0,"div",48),b.bc(1,"div",50),b.bc(2,"pagination",51),b.ic("pageChanged",function(t){return b.Ec(a),b.kc().pageChanged(t)})("ngModelChange",function(t){return b.Ec(a),b.kc().pageNumber=t}),b.ac(),b.ac(),b.bc(3,"div",52),b.bc(4,"div",53),b.bc(5,"label",54),b.Mc(6),b.lc(7,"translate"),b.ac(),b.bc(8,"select",55),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc().pageSize=t})("change",function(){return b.Ec(a),b.kc().onChangePageSize()}),b.bc(9,"option",56),b.Mc(10,"10"),b.ac(),b.bc(11,"option",57),b.Mc(12,"20"),b.ac(),b.bc(13,"option",58),b.Mc(14,"50"),b.ac(),b.bc(15,"option",59),b.Mc(16,"100"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac()}if(2&t){var n=b.kc();b.Jb(2),b.qc("boundaryLinks",!0)("itemsPerPage",n.pageSize)("totalItems",n.totalRow)("ngModel",n.pageNumber),b.Jb(4),b.Oc("",b.mc(7,6,"show_row")," \xa0"),b.Jb(2),b.qc("ngModel",n.pageSize)}}var Oa,Pa=function(t){return{rangeInputFormat:"DD/MM/YYYY",ranges:t}},xa=((Oa=function(){function e(t,a,n,i,c){s(this,e),this.authService=t,this.dataService=a,this.notificationService=n,this.modalService=i,this.utilityService=c,this.fromDate=new Date,this.toDate=new Date,this.serviceType="",this.contactCode="",this.VAN_DON="",this.SOTK="",this.transportMode=1,this.portOfLoading="",this.portOfDischarge="",this.pageNumber=1,this.pageSize=20,this.pageDisplay=10,this.filter="",this.Customer={},this.loading=!1,this.checkedAll=!1,this.dateRangeConfig=[{value:[new Date,new Date],label:"H\xf4m nay"},{value:[new Date((new Date).setDate((new Date).getDate()-7)),new Date],label:"7 ng\xe0y tr\u01b0\u1edbc"},{value:[new Date((new Date).setDate((new Date).getDate()-30)),new Date],label:"30 ng\xe0y tr\u01b0\u1edbc"},{value:[new Date((new Date).setDate(1)),new Date],label:"T\u1eeb \u0111\u1ea7u th\xe1ng"},{value:[new Date((new Date).getFullYear(),0,1),new Date],label:"T\u1eeb \u0111\u1ea7u n\u0103m"}],this.ColumnSettings=[{Name:"JobItemDate",Caption:"Ng\xe0y ph\xe1t sinh",Width:120,CustomSettings:""},{Name:"CustomsCode",Caption:"Kh\xe1ch H\xe0ng",Width:120,CustomSettings:""},{Name:"JobFileId",Caption:"S\u1ed1 l\xf4 h\xe0ng",Width:120,CustomSettings:"TaskAdmins"},{Name:"SOTK",Caption:"S\u1ed1 t\u1edd khai",Width:120,CustomSettings:""},{Name:"VAN_DON",Caption:"V\u1eadn \u0111\u01a1n",Width:120,CustomSettings:""},{Name:"VAN_DON_MAWB",Caption:"V\u1eadn \u0111\u01a1n MAWB",Width:120,CustomSettings:""},{Name:"GroupCode",Caption:"Group Code",Width:120,CustomSettings:""},{Name:"SO_KIEN",Caption:"S\u1ed1 l\u01b0\u1ee3ng ki\u1ec7n",Width:100,CustomSettings:""},{Name:"TR_LUONG",Caption:"Tr\u1ecdng l\u01b0\u1ee3ng",Width:100,CustomSettings:""},{Name:"TEN_DD_LUU_KHO",Caption:"\u0110\u1ecba \u0111i\u1ec3m l\u01b0u kho ",Width:100,CustomSettings:""},{Name:"Description",Caption:"Di\u1ec5n gi\u1ea3i",Width:120,CustomSettings:""}]}return r(e,[{key:"ngOnInit",value:function(){this.dateRange=[this.fromDate,this.toDate],this.loadData();var t=this.authService.getLoggedInUser(),e=t.roles.length>0?t.roles[0]:"";this.displayColumns=this.ColumnSettings.filter(function(t){return""===t.CustomSettings||t.CustomSettings.includes(e)})}},{key:"loadData",value:function(){var t=this;this.loading=!0;var e=[];e.push("@FromDate",this.fromDate,"@ToDate",this.toDate,"@StateId",0,"@XorN",this.serviceType,"@TransportType",this.transportMode,"@ContactCode",this.contactCode,"@PortOfLoading",this.portOfLoading,"@PortOfDischarge",this.portOfDischarge,"@SOTK",this.SOTK,"@VAN_DON",this.VAN_DON,"@VAN_DON_MAWB","","@PageNumber",this.pageNumber,"@PageSize",this.pageSize,"@Sort","JobItemDate","@Direction","DESC","@Description",this.keyword),this.dataService.post("/commands/paged",{CommandText:"uspTaskItem___SearchAvaiableOnJobItem",CommandType:1025,Parameters:e}).subscribe(function(e){t.taskItems=e.Data,t.totalRow=e.TotalItems,t.checkedAll=!1,t.ConverCustomer(),t.loading=!1})}},{key:"onChangeTransportMode",value:function(){this.loadData()}},{key:"onValueChangeDateRange",value:function(t){null!=t&&(this.fromDate=t[0],this.fromDate.setTime(this.fromDate.getTime()-6e4*this.fromDate.getTimezoneOffset()),this.toDate=t[1],this.toDate.setTime(this.toDate.getTime()-6e4*this.toDate.getTimezoneOffset()),this.loadData())}},{key:"changeServiceType",value:function(t){this.serviceType="All"==t?"":t,this.loadData()}},{key:"onCheckedChange",value:function(t,e){this.taskItems.find(function(t){return t.JobItemId==e.JobItemId}).checked=!!t}},{key:"selectAll",value:function(t){this.taskItems.forEach(0==t?function(t){t.checked=!1}:function(t){t.checked=!0})}},{key:"loadTaskItem",value:function(t){var e=this;this.dataService.get("/appTaskItem/detail/"+t).subscribe(function(t){e.entity=t})}},{key:"pageChanged",value:function(t){this.pageNumber=t.page,this.loadData()}},{key:"onChangePageSize",value:function(){this.loadData()}},{key:"loadLocation",value:function(){var t=this;this.dataService.post("/commands",{CommandText:"GetLocaitonByLocationType",CommandType:1025}).subscribe(function(e){t.locations=e.Data})}},{key:"showCreateTaskModel",value:function(){var t=this,e=this.taskItems.filter(function(t){return t.checked});this.bsModalRef=this.modalService.show(Ft,{initialState:{extenalTaskItems:e},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(function(e){e&&"Submit"==e.data&&t.loadData()})}},{key:"showAddModal",value:function(){this.entity={},this.modalAddEdit.show()}},{key:"showEditModal",value:function(t){this.loadTaskItem(t),this.modalAddEdit.show()}},{key:"deleteItem",value:function(t){var e=this;this.notificationService.printConfirmationDialog(p.a.CONFIRM_DELETE_MSG,function(){return e.deleteItemConfirm(t)})}},{key:"deleteItemConfirm",value:function(t){}},{key:"ConverCustomer",value:function(){var e=this;if(this.taskItems){var a,n=t(this.taskItems);try{var i=function(){var t=a.value;e.dataService.get("/Contacts/"+t.CustomerId).subscribe(function(a){a&&(e.Customer=a,t.CustomsCode=e.Customer.Code,t.CustomerName=e.Customer.Name)})};for(n.s();!(a=n.n()).done;)i()}catch(c){n.e(c)}finally{n.f()}}}},{key:"goBack",value:function(){this.utilityService.navigate("/main/task")}}]),e}()).\u0275fac=function(t){return new(t||Oa)(b.Vb(y.a),b.Vb(T.a),b.Vb(_.a),b.Vb(m.b),b.Vb(ze.a))},Oa.\u0275cmp=b.Pb({type:Oa,selectors:[["app-alc-task-item-list"]],viewQuery:function(t,e){var a;1&t&&b.Qc(Ma,1),2&t&&b.zc(a=b.jc())&&(e.modalAddEdit=a.first)},decls:93,vars:65,consts:[[1,"x_title"],[1,"fa","fa-tasks"],[1,"panel-filter"],[1,"row"],[1,"col-md-1","col-sm-6","col-xs-12","form-group","label-created-date"],[1,"text-left"],[1,"col-md-3","col-sm-6","col-xs-12","form-group"],["type","text","bsDaterangepicker","",1,"form-control",3,"placeholder","bsConfig","bsValue","bsValueChange"],[1,"col-md-2","col-sm-6","col-xs-12","form-group"],["name","transport_mode",1,"form-control",3,"ngModel","ngModelChange","change"],["value","0"],["value","1"],["value","2"],["value","3"],["value","9"],[1,"col-md-6","col-sm-6","col-xs-12","form-group","filter-service-type"],[1,"col-md-2","col-sm-6","col-xs-12",2,"text-align","right","vertical-align","middle"],[2,"text-align","center"],[1,"col-md-8","col-sm-6","col-xs-12",2,"text-align","left"],["for","import_export"],["id","import_export","type","radio","value","All","name","serviceType",3,"change"],["for","import"],["id","import","type","radio","value","N","name","serviceType",3,"checked","change"],["for","export"],["id","export","type","radio","value","X","name","serviceType",3,"change"],[1,"col-md-1","col-sm-6","col-xs-12","form-group"],["type","text","name","contactCode",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["type","text","name","VAN_DON",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["type","text","name","SOTK",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],[1,"col-md-4","col-sm-6","col-xs-12","form-group","panel-search"],["type","text","name","keyword",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-search"],[1,"col-md-6","col-sm-6","col-xs-6"],["type","button",1,"btn","btn-default",3,"click"],["aria-hidden","true",1,"fa","fa-backward"],[1,"btn-add-new"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],[4,"ngIf"],[1,"table-responsive"],[1,"table","table-bordered"],[2,"text-align","center","width","50px"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],["class","col-md-12",4,"ngIf"],["aria-hidden","true",1,"glyphicon","glyphicon-plus"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="],["type","checkbox",1,"form-check-input",3,"ngModel","change","ngModelChange"],[1,"col-md-12"],[1,"alert","alert-info"],[1,"col-md-8"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","itemsPerPage","totalItems","ngModel","pageChanged","ngModelChange"],[1,"col-md-4"],[1,"form-group","view-options"],["for",""],["name","page-size",1,"form-control",3,"ngModel","ngModelChange","change"],["value","10"],["value","20"],["value","50"],["value","100"]],template:function(t,e){1&t&&(b.bc(0,"div",0),b.bc(1,"h3"),b.Wb(2,"i",1),b.Mc(3),b.lc(4,"translate"),b.ac(),b.ac(),b.Wb(5,"br"),b.bc(6,"div",2),b.bc(7,"div",3),b.bc(8,"div",4),b.bc(9,"span",5),b.Mc(10),b.lc(11,"translate"),b.ac(),b.ac(),b.bc(12,"div",6),b.bc(13,"input",7),b.ic("bsValueChange",function(t){return e.dateRange=t})("bsValueChange",function(t){return e.onValueChangeDateRange(t)}),b.lc(14,"translate"),b.ac(),b.ac(),b.bc(15,"div",8),b.bc(16,"select",9),b.ic("ngModelChange",function(t){return e.transportMode=t})("change",function(){return e.onChangeTransportMode()}),b.bc(17,"option",10),b.Mc(18),b.lc(19,"translate"),b.ac(),b.bc(20,"option",11),b.Mc(21),b.lc(22,"translate"),b.ac(),b.bc(23,"option",12),b.Mc(24),b.lc(25,"translate"),b.ac(),b.bc(26,"option",13),b.Mc(27),b.lc(28,"translate"),b.ac(),b.bc(29,"option",14),b.Mc(30),b.lc(31,"translate"),b.ac(),b.ac(),b.ac(),b.bc(32,"div",15),b.bc(33,"div",16),b.bc(34,"span",17),b.Mc(35,"Lo\u1ea1i h\xecnh"),b.ac(),b.ac(),b.bc(36,"div",18),b.bc(37,"div"),b.bc(38,"label",19),b.bc(39,"input",20),b.ic("change",function(){return e.changeServiceType("All")}),b.ac(),b.Mc(40),b.lc(41,"translate"),b.ac(),b.ac(),b.bc(42,"div"),b.bc(43,"label",21),b.bc(44,"input",22),b.ic("change",function(){return e.changeServiceType("N")}),b.ac(),b.Mc(45),b.lc(46,"translate"),b.ac(),b.ac(),b.bc(47,"div"),b.bc(48,"label",23),b.bc(49,"input",24),b.ic("change",function(){return e.changeServiceType("X")}),b.ac(),b.Mc(50),b.lc(51,"translate"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(52,"div",3),b.bc(53,"div",25),b.bc(54,"span"),b.Mc(55,"L\u1ecdc theo"),b.ac(),b.ac(),b.bc(56,"div",6),b.bc(57,"input",26),b.ic("ngModelChange",function(t){return e.contactCode=t})("keyup.enter",function(){return e.loadData()}),b.lc(58,"translate"),b.ac(),b.ac(),b.bc(59,"div",8),b.bc(60,"input",27),b.ic("ngModelChange",function(t){return e.VAN_DON=t})("keyup.enter",function(){return e.loadData()}),b.lc(61,"translate"),b.ac(),b.ac(),b.bc(62,"div",8),b.bc(63,"input",28),b.ic("ngModelChange",function(t){return e.SOTK=t})("keyup.enter",function(){return e.loadData()}),b.lc(64,"translate"),b.ac(),b.ac(),b.bc(65,"div",29),b.bc(66,"input",30),b.ic("ngModelChange",function(t){return e.keyword=t})("keyup.enter",function(){return e.loadData()}),b.lc(67,"translate"),b.ac(),b.bc(68,"button",31),b.ic("click",function(){return e.loadData()}),b.Wb(69,"span",32),b.ac(),b.ac(),b.ac(),b.ac(),b.Wb(70,"hr"),b.bc(71,"div",3),b.bc(72,"div",33),b.bc(73,"div"),b.bc(74,"button",34),b.ic("click",function(){return e.goBack()}),b.Wb(75,"i",35),b.Mc(76),b.lc(77,"translate"),b.ac(),b.ac(),b.ac(),b.bc(78,"div",33),b.bc(79,"div",36),b.Kc(80,Ta,4,3,"button",37),b.ac(),b.ac(),b.ac(),b.Kc(81,Ca,5,0,"div",38),b.bc(82,"div",39),b.bc(83,"table",40),b.bc(84,"thead"),b.bc(85,"tr"),b.bc(86,"th",41),b.bc(87,"input",42),b.ic("ngModelChange",function(t){return e.checkedAll=t})("change",function(t){return e.selectAll(!!t.target.checked)}),b.ac(),b.ac(),b.Kc(88,Ia,2,1,"th",43),b.ac(),b.ac(),b.bc(89,"tbody"),b.Kc(90,wa,4,2,"tr",43),b.ac(),b.ac(),b.Kc(91,Sa,7,6,"div",44),b.Kc(92,Na,17,8,"div",44),b.ac()),2&t&&(b.Jb(3),b.Oc(" ",b.mc(4,31,"task_manager_task_category_item"),""),b.Jb(7),b.Nc(b.mc(11,33,"date_range")),b.Jb(3),b.rc("placeholder",b.mc(14,35,"task_manager_task_date")),b.qc("bsConfig",b.uc(63,Pa,e.dateRangeConfig))("bsValue",e.dateRange),b.Jb(3),b.qc("ngModel",e.transportMode),b.Jb(2),b.Nc(b.mc(19,37,"task_manager_task_category_transport_mode")),b.Jb(3),b.Nc(b.mc(22,39,"task_manager_task_category_air")),b.Jb(3),b.Nc(b.mc(25,41,"task_manager_task_category_sea_fcl")),b.Jb(3),b.Nc(b.mc(28,43,"task_manager_task_category_sea_lcl")),b.Jb(3),b.Nc(b.mc(31,45,"task_manager_task_category_other")),b.Jb(10),b.Oc(" ",b.mc(41,47,"common_all"),""),b.Jb(4),b.qc("checked",!0),b.Jb(1),b.Oc(" ",b.mc(46,49,"logistics_import"),""),b.Jb(5),b.Oc(" ",b.mc(51,51,"logistics_export"),""),b.Jb(7),b.rc("placeholder",b.mc(58,53,"task_manager_task_item_customer")),b.qc("ngModel",e.contactCode),b.Jb(3),b.rc("placeholder",b.mc(61,55,"task_manager_task_item_van_don")),b.qc("ngModel",e.VAN_DON),b.Jb(3),b.rc("placeholder",b.mc(64,57,"task_manager_task_item_so_to_khai")),b.qc("ngModel",e.SOTK),b.Jb(3),b.rc("placeholder",b.mc(67,59,"filter_title_of_description")),b.qc("ngModel",e.keyword),b.Jb(10),b.Oc(" ",b.mc(77,61,"button_back"),""),b.Jb(4),b.qc("ngIf",e.authService.hasPermission("/main/task/alcTaskItem","Add")),b.Jb(1),b.qc("ngIf",e.loading),b.Jb(6),b.qc("ngModel",e.checkedAll),b.Jb(1),b.qc("ngForOf",e.displayColumns),b.Jb(2),b.qc("ngForOf",e.taskItems),b.Jb(1),b.qc("ngIf",e.taskItems&&0==e.taskItems.length),b.Jb(1),b.qc("ngIf",e.taskItems&&e.taskItems.length>0))},directives:[C.e,C.d,f.t,f.k,f.n,f.o,f.v,f.b,l.m,f.a,l.l,He.a],pipes:[h.c,l.e],styles:[".panel-search[_ngcontent-%COMP%]{display:inline-flex}.panel-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;margin-right:0}.filter-service-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;padding-right:10px}.btn-add-new[_ngcontent-%COMP%], .view-options[_ngcontent-%COMP%]{text-align:right}.view-options[_ngcontent-%COMP%]{margin-top:20px}.view-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:auto;display:inline-block}.label-created-date[_ngcontent-%COMP%]{padding-top:5px}"]}),Oa);function Ea(t,e){1&t&&(b.bc(0,"h4",24),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"task_manager_create_new_task")))}function Fa(t,e){1&t&&(b.bc(0,"h4",24),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"task_manager_update_task")))}function qa(t,e){1&t&&(b.bc(0,"small",25),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function La(t,e){1&t&&(b.bc(0,"small",25),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function Ka(t,e){1&t&&(b.bc(0,"small",25),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function Va(t,e){1&t&&(b.bc(0,"small",25),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function Ra(t,e){1&t&&(b.bc(0,"small",25),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function Ua(t,e){1&t&&(b.bc(0,"small",25),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function Wa(t,e){1&t&&(b.bc(0,"small",25),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function ja(t,e){1&t&&(b.bc(0,"small",25),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function Ba(t,e){1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"button_add")))}function $a(t,e){1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"button_update")))}var Ga,za=((Ga=function(){function t(e,a,n,i,c,o,r){s(this,t),this.bsModalRef=e,this.notificationService=a,this.datePipe=n,this._authenService=i,this.formBuilder=c,this.formErrors=o,this.dataService=r,this.list=[],this.errors={},this.id=0,this.loading=!1,this.initTiny={base_url:"/tinymce",height:250,language:"vi_VN",skin_url:"./assets/tinymce/skins/lightgray",language_url:"./assets/tinymce/langs/vi_VN.js",plugins:"autosave autolink code codesample colorpicker emoticons fullscreen hr preview table textcolor wordcount",toolbar:"undo redo forecolor cut copy paste fontselect styleselect bold italic link preview code alignleft aligncenter alignright alignjustify"},this.vehicle={},this.event=new b.q,this.bsValue=new Date,this.maxProgressbar=0,this.progressing=0,this.hasTaskvehicle=!1,this.initForm()}return r(t,[{key:"ngOnInit",value:function(){var t=this._authenService.getLoggedInUser();this.getUserIdLogin(t.userName),this.getListUser(),this.fillFormData()}},{key:"getUserIdLogin",value:function(t){var e=this;if(t){var a=[];a.push("@UserName",t),this.dataService.post("/commands",{CommandText:"uspUser___FindUserName",CommandType:1025,Parameters:a}).subscribe(function(t){t.Data&&(e.userLoginId=t.Data[0].Id)})}}},{key:"getListUser",value:function(){var t=this,e=[];e.push("@ActivatedOnly",1),this.dataService.post("/commands",{CommandText:"uspUser___Fill",CommandType:1025,Parameters:e}).subscribe(function(e){e.Data&&(t.userList=e.Data)})}},{key:"initForm",value:function(){var t=this;this.vehicleModel=this.formBuilder.group({id:["",f.u.required],Code:["",f.u.required],Name:["",f.u.required],EmplyeeId:["",f.u.required],VehicleType:["",f.u.required],Length:["",f.u.required],Wide:["",f.u.required],Hieght:["",f.u.required],Tonnage:["",f.u.required],Description:["",f.u.required]}),Object.keys(this.vehicleModel.controls).forEach(function(e){t.errors[e]=""}),this.vehicleModel.valueChanges.subscribe(function(e){t.errors=t.formErrors.validateForm(t.vehicleModel,t.errors,!0)})}},{key:"triggerEvent",value:function(t){this.event.emit({data:t})}},{key:"onSubmit",value:function(t){var e=this,a=this.formatFormData(t);this.id?a.ChangedBy=this.userLoginId:(a.CreatedBy=this.userLoginId,a.OwnerId=this.userLoginId),console.log(a),this.dataService.post("/Vehicles",a).subscribe(function(t){e.notificationService.printSuccessMessage(e.id?p.a.UPDATED_OK_MSG:p.a.CREATED_OK_MSG),e.triggerEvent("Submit"),e.bsModalRef.hide()},function(t){return e.dataService.handleError(t)})}},{key:"formatFormData",value:function(t){var e={};return t&&Object.keys(this.vehicleModel.controls).forEach(function(a){e[a]=t[a]?t[a]:null}),e}},{key:"onClose",value:function(){this.triggerEvent("Close"),this.bsModalRef.hide()}},{key:"fillFormData",value:function(){var t=this;0!=this.id&&this.dataService.get("/Vehicles/"+this.id).subscribe(function(e){t.vehicle=e,Object.keys(t.vehicleModel.controls).forEach(function(e){"id"!=e&&t.vehicleModel.controls[e].setValue(t.vehicle[e]?t.vehicle[e]:"")})})}}]),t}()).\u0275fac=function(t){return new(t||Ga)(b.Vb(m.a),b.Vb(_.a),b.Vb(l.e),b.Vb(y.a),b.Vb(f.c),b.Vb(M.a),b.Vb(T.a))},Ga.\u0275cmp=b.Pb({type:Ga,selectors:[["app-vehicle-detail"]],decls:90,vars:49,consts:[[1,"modal-header"],["class","modal-title pull-left",4,"ngIf"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],["autocomplete","off","standalone","",1,"form-horizontal","form-label-left","input_mask",3,"formGroup","ngSubmit"],["type","number","formControlName","id",1,"hidden",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-md-4","col-sm-4","col-xs-12"],[1,"form-group"],["type","text","required","","minlength","3","formControlName","Code",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],[1,"col-md-8","col-sm-8","col-xs-12"],["type","text","required","","minlength","3","formControlName","Name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","VehicleType",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","Length",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","Wide",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","Hieght",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","Tonnage",1,"form-control",3,"ngModel","ngModelChange"],["type","text","required","","minlength","3","formControlName","Description",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","button-submit",3,"click"],[4,"ngIf"],["type","button",1,"btn","btn-default",3,"click"],[1,"modal-title","pull-left"],[1,"text-danger"]],template:function(t,e){1&t&&(b.bc(0,"div",0),b.Kc(1,Ea,3,3,"h4",1),b.Kc(2,Fa,3,3,"h4",1),b.bc(3,"button",2),b.ic("click",function(){return e.onClose()}),b.bc(4,"span",3),b.Mc(5,"\xd7"),b.ac(),b.ac(),b.ac(),b.bc(6,"div",4),b.bc(7,"form",5),b.ic("ngSubmit",function(){return e.onSubmit(e.vehicleModel.value)}),b.bc(8,"input",6),b.ic("ngModelChange",function(t){return e.id=t}),b.ac(),b.bc(9,"div",7),b.bc(10,"div",8),b.bc(11,"div",9),b.bc(12,"p"),b.bc(13,"strong"),b.Mc(14),b.lc(15,"translate"),b.ac(),b.ac(),b.bc(16,"div"),b.bc(17,"input",10),b.ic("ngModelChange",function(t){return e.Code=t}),b.ac(),b.Kc(18,qa,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.bc(19,"div",12),b.bc(20,"div",9),b.bc(21,"p"),b.bc(22,"strong"),b.Mc(23),b.lc(24,"translate"),b.ac(),b.ac(),b.bc(25,"div"),b.bc(26,"input",13),b.ic("ngModelChange",function(t){return e.Name=t}),b.ac(),b.Kc(27,La,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(28,"div",7),b.bc(29,"div",8),b.bc(30,"div",9),b.bc(31,"p"),b.bc(32,"strong"),b.Mc(33),b.lc(34,"translate"),b.ac(),b.ac(),b.bc(35,"div"),b.bc(36,"input",14),b.ic("ngModelChange",function(t){return e.VehicleType=t}),b.ac(),b.Kc(37,Ka,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.bc(38,"div",8),b.bc(39,"div",9),b.bc(40,"p"),b.bc(41,"strong"),b.Mc(42),b.lc(43,"translate"),b.ac(),b.ac(),b.bc(44,"div"),b.bc(45,"input",15),b.ic("ngModelChange",function(t){return e.Length=t}),b.ac(),b.Kc(46,Va,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.bc(47,"div",8),b.bc(48,"div",9),b.bc(49,"p"),b.bc(50,"strong"),b.Mc(51),b.lc(52,"translate"),b.ac(),b.ac(),b.bc(53,"div"),b.bc(54,"input",16),b.ic("ngModelChange",function(t){return e.Wide=t}),b.ac(),b.Kc(55,Ra,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.bc(56,"div",8),b.bc(57,"div",9),b.bc(58,"p"),b.bc(59,"strong"),b.Mc(60),b.lc(61,"translate"),b.ac(),b.ac(),b.bc(62,"div"),b.bc(63,"input",17),b.ic("ngModelChange",function(t){return e.Hieght=t}),b.ac(),b.Kc(64,Ua,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.bc(65,"div",8),b.bc(66,"div",9),b.bc(67,"p"),b.bc(68,"strong"),b.Mc(69),b.lc(70,"translate"),b.ac(),b.ac(),b.bc(71,"div"),b.bc(72,"input",18),b.ic("ngModelChange",function(t){return e.Tonnage=t}),b.ac(),b.Kc(73,Wa,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.bc(74,"div",8),b.bc(75,"div",9),b.bc(76,"p"),b.bc(77,"strong"),b.Mc(78),b.lc(79,"translate"),b.ac(),b.ac(),b.bc(80,"div"),b.bc(81,"input",19),b.ic("ngModelChange",function(t){return e.Description=t}),b.ac(),b.Kc(82,ja,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(83,"div",20),b.bc(84,"button",21),b.ic("click",function(){return e.onSubmit(e.vehicleModel.value)}),b.Kc(85,Ba,3,3,"span",22),b.Kc(86,$a,3,3,"span",22),b.ac(),b.bc(87,"button",23),b.ic("click",function(){return e.onClose()}),b.Mc(88),b.lc(89,"translate"),b.ac(),b.ac()),2&t&&(b.Jb(1),b.qc("ngIf",!e.id),b.Jb(1),b.qc("ngIf",e.id),b.Jb(5),b.qc("formGroup",e.vehicleModel),b.Jb(1),b.qc("ngModel",e.id),b.Jb(6),b.Nc(b.mc(15,31,"M\xe3")),b.Jb(3),b.qc("ngModel",e.Code),b.Jb(1),b.qc("ngIf",e.errors.Code),b.Jb(5),b.Nc(b.mc(24,33,"T\xean")),b.Jb(3),b.qc("ngModel",e.Name),b.Jb(1),b.qc("ngIf",e.errors.Name),b.Jb(6),b.Nc(b.mc(34,35,"Lo\u1ea1i h\xecnh")),b.Jb(3),b.qc("ngModel",e.VehicleType),b.Jb(1),b.qc("ngIf",e.errors.VehicleType),b.Jb(5),b.Nc(b.mc(43,37,"Chi\u1ec1u d\xe0i")),b.Jb(3),b.qc("ngModel",e.Length),b.Jb(1),b.qc("ngIf",e.errors.Length),b.Jb(5),b.Nc(b.mc(52,39,"Chi\u1ec1u r\u1ed9ng")),b.Jb(3),b.qc("ngModel",e.Wide),b.Jb(1),b.qc("ngIf",e.errors.Wide),b.Jb(5),b.Nc(b.mc(61,41,"Chi\u1ec1u cao")),b.Jb(3),b.qc("ngModel",e.Hieght),b.Jb(1),b.qc("ngIf",e.errors.Hieght),b.Jb(5),b.Nc(b.mc(70,43,"Tr\u1ecdng t\u1ea3i")),b.Jb(3),b.qc("ngModel",e.Tonnage),b.Jb(1),b.qc("ngIf",e.errors.Tonnage),b.Jb(5),b.Nc(b.mc(79,45,"Di\u1ec5n gi\u1ea3i")),b.Jb(3),b.qc("ngModel",e.Description),b.Jb(1),b.qc("ngIf",e.errors.Description),b.Jb(3),b.qc("ngIf",!e.id),b.Jb(1),b.qc("ngIf",e.id),b.Jb(2),b.Nc(b.mc(89,47,"button_close")))},directives:[l.m,f.w,f.l,f.f,f.p,f.b,f.k,f.e,f.s,f.h],pipes:[h.c],styles:[".check-affects[_ngcontent-%COMP%]{padding-top:30px}.button-submit[_ngcontent-%COMP%]{margin-bottom:0}.task-todo-action-delete[_ngcontent-%COMP%]{float:right;font-size:12px}.task-todo-action[_ngcontent-%COMP%]{font-size:12px}.progress[_ngcontent-%COMP%]{height:10px}.todo-title[_ngcontent-%COMP%]{width:100%;margin-bottom:5px;margin-top:5px}.list-task-todo[_ngcontent-%COMP%]{line-height:2.5}.task-todo[_ngcontent-%COMP%]{margin-top:15px}.progressbar-panel[_ngcontent-%COMP%]{margin-top:10px}.table-task-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{white-space:nowrap}"]}),Ga),Ha=["modalAddEdit"];function Qa(t,e){if(1&t){var a=b.cc();b.bc(0,"button",9),b.ic("click",function(){return b.Ec(a),b.kc().showCreateVehicleModel()}),b.Wb(1,"span",10),b.Mc(2),b.lc(3,"translate"),b.ac()}2&t&&(b.Jb(2),b.Oc(" ",b.mc(3,1,"add_new"),""))}function Ya(t,e){if(1&t&&(b.bc(0,"th"),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.Jb(1),b.Nc(a.Caption)}}function Xa(t,e){if(1&t&&(b.bc(0,"td"),b.bc(1,"span"),b.Mc(2),b.ac(),b.ac()),2&t){var a=e.$implicit,n=b.kc().$implicit;b.Jb(2),b.Nc(n[a.Name])}}function Za(t,e){if(1&t){var a=b.cc();b.bc(0,"button",15),b.ic("click",function(){b.Ec(a);var t=b.kc().$implicit;return b.kc().showEditModal(t.Id)}),b.Wb(1,"i",16),b.ac()}}function tn(t,e){if(1&t){var a=b.cc();b.bc(0,"button",17),b.ic("click",function(){b.Ec(a);var t=b.kc().$implicit;return b.kc().deleteItem(t.Id)}),b.Wb(1,"i",18),b.ac()}}function en(t,e){if(1&t&&(b.bc(0,"tr",11),b.Kc(1,Xa,3,1,"td",6),b.bc(2,"td",12),b.Kc(3,Za,2,0,"button",13),b.Kc(4,tn,2,0,"button",14),b.ac(),b.ac()),2&t){var a=b.kc();b.Jb(1),b.qc("ngForOf",a.columnInfoVehicle),b.Jb(2),b.qc("ngIf",a.authService.hasPermission("/main/task/vehicleList","Edit")),b.Jb(1),b.qc("ngIf",a.authService.hasPermission("/main/task/vehicleList","Delete"))}}function an(t,e){1&t&&(b.bc(0,"div",19),b.bc(1,"div",20),b.bc(2,"strong"),b.Mc(3),b.lc(4,"translate"),b.ac(),b.Mc(5),b.lc(6,"translate"),b.ac(),b.ac()),2&t&&(b.Jb(3),b.Oc("",b.mc(4,2,"dialog_alert_title"),"!"),b.Jb(2),b.Oc(" ",b.mc(6,4,"task_manager_task_notice_list_empty")," "))}function nn(t,e){if(1&t){var a=b.cc();b.bc(0,"div",19),b.bc(1,"div",21),b.bc(2,"pagination",22),b.ic("pageChanged",function(t){return b.Ec(a),b.kc().pageChanged(t)})("ngModelChange",function(t){return b.Ec(a),b.kc().pageNumber=t}),b.ac(),b.ac(),b.bc(3,"div",23),b.bc(4,"div",24),b.bc(5,"label",25),b.Mc(6),b.lc(7,"translate"),b.ac(),b.bc(8,"select",26),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc().pageSize=t})("change",function(){return b.Ec(a),b.kc().onChangePageSize()}),b.bc(9,"option",27),b.Mc(10,"10"),b.ac(),b.bc(11,"option",28),b.Mc(12,"20"),b.ac(),b.bc(13,"option",29),b.Mc(14,"50"),b.ac(),b.bc(15,"option",30),b.Mc(16,"100"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac()}if(2&t){var n=b.kc();b.Jb(2),b.qc("boundaryLinks",!0)("itemsPerPage",n.pageSize)("totalItems",n.totalRow)("ngModel",n.pageNumber),b.Jb(4),b.Oc("",b.mc(7,6,"show_row")," \xa0"),b.Jb(2),b.qc("ngModel",n.pageSize)}}var cn,sn=((cn=function(){function t(e,a,n,i){s(this,t),this.authService=e,this.dataService=a,this._notificationService=n,this.modalService=i,this.keyword="",this.fromDate=new Date,this.toDate=new Date,this.serviceType="",this.transportMode=0,this.portOfLoading=0,this.portOfDischarge=0,this.pageNumber=1,this.pageSize=20,this.pageDisplay=10,this.filter="",this.checkedAll=!1,this.columnInfoVehicle=[{Name:"Code",Caption:"M\xe3 xe",Width:120},{Name:"Name",Caption:"T\xean xe",Width:120},{Name:"VehicleType",Caption:"Lo\u1ea1i xe",Width:120},{Name:"Length",Caption:"Chi\u1ec1u d\xe0i",Width:120},{Name:"Wide",Caption:"Chi\u1ec1u r\u1ed9ng",Width:120},{Name:"Hieght",Caption:"Chi\u1ec1u cao",Width:120},{Name:"Tonnage",Caption:"Tr\u1ecdng t\u1ea3i",Format:"#,###.###",Width:120,Visible:!1},{Name:"Description",Caption:"Di\u1ec5n gi\u1ea3i",Width:120}]}return r(t,[{key:"ngOnInit",value:function(){this.fromDate.setDate(1),this.dateRange=[this.fromDate,this.toDate],this.loadData()}},{key:"loadData",value:function(){var t=this;this.dataService.get("/Vehicles").subscribe(function(e){t.vehicles=e})}},{key:"onChangeTransportMode",value:function(){this.loadData()}},{key:"onChangePortOfLoading",value:function(){this.loadData()}},{key:"onChangePortOfDischarge",value:function(){this.loadData()}},{key:"onValueChangeDateRange",value:function(t){this.fromDate=t[0],this.toDate=t[1],this.loadData()}},{key:"loadVehicle",value:function(t){var e=this;this.bsModalRef=this.modalService.show(za,{initialState:{id:t},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(function(t){e.loadData()})}},{key:"showCreateVehicleModel",value:function(){var t=this;this.bsModalRef=this.modalService.show(za,{initialState:{extenalVehicle:void 0},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(function(e){t.loadData()})}},{key:"pageChanged",value:function(t){this.pageNumber=t.page,this.loadData()}},{key:"onChangePageSize",value:function(){this.loadData()}},{key:"showAddModal",value:function(){this.entity={},this.modalAddEdit.show()}},{key:"showEditModal",value:function(t){this.loadVehicle(t)}},{key:"deleteItem",value:function(t){var e=this;this._notificationService.printConfirmationDialog(p.a.CONFIRM_DELETE_MSG,function(){return e.deleteItemConfirm(t)})}},{key:"deleteItemConfirm",value:function(t){var e=this;this.dataService.delete("/Vehicles/"+t).subscribe(function(t){e._notificationService.printSuccessMessage(p.a.DELETED_OK_MSG),e.loadData()})}}]),t}()).\u0275fac=function(t){return new(t||cn)(b.Vb(y.a),b.Vb(T.a),b.Vb(_.a),b.Vb(m.b))},cn.\u0275cmp=b.Pb({type:cn,selectors:[["app-vehicle-list"]],viewQuery:function(t,e){var a;1&t&&b.Qc(Ha,1),2&t&&b.zc(a=b.jc())&&(e.modalAddEdit=a.first)},decls:18,vars:8,consts:[[1,"x_title"],[1,"fa","fa-tasks"],[1,"btn-add-new"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["class","select-item",4,"ngFor","ngForOf"],["class","col-md-12",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-plus"],[1,"select-item"],[1,"text-center","action-task"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-pencil-square-o"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"col-md-12"],[1,"alert","alert-info"],[1,"col-md-8"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","itemsPerPage","totalItems","ngModel","pageChanged","ngModelChange"],[1,"col-md-4"],[1,"form-group","view-options"],["for",""],["name","page-size",1,"form-control",3,"ngModel","ngModelChange","change"],["value","10"],["value","20"],["value","50"],["value","100"]],template:function(t,e){1&t&&(b.bc(0,"div",0),b.bc(1,"h3"),b.Wb(2,"i",1),b.Mc(3),b.lc(4,"translate"),b.ac(),b.ac(),b.Wb(5,"br"),b.Wb(6,"hr"),b.bc(7,"div",2),b.Kc(8,Qa,4,3,"button",3),b.ac(),b.bc(9,"div",4),b.bc(10,"table",5),b.bc(11,"thead"),b.bc(12,"tr"),b.Kc(13,Ya,2,1,"th",6),b.ac(),b.ac(),b.bc(14,"tbody"),b.Kc(15,en,5,3,"tr",7),b.ac(),b.ac(),b.Kc(16,an,7,6,"div",8),b.Kc(17,nn,17,8,"div",8),b.ac()),2&t&&(b.Jb(3),b.Oc(" ",b.mc(4,6,"Danh s\xe1ch ph\u01b0\u01a1ng ti\u1ec7n"),""),b.Jb(5),b.qc("ngIf",e.authService.hasPermission("/main/task/vehicleList","Add")),b.Jb(5),b.qc("ngForOf",e.columnInfoVehicle),b.Jb(2),b.qc("ngForOf",e.vehicles),b.Jb(1),b.qc("ngIf",e.vehicles&&0==e.vehicles.length),b.Jb(1),b.qc("ngIf",e.vehicles&&e.vehicles.length>0))},directives:[l.m,l.l,He.a,f.k,f.n,f.t,f.o,f.v],pipes:[h.c],styles:[".panel-search[_ngcontent-%COMP%]{display:inline-flex}.panel-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;margin-right:0}.filter-service-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;padding-right:10px}.btn-add-new[_ngcontent-%COMP%], .view-options[_ngcontent-%COMP%]{text-align:right}.view-options[_ngcontent-%COMP%]{margin-top:20px}.view-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:auto;display:inline-block}.label-created-date[_ngcontent-%COMP%]{padding-top:5px}.select-item[_ngcontent-%COMP%]{cursor:pointer}.select-item[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}"]}),cn),on=c("XOxn");function rn(t,e){1&t&&(b.bc(0,"h4",25),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"task_manager_create_new_task")))}function ln(t,e){1&t&&(b.bc(0,"h4",25),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"task_manager_update_task")))}function dn(t,e){1&t&&(b.bc(0,"small",26),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function un(t,e){1&t&&(b.bc(0,"small",26),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function bn(t,e){1&t&&(b.bc(0,"small",26),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"error_this_field_is_required")))}function mn(t,e){if(1&t&&(b.bc(0,"th"),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.Jb(1),b.Oc(" ",a.obj.Caption," ")}}function hn(t,e){if(1&t){var a=b.cc();b.bc(0,"input",32),b.ic("ngModelChange",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().$implicit[e.key]=t}),b.ac()}if(2&t){var n=b.kc().$implicit,i=b.kc().$implicit;b.qc("ngModel",i[n.key])}}function gn(t,e){if(1&t){var a=b.cc();b.bc(0,"input",33),b.ic("ngModelChange",function(t){b.Ec(a);var e=b.kc().$implicit;return b.kc().$implicit[e.key]=t}),b.ac()}if(2&t){var n=b.kc().$implicit,i=b.kc().$implicit;b.qc("ngModel",i[n.key])}}function pn(t,e){if(1&t&&(b.bc(0,"td"),b.bc(1,"div",9),b.Kc(2,hn,1,1,"input",30),b.Kc(3,gn,1,1,"input",31),b.ac(),b.ac()),2&t){var a=e.$implicit;b.Jb(2),b.qc("ngIf","string"==a.obj.DataType&&a.obj.AllowEditing),b.Jb(1),b.qc("ngIf","number"==a.obj.DataType&&a.obj.AllowEditing)}}function fn(t,e){if(1&t){var a=b.cc();b.bc(0,"a",34),b.ic("click",function(){b.Ec(a);var t=b.kc().$implicit;return b.kc().deleteItem(t)}),b.Wb(1,"i",35),b.ac()}}function kn(t,e){if(1&t&&(b.bc(0,"tr",27),b.Kc(1,pn,4,2,"td",17),b.lc(2,"jsonToArray"),b.bc(3,"td",28),b.Kc(4,fn,2,0,"a",29),b.Mc(5,"\xa0 "),b.ac(),b.ac()),2&t){var a=b.kc();b.Jb(1),b.qc("ngForOf",b.mc(2,2,a.todoTemplateDetailColumnInfo)),b.Jb(3),b.qc("ngIf",a.authService.hasPermission("/main/task/todoTemplateList","Delete"))}}function vn(t,e){if(1&t){var a=b.cc();b.bc(0,"button",36),b.ic("click",function(){return b.Ec(a),b.kc().addNewTodoTemplate()}),b.Wb(1,"span",37),b.Mc(2),b.lc(3,"translate"),b.ac()}2&t&&(b.Jb(2),b.Oc(" ",b.mc(3,1,"add_new_todo_item"),""))}function _n(t,e){1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"button_add")))}function yn(t,e){1&t&&(b.bc(0,"span"),b.Mc(1),b.lc(2,"translate"),b.ac()),2&t&&(b.Jb(1),b.Nc(b.mc(2,1,"button_update")))}var Mn,Tn=((Mn=function(){function t(e,a,n,i,c,o,r){s(this,t),this.bsModalRef=e,this.notificationService=a,this.datePipe=n,this.authService=i,this.formBuilder=c,this.formErrors=o,this.dataService=r,this.list=[],this.errors={},this.id=0,this.loading=!1,this.todoTemplate={},this.event=new b.q,this.bsValue=new Date,this.maxProgressbar=0,this.progressing=0,this.todoTemplateDetailColumnInfo=on.TaskTodoTemplateDetailForm.ColumnInfo,this.initForm()}return r(t,[{key:"ngOnInit",value:function(){this.fillFormData()}},{key:"initForm",value:function(){var t=this;this.todoTemplateModel=this.formBuilder.group({id:["",f.u.required],Code:["",f.u.required],Description:["",f.u.required],CategoryId:["",f.u.required]}),Object.keys(this.todoTemplateModel.controls).forEach(function(e){t.errors[e]=""}),this.todoTemplateModel.valueChanges.subscribe(function(e){t.errors=t.formErrors.validateForm(t.todoTemplateModel,t.errors,!0)})}},{key:"triggerEvent",value:function(t){this.event.emit({data:t})}},{key:"onSubmit",value:function(t){var e=this,a=this.authService.getLoggedInUser(),n=this.formatFormData(t);this.id?n.ChangedBy=a.id:(n.CreatedBy=a.id,n.OwnerId=a.id),n.Details=this.todoTemplateDetails,this.dataService.post("/TaskTodoTemplates/SaveHierarchy",n).subscribe(function(t){e.notificationService.printSuccessMessage(e.id?p.a.UPDATED_OK_MSG:p.a.CREATED_OK_MSG),e.triggerEvent("Submit"),e.bsModalRef.hide()},function(t){return e.dataService.handleError(t)})}},{key:"formatFormData",value:function(t){var e={};return t&&Object.keys(this.todoTemplateModel.controls).forEach(function(a){e[a]=t[a]?t[a]:null}),e}},{key:"onClose",value:function(){this.triggerEvent("Close"),this.bsModalRef.hide()}},{key:"fillFormData",value:function(){var t=this;0!==this.id&&this.dataService.get("/TaskTodoTemplates/"+this.id+"?includeDetail=true").subscribe(function(e){t.todoTemplate=e,t.todoTemplateDetails=e.Details,Object.keys(t.todoTemplateModel.controls).forEach(function(e){"id"!==e&&t.todoTemplateModel.controls[e].setValue(t.todoTemplate[e]?t.todoTemplate[e]:"")})})}},{key:"addNewTodoTemplate",value:function(){this.todoTemplateDetails.push({})}},{key:"deleteItem",value:function(t){var e=t.Id;this.todoTemplateDetails=this.todoTemplateDetails.filter(function(t){return t.Id!==e})}}]),t}()).\u0275fac=function(t){return new(t||Mn)(b.Vb(m.a),b.Vb(_.a),b.Vb(l.e),b.Vb(y.a),b.Vb(f.c),b.Vb(M.a),b.Vb(T.a))},Mn.\u0275cmp=b.Pb({type:Mn,selectors:[["app-todo-template-item"]],decls:58,vars:29,consts:[[1,"modal-header"],["class","modal-title pull-left",4,"ngIf"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],["autocomplete","off","standalone","",1,"form-horizontal","form-label-left","input_mask",3,"formGroup","ngSubmit"],["type","number","formControlName","id",1,"hidden",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-md-4","col-sm-4","col-xs-12"],[1,"form-group"],["type","text","required","","minlength","3","formControlName","Code",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["type","text","required","","minlength","3","formControlName","CategoryId",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12","col-xs-12"],["type","text","required","","minlength","3","formControlName","Description",1,"form-control",3,"ngModel","ngModelChange"],[1,"table-responsive","table-task-item"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["class","select-task",4,"ngFor","ngForOf"],[1,"btn-add-new"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","button-submit",3,"click"],[4,"ngIf"],["type","button",1,"btn","btn-default",3,"click"],[1,"modal-title","pull-left"],[1,"text-danger"],[1,"select-task"],[1,"text-center","action-task"],["data-toggle","tooltip","data-placement","top","class","action-delete-task",3,"click",4,"ngIf"],["type","text","class","form-control",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","class","form-control",3,"ngModel","ngModelChange",4,"ngIf"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],["data-toggle","tooltip","data-placement","top",1,"action-delete-task",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["type","button",1,"btn","btn-primary",3,"click"],[1,"glyphicon","glyphicon-plus"]],template:function(t,e){1&t&&(b.bc(0,"div",0),b.Kc(1,rn,3,3,"h4",1),b.Kc(2,ln,3,3,"h4",1),b.bc(3,"button",2),b.ic("click",function(){return e.onClose()}),b.bc(4,"span",3),b.Mc(5,"\xd7"),b.ac(),b.ac(),b.ac(),b.bc(6,"div",4),b.bc(7,"form",5),b.ic("ngSubmit",function(){return e.onSubmit(e.todoTemplateModel.value)}),b.bc(8,"input",6),b.ic("ngModelChange",function(t){return e.id=t}),b.ac(),b.bc(9,"div",7),b.bc(10,"div",8),b.bc(11,"div",9),b.bc(12,"p"),b.bc(13,"strong"),b.Mc(14),b.lc(15,"translate"),b.ac(),b.ac(),b.bc(16,"div"),b.bc(17,"input",10),b.ic("ngModelChange",function(t){return e.Code=t}),b.ac(),b.Kc(18,dn,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.bc(19,"div",8),b.bc(20,"div",9),b.bc(21,"p"),b.bc(22,"strong"),b.Mc(23),b.lc(24,"translate"),b.ac(),b.ac(),b.bc(25,"div"),b.bc(26,"input",12),b.ic("ngModelChange",function(t){return e.CategoryId=t}),b.ac(),b.Kc(27,un,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(28,"div",7),b.bc(29,"div",13),b.bc(30,"div",9),b.bc(31,"p"),b.bc(32,"strong"),b.Mc(33),b.lc(34,"translate"),b.ac(),b.ac(),b.bc(35,"div"),b.bc(36,"input",14),b.ic("ngModelChange",function(t){return e.Description=t}),b.ac(),b.Kc(37,bn,3,3,"small",11),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(38,"div",7),b.bc(39,"div"),b.Mc(40,"Details"),b.ac(),b.bc(41,"div",15),b.bc(42,"table",16),b.bc(43,"thead"),b.bc(44,"tr"),b.Kc(45,mn,2,1,"th",17),b.lc(46,"jsonToArray"),b.ac(),b.ac(),b.bc(47,"tbody"),b.Kc(48,kn,6,4,"tr",18),b.ac(),b.ac(),b.bc(49,"div",19),b.Kc(50,vn,4,3,"button",20),b.ac(),b.ac(),b.ac(),b.ac(),b.bc(51,"div",21),b.bc(52,"button",22),b.ic("click",function(){return e.onSubmit(e.todoTemplateModel.value)}),b.Kc(53,_n,3,3,"span",23),b.Kc(54,yn,3,3,"span",23),b.ac(),b.bc(55,"button",24),b.ic("click",function(){return e.onClose()}),b.Mc(56),b.lc(57,"translate"),b.ac(),b.ac()),2&t&&(b.Jb(1),b.qc("ngIf",!e.id),b.Jb(1),b.qc("ngIf",e.id),b.Jb(5),b.qc("formGroup",e.todoTemplateModel),b.Jb(1),b.qc("ngModel",e.id),b.Jb(6),b.Nc(b.mc(15,19,"M\xe3")),b.Jb(3),b.qc("ngModel",e.Code),b.Jb(1),b.qc("ngIf",e.errors.Code),b.Jb(5),b.Nc(b.mc(24,21,"Lo\u1ea1i h\xecnh")),b.Jb(3),b.qc("ngModel",e.CategoryId),b.Jb(1),b.qc("ngIf",e.errors.CategoryId),b.Jb(6),b.Nc(b.mc(34,23,"Di\u1ec5n gi\u1ea3i")),b.Jb(3),b.qc("ngModel",e.Description),b.Jb(1),b.qc("ngIf",e.errors.Description),b.Jb(8),b.qc("ngForOf",b.mc(46,25,e.todoTemplateDetailColumnInfo)),b.Jb(3),b.qc("ngForOf",e.todoTemplateDetails),b.Jb(2),b.qc("ngIf",e.authService.hasPermission("/main/task/todoTemplateList","Add")),b.Jb(3),b.qc("ngIf",!e.id),b.Jb(1),b.qc("ngIf",e.id),b.Jb(2),b.Nc(b.mc(57,27,"button_close")))},directives:[l.m,f.w,f.l,f.f,f.p,f.b,f.k,f.e,f.s,f.h,l.l,f.n],pipes:[h.c,Y],styles:[""]}),Mn),Cn=c("joGx");function In(t,e){if(1&t){var a=b.cc();b.bc(0,"button",9),b.ic("click",function(){return b.Ec(a),b.kc().loadTodoTemplate(0)}),b.Wb(1,"span",10),b.Mc(2),b.lc(3,"translate"),b.ac()}2&t&&(b.Jb(2),b.Oc(" ",b.mc(3,1,"add_new"),""))}function Dn(t,e){if(1&t&&(b.bc(0,"th"),b.Mc(1),b.ac()),2&t){var a=e.$implicit;b.Jb(1),b.Oc(" ",a.obj.Caption," ")}}function An(t,e){if(1&t&&(b.bc(0,"td"),b.bc(1,"span"),b.Mc(2),b.ac(),b.ac()),2&t){var a=e.$implicit,n=b.kc().$implicit;b.Jb(2),b.Nc(n[a.obj.Name])}}function Jn(t,e){if(1&t){var a=b.cc();b.bc(0,"button",15),b.ic("click",function(){b.Ec(a);var t=b.kc().$implicit;return b.kc().loadTodoTemplate(t.Id)}),b.Wb(1,"i",16),b.ac()}}function wn(t,e){if(1&t){var a=b.cc();b.bc(0,"button",17),b.ic("click",function(){b.Ec(a);var t=b.kc().$implicit;return b.kc().deleteItem(t.Id)}),b.Wb(1,"i",18),b.ac()}}function Sn(t,e){if(1&t&&(b.bc(0,"tr",11),b.Kc(1,An,3,1,"td",6),b.lc(2,"jsonToArray"),b.bc(3,"td",12),b.Kc(4,Jn,2,0,"button",13),b.Kc(5,wn,2,0,"button",14),b.ac(),b.ac()),2&t){var a=b.kc();b.Jb(1),b.qc("ngForOf",b.mc(2,3,a.todoTemplateColumnInfo)),b.Jb(3),b.qc("ngIf",a.authService.hasPermission("/main/task/todoTemplateList","Edit")),b.Jb(1),b.qc("ngIf",a.authService.hasPermission("/main/task/todoTemplateList","Delete"))}}function Nn(t,e){1&t&&(b.bc(0,"div",19),b.bc(1,"div",20),b.bc(2,"strong"),b.Mc(3),b.lc(4,"translate"),b.ac(),b.Mc(5),b.lc(6,"translate"),b.ac(),b.ac()),2&t&&(b.Jb(3),b.Oc("",b.mc(4,2,"dialog_alert_title"),"!"),b.Jb(2),b.Oc(" ",b.mc(6,4,"task_manager_task_notice_list_empty")," "))}function On(t,e){if(1&t){var a=b.cc();b.bc(0,"div",19),b.bc(1,"div",21),b.bc(2,"pagination",22),b.ic("pageChanged",function(t){return b.Ec(a),b.kc().pageChanged(t)})("ngModelChange",function(t){return b.Ec(a),b.kc().pageNumber=t}),b.ac(),b.ac(),b.bc(3,"div",23),b.bc(4,"div",24),b.bc(5,"label",25),b.Mc(6),b.lc(7,"translate"),b.ac(),b.bc(8,"select",26),b.ic("ngModelChange",function(t){return b.Ec(a),b.kc().pageSize=t})("change",function(){return b.Ec(a),b.kc().onChangePageSize()}),b.bc(9,"option",27),b.Mc(10,"10"),b.ac(),b.bc(11,"option",28),b.Mc(12,"20"),b.ac(),b.bc(13,"option",29),b.Mc(14,"50"),b.ac(),b.bc(15,"option",30),b.Mc(16,"100"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac()}if(2&t){var n=b.kc();b.Jb(2),b.qc("boundaryLinks",!0)("itemsPerPage",n.pageSize)("totalItems",n.totalRow)("ngModel",n.pageNumber),b.Jb(4),b.Oc("",b.mc(7,6,"show_row")," \xa0"),b.Jb(2),b.qc("ngModel",n.pageSize)}}var Pn,xn,En=d.f.forChild([{path:"",component:ya},{path:"alcTaskItem",component:xa},{path:"vehicleList",component:sn},{path:"vehicle",component:za},{path:"todoTemplateList",component:(Pn=function(){function t(e,a,n,i){s(this,t),this.authService=e,this.dataService=a,this.notificationService=n,this.modalService=i,this.keyword="",this.fromDate=new Date,this.toDate=new Date,this.serviceType="",this.transportMode=0,this.portOfLoading=0,this.portOfDischarge=0,this.pageNumber=1,this.pageSize=20,this.pageDisplay=10,this.filter="",this.checkedAll=!1,this.todoTemplateColumnInfo=Cn.TaskTodoTemplateForm.ColumnInfo}return r(t,[{key:"ngOnInit",value:function(){this.fromDate.setDate(1),this.dateRange=[this.fromDate,this.toDate],this.loadData()}},{key:"loadData",value:function(){var t=this;this.dataService.get("/TaskTodoTemplates").subscribe(function(e){t.todoTemplates=e,t.checkedAll=!1})}},{key:"loadTodoTemplate",value:function(t){var e=this;this.bsModalRef=this.modalService.show(Tn,{initialState:{id:t},class:"modal-lg"}),this.bsModalRef.content.event.subscribe(function(t){e.loadData()})}},{key:"pageChanged",value:function(t){this.pageNumber=t.page,this.loadData()}},{key:"onChangePageSize",value:function(){this.loadData()}},{key:"deleteItem",value:function(t){var e=this;this.notificationService.printConfirmationDialog(p.a.CONFIRM_DELETE_MSG,function(){return e.deleteItemConfirm(t)})}},{key:"deleteItemConfirm",value:function(t){var e=this;this.dataService.delete("/TaskTodoTemplates/"+t).subscribe(function(t){e.notificationService.printSuccessMessage(p.a.DELETED_OK_MSG),e.loadData()})}}]),t}(),Pn.\u0275fac=function(t){return new(t||Pn)(b.Vb(y.a),b.Vb(T.a),b.Vb(_.a),b.Vb(m.b))},Pn.\u0275cmp=b.Pb({type:Pn,selectors:[["app-todo-template-list"]],decls:19,vars:10,consts:[[1,"x_title"],[1,"fa","fa-tasks"],[1,"btn-add-new"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["class","select-item",4,"ngFor","ngForOf"],["class","col-md-12",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-plus"],[1,"select-item"],[1,"text-center","action-task"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-pencil-square-o"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"col-md-12"],[1,"alert","alert-info"],[1,"col-md-8"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","itemsPerPage","totalItems","ngModel","pageChanged","ngModelChange"],[1,"col-md-4"],[1,"form-group","view-options"],["for",""],["name","page-size",1,"form-control",3,"ngModel","ngModelChange","change"],["value","10"],["value","20"],["value","50"],["value","100"]],template:function(t,e){1&t&&(b.bc(0,"div",0),b.bc(1,"h3"),b.Wb(2,"i",1),b.Mc(3),b.lc(4,"translate"),b.ac(),b.ac(),b.Wb(5,"br"),b.Wb(6,"hr"),b.bc(7,"div",2),b.Kc(8,In,4,3,"button",3),b.ac(),b.bc(9,"div",4),b.bc(10,"table",5),b.bc(11,"thead"),b.bc(12,"tr"),b.Kc(13,Dn,2,1,"th",6),b.lc(14,"jsonToArray"),b.ac(),b.ac(),b.bc(15,"tbody"),b.Kc(16,Sn,6,5,"tr",7),b.ac(),b.ac(),b.Kc(17,Nn,7,6,"div",8),b.Kc(18,On,17,8,"div",8),b.ac()),2&t&&(b.Jb(3),b.Oc(" ",b.mc(4,6,"Danh s\xe1ch vi\u1ec7c vi\u1ec7c c\u1ea7n l\xe0m"),""),b.Jb(5),b.qc("ngIf",e.authService.hasPermission("/main/task/todoTemplateList","Add")),b.Jb(5),b.qc("ngForOf",b.mc(14,8,e.todoTemplateColumnInfo)),b.Jb(3),b.qc("ngForOf",e.todoTemplates),b.Jb(1),b.qc("ngIf",e.todoTemplates&&0==e.todoTemplates.length),b.Jb(1),b.qc("ngIf",e.todoTemplates&&e.todoTemplates.length>0))},directives:[l.m,l.l,He.a,f.k,f.n,f.t,f.o,f.v],pipes:[h.c,Y],styles:[".panel-search[_ngcontent-%COMP%]{display:inline-flex}.panel-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;margin-right:0}.filter-service-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;padding-right:10px}.btn-add-new[_ngcontent-%COMP%], .view-options[_ngcontent-%COMP%]{text-align:right}.view-options[_ngcontent-%COMP%]{margin-top:20px}.view-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:auto;display:inline-block}.label-created-date[_ngcontent-%COMP%]{padding-top:5px}.select-item[_ngcontent-%COMP%]{cursor:pointer}.select-item[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}"]}),Pn)},{path:"todoTemplateItem",component:Tn}]),Fn=c("PCNd"),qn=((xn=function t(){s(this,t)}).\u0275fac=function(t){return new(t||xn)},xn.\u0275mod=b.Tb({type:xn}),xn.\u0275inj=b.Sb({providers:[{provide:A.c,useValue:"tinymce/tinymce.min.js"}],imports:[[l.c,En,D.b,h.b,He.b,f.g,f.r,Fn.a,A.b,C.c.forRoot(),Xt.forRoot(),I.b.forRoot(),$.forRoot()]]}),xn)},raoF:function(t){t.exports=JSON.parse('{"TaskForm":{"ColumnInfo":{"Title":{"Name":"Title","Caption":"M\xe3 c\xf4ng vi\u1ec7c","Width":120},"TaskDate":{"Name":"TaskDate","Caption":"Ng\xe0y kh\u1edfi t\u1ea1o c\xf4ng vi\u1ec7c","Width":120},"Status":{"Name":"Status","Caption":"Tr\u1ea1ng th\xe1i","Width":120},"TargetDate":{"Name":"TargetDate","Caption":"Ng\xe0y b\u1eaft \u0111\u1ea7u(d\u1ef1 ki\u1ebfn)","Width":120},"ActualDate":{"Name":"ActualDate","Caption":"Ng\xe0y b\u1eaft \u0111\u1ea7u(th\u1ef1c t\u1ebf)","Width":120},"DueDate":{"Name":"DueDate","Caption":"Ng\xe0y k\u1ebft th\xfac","Width":120},"Description":{"Name":"Description","Caption":"Di\u1ec5n gi\u1ea3i","Width":120},"Add":{"Caption":"New(F4)"},"Edit":{"Caption":"Modify(F3)"},"Delete":{"Caption":"X\xf3a(Ctrl+F8)"},"Save":{"Caption":"L\u01b0u(F12)"},"Cancel":{"Caption":"H\u1ee7y(Esc)"},"Close":{"Caption":"\u0110\xf3ng"},"ShowAll":{"Caption":"T\u1ea5t c\u1ea3"},"Rejected":{"Caption":"\u0110\xe3 h\u1ee7y"},"Approved":{"Caption":"\u0110\xe3 ki\u1ec3m duy\u1ec7t"},"Completed":{"Caption":"\u0110\xe3 ho\xe0n th\xe0nh"},"Acept":{"Caption":"Ch\u1ecdn(F12)"},"OK":{"Caption":"Ch\u1ecdn(F12)"},"Load":{"Caption":"N\u1ea1p"}},"ColumnInfoTaskItem":{"TaskItemDate":{"Name":"TaskItemDate","Caption":"Ng\xe0y ph\xe1t sinh","Width":120,"Type":"date","Editable":false,"Visible":true},"CustomerName":{"Name":"CustomerName","Caption":"T\xean Kh\xe1ch h\xe0ng","Width":120,"Type":"string","Editable":false,"Visible":false},"SO_HDTM":{"Name":"SO_HDTM","Caption":"S\u1ed1 h\xf3a \u0111\u01a1n TM","Format":"#,##0.####;-#,##0.####;#","Width":100},"SO_KIEN":{"Name":"SO_KIEN","Caption":"S\u1ed1 l\u01b0\u1ee3ng ki\u1ec7n","Width":100,"CustomSettings":""},"TR_LUONG":{"Name":"TR_LUONG","Caption":"Tr\u1ecdng l\u01b0\u1ee3ng","Width":100,"CustomSettings":""},"TEN_DD_LUU_KHO":{"Name":"TEN_DD_LUU_KHO","Caption":"\u0110\u1ecba \u0111i\u1ec3m l\u01b0u kho ","Width":100,"CustomSettings":""},"GroupCode":{"Name":"GroupCode","Caption":"Group Code","Width":100},"Description":{"Name":"Description","Caption":"Di\u1ec5n gi\u1ea3i","Width":120,"Type":"string","Editable":true,"Visible":true}},"ColumnInfoTaskItemAir":{"DepartureFlight":{"Name":"DepartureFlight","Caption":"M\xe3 chuy\u1ebfn bay","Width":120,"Type":"string","Editable":true,"Visible":true},"DepartureDate":{"Name":"DepartureDate","Caption":"Ng\xe0y bay","Width":120,"Type":"date","Editable":true,"Visible":true},"ConnectingPort":{"Name":"ConnectingPort","Caption":"S\xe2n bay trung chuy\u1ec3n","Width":120,"Type":"string","Editable":true,"Visible":true},"ConnectingFlight":{"Name":"ConnectingFlight","Caption":"M\xe3 chuy\u1ebfn bay trung chuy\u1ec3n","Width":120,"Type":"string","Editable":true,"Visible":true},"ConectingDate":{"Name":"ConectingDate","Caption":"Ng\xe0y bay trung chuy\u1ec3n","Width":120,"Type":"date","Editable":true,"Visible":true},"FreightCost":{"Name":"FreightCost","Caption":"Chi ph\xed bay","Width":120,"Type":"number","Editable":true,"Visible":true},"Surcharge":{"Name":"Surcharge","Caption":"Ph\u1ee5 ph\xed s\xe2n bay","Width":120,"Type":"number","Editable":true,"Visible":true},"AirlinesSurcharge":{"Name":"AirlinesSurcharge","Caption":"Ph\u1ee5 ph\xed h\xe0ng kh\xf4ng","Width":120,"Type":"number","Editable":true,"Visible":true},"LocalCharge":{"Name":"LocalCharge","Caption":"Ph\xed n\u1ed9i \u0111\u1ecba","Width":120,"Type":"number","Editable":true,"Visible":true},"DeliveryCharge":{"Name":"DeliveryCharge","Caption":"Ph\xed giao h\xe0ng","Width":120,"Type":"number","Editable":true,"Visible":true},"BookingNo":{"Name":"BookingNo","Caption":"S\u1ed1 Booking","Width":120,"Type":"string","Editable":true,"Visible":true}},"ColumnInfoTaskItemSea":{"EmptyPickUpCY":{"Name":"EmptyPickUpCY","Caption":"\u0110\u1ecba \u0111i\u1ec3m l\u1ea5y v\u1ecf Cont","Width":120,"Type":"string","Editable":true,"Visible":true},"FullReturnCY":{"Name":"FullReturnCY","Caption":"\u0110\u1ecba \u0111i\u1ec3m h\u1ea1 c\u1ea3ng Cont","Width":120,"Type":"string","Editable":true,"Visible":true},"PortCargoCutOff":{"Name":"PortCargoCutOff","Caption":"Ng\xe0y-Gi\u1edd c\u1eaft m\xe1ng","Width":120,"Type":"date","Editable":true,"Visible":true},"DocCutOff":{"Name":"DocCutOff","Caption":"H\u1ea1n cu\u1ed1i c\xf3 m\u1eb7t","Width":120,"Type":"date","Editable":true,"Visible":true},"EquipmentType":{"Name":"EquipmentType","Caption":"Lo\u1ea1i Cont","Width":120,"Type":"string","Editable":true,"Visible":true}},"ColumnInfoTaskTodo":{"Finished":{"Name":"Finished","Caption":"Ho\xe0n th\xe0nh","Width":120},"Code":{"Name":"Code","Caption":"M\xe3","Width":120},"Status":{"Name":"Status","Caption":"Tr\u1ea1ng th\xe1i","Width":120},"Description":{"Name":"Description","Caption":"Di\u1ec5n gi\u1ea3i","Width":120}}}}')},xDdU:function(t,e,a){var n,i,c=a("4fRq"),s=a("I2ZF"),o=0,r=0;t.exports=function(t,e,a){var l=e&&a||0,d=e||[],u=(t=t||{}).node||n,b=void 0!==t.clockseq?t.clockseq:i;if(null==u||null==b){var m=c();null==u&&(u=n=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==b&&(b=i=16383&(m[6]<<8|m[7]))}var h=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:r+1,p=h-o+(g-r)/1e4;if(p<0&&void 0===t.clockseq&&(b=b+1&16383),(p<0||h>o)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=h,r=g,i=b;var f=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;d[l++]=f>>>24&255,d[l++]=f>>>16&255,d[l++]=f>>>8&255,d[l++]=255&f;var k=h/4294967296*1e4&268435455;d[l++]=k>>>8&255,d[l++]=255&k,d[l++]=k>>>24&15|16,d[l++]=k>>>16&255,d[l++]=b>>>8|128,d[l++]=255&b;for(var v=0;v<6;++v)d[l+v]=u[v];return e||s(d)}},xk4V:function(t,e,a){var n=a("4fRq"),i=a("I2ZF");t.exports=function(t,e,a){var c=e&&a||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var o=0;o<16;++o)e[c+o]=s[o];return e||i(s)}}}])}();